/*! For license information please see main.js.LICENSE.txt */
var BrainDriveWhyDetector;(()=>{"use strict";var e,t,n,r,o,i,a,s,l,c,u,h,d,p,f,m={20:(e,t,n)=>{var r=n(769),o=Symbol.for("react.element"),i=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,i={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)a.call(t,r)&&!l.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===i[r]&&(i[r]=t[r]);return{$$typeof:o,type:e,key:c,ref:u,props:i,_owner:s.current}}t.Fragment=i,t.jsx=c,t.jsxs=c},56:(e,t,n)=>{e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},72:e=>{var t=[];function n(e){for(var n=-1,r=0;r<t.length;r++)if(t[r].identifier===e){n=r;break}return n}function r(e,r){for(var i={},a=[],s=0;s<e.length;s++){var l=e[s],c=r.base?l[0]+r.base:l[0],u=i[c]||0,h="".concat(c," ").concat(u);i[c]=u+1;var d=n(h),p={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==d)t[d].references++,t[d].updater(p);else{var f=o(p,r);r.byIndex=s,t.splice(s,0,{identifier:h,updater:f,references:1})}a.push(h)}return a}function o(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,o){var i=r(e=e||[],o=o||{});return function(e){e=e||[];for(var a=0;a<i.length;a++){var s=n(i[a]);t[s].references--}for(var l=r(e,o),c=0;c<i.length;c++){var u=n(i[c]);0===t[u].references&&(t[u].updater(),t.splice(u,1))}i=l}}},77:e=>{var t=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,n=/\n/g,r=/^\s*/,o=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,i=/^:\s*/,a=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,s=/^[;\s]*/,l=/^\s+|\s+$/g,c="";function u(e){return e?e.replace(l,c):c}e.exports=function(e,l){if("string"!=typeof e)throw new TypeError("First argument must be a string");if(!e)return[];l=l||{};var h=1,d=1;function p(e){var t=e.match(n);t&&(h+=t.length);var r=e.lastIndexOf("\n");d=~r?e.length-r:d+e.length}function f(){var e={line:h,column:d};return function(t){return t.position=new m(e),v(),t}}function m(e){this.start=e,this.end={line:h,column:d},this.source=l.source}function g(t){var n=new Error(l.source+":"+h+":"+d+": "+t);if(n.reason=t,n.filename=l.source,n.line=h,n.column=d,n.source=e,!l.silent)throw n}function y(t){var n=t.exec(e);if(n){var r=n[0];return p(r),e=e.slice(r.length),n}}function v(){y(r)}function b(e){var t;for(e=e||[];t=x();)!1!==t&&e.push(t);return e}function x(){var t=f();if("/"==e.charAt(0)&&"*"==e.charAt(1)){for(var n=2;c!=e.charAt(n)&&("*"!=e.charAt(n)||"/"!=e.charAt(n+1));)++n;if(n+=2,c===e.charAt(n-1))return g("End of comment missing");var r=e.slice(2,n-2);return d+=2,p(r),e=e.slice(n),d+=2,t({type:"comment",comment:r})}}function k(){var e=f(),n=y(o);if(n){if(x(),!y(i))return g("property missing ':'");var r=y(a),l=e({type:"declaration",property:u(n[0].replace(t,c)),value:r?u(r[0].replace(t,c)):c});return y(s),l}}return m.prototype.content=e,v(),function(){var e,t=[];for(b(t);e=k();)!1!==e&&(t.push(e),b(t));return t}()}},113:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},133:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){let n=null;if(!e||"string"!=typeof e)return n;const r=(0,o.default)(e),i="function"==typeof t;return r.forEach(e=>{if("declaration"!==e.type)return;const{property:r,value:o}=e;i?t(r,o,e):o&&(n=n||{},n[r]=o)}),n};const o=r(n(77))},143:(e,t,n)=>{n.d(t,{C:()=>r});const r=function(e){if(null==e)return i;if("function"==typeof e)return o(e);if("object"==typeof e)return Array.isArray(e)?function(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=r(e[n]);return o(function(...e){let n=-1;for(;++n<t.length;)if(t[n].apply(this,e))return!0;return!1})}(e):function(e){const t=e;return o(function(n){const r=n;let o;for(o in e)if(r[o]!==t[o])return!1;return!0})}(e);if("string"==typeof e)return t=e,o(function(e){return e&&e.type===t});var t;throw new Error("Expected function, string, or object as test")};function o(e){return function(t,n,r){return Boolean(function(e){return null!==e&&"object"==typeof e&&"type"in e}(t)&&e.call(this,t,"number"==typeof n?n:void 0,r||void 0))}}function i(){return!0}},159:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},229:function(e,t,n){var r=(this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}})(n(133)),o=n(917);function i(e,t){var n={};return e&&"string"==typeof e?((0,r.default)(e,function(e,r){e&&r&&(n[(0,o.camelCase)(e,t)]=r)}),n):n}i.default=i,e.exports=i},248:(e,t,n)=>{n.r(t),n.d(t,{BrainDriveWhyDetector:()=>M,default:()=>z});var r=n(848),o=n(769),i=n.n(o),a=n(515),s=n(969),l=n(72),c=n.n(l),u=n(825),h=n.n(u),d=n(659),p=n.n(d),f=n(56),m=n.n(f),g=n(159),y=n.n(g),v=n(113),b=n.n(v),x=n(423),k={};k.styleTagTransform=b(),k.setAttributes=m(),k.insert=p().bind(null,"head"),k.domAPI=h(),k.insertStyleElement=y(),c()(x.A,k),x.A&&x.A.locals&&x.A.locals;const w=12,S=["phase1_love","phase2_good_at","phase3_world","phase4_paid","complete"],I={phase1_love:"What I Love",phase2_good_at:"What I'm Good At",phase3_world:"What World Needs",phase4_paid:"What I Can Be Paid For",complete:"Complete"},E={love:0,goodAt:0,worldNeeds:0,paidFor:0},A={phase1_love:!1,phase2_good_at:!1};function O(e="id"){return`${e}_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}const P={energizers:[],drainers:[],stories:[],summary:"",patterns:"",whyStatement:"",whyExplanation:"",candidateStrengths:[],whatYouLove:[],whatYouAreGoodAt:[]},T="**ğŸ¯ Your Ikigai Profile is Complete!**\n\nCongratulations! You've mapped all four dimensions:\nâœ… What you love\nâœ… What you're good at  \nâœ… What the world needs\nâœ… What you can be paid for\n\nI've computed your Ikigai overlaps - the sweet spots where these circles intersect.\n\n**Save your profile below to use the Decision Helper!**";const C={ollama:"ollama_servers_settings",anthropic:"anthropic_api_settings",openai:"openai_api_settings",openrouter:"openrouter_api_settings"},N="braindrive_whydetector_",D=`${N}temp_state`,_=`${N}why_profiles`,L=`${N}ikigai_profiles`,R="/api/v1/ikigai/why-profiles",W="/api/v1/ikigai/ikigai-profiles";class F{constructor(e){this.currentUserId=null,this.services=e,this.initializeUserId()}async initializeUserId(){try{if(this.services?.api){const e=await this.services.api.get("/api/v1/auth/me");e?.id&&(this.currentUserId=e.id)}}catch(e){console.error("AIService: Error getting user ID:",e)}}saveToLocalStorage(e,t){try{const n=JSON.stringify(t);localStorage.setItem(e,n),console.log(`Storage: Saved ${e} (${n.length} bytes)`)}catch(t){throw console.error(`Storage: Error saving ${e}:`,t),new Error(`Failed to save data: ${t instanceof Error?t.message:"Storage error"}`)}}loadFromLocalStorage(e){try{const t=localStorage.getItem(e);if(!t)return console.log(`Storage: No data found for ${e}`),null;const n=JSON.parse(t);return console.log(`Storage: Loaded ${e}`),n}catch(t){return console.error(`Storage: Error loading ${e}:`,t),null}}removeFromLocalStorage(e){try{localStorage.removeItem(e),console.log(`Storage: Removed ${e}`)}catch(t){console.error(`Storage: Error removing ${e}:`,t)}}async fetchModels(){if(!this.services?.api)return[];try{const e=await this.services.api.get("/api/v1/ai/providers/all-models"),t=e?.models||e?.data?.models||(Array.isArray(e)?e:[]);return Array.isArray(t)?t.map(e=>{const t=e.provider||"ollama";return{name:e.name||e.id||"",provider:t,providerId:C[t]||t,serverName:e.server_name||e.serverName||"Unknown Server",serverId:e.server_id||e.serverId||"unknown"}}):[]}catch(e){return console.error("AIService: Error fetching models:",e),this.fetchOllamaModelsFallback()}}async fetchOllamaModelsFallback(){try{const e=await this.services.api.get("/api/v1/settings/instances",{params:{definition_id:"ollama_servers_settings",scope:"user",user_id:"current"}});let t=null;if(Array.isArray(e)&&e.length>0?t=e[0]:e?.data&&(t=Array.isArray(e.data)?e.data[0]:e.data),!t?.value)return[];const n="string"==typeof t.value?JSON.parse(t.value):t.value,r=Array.isArray(n?.servers)?n.servers:[],o=[];for(const e of r)try{const t={server_url:encodeURIComponent(e.serverAddress),settings_id:"ollama_servers_settings",server_id:e.id};e.apiKey&&(t.api_key=e.apiKey);const n=await this.services.api.get("/api/v1/ollama/models",{params:t});for(const t of Array.isArray(n)?n:[])o.push({name:t.name,provider:"ollama",providerId:"ollama_servers_settings",serverName:e.serverName,serverId:e.id})}catch(t){console.error("AIService: Error loading models for server",e?.serverName,t)}return o}catch(e){return console.error("AIService: Fallback model fetch failed:",e),[]}}async saveTempState(e){try{const t={...e,lastUpdated:(new Date).toISOString()};this.saveToLocalStorage(D,t),console.log("AIService: Temp state saved successfully")}catch(e){console.error("AIService: Error saving temp state:",e)}}async loadTempState(){try{return this.loadFromLocalStorage(D)}catch(e){return console.error("AIService: Error loading temp state:",e),null}}async clearTempState(){try{this.removeFromLocalStorage(D),console.log("AIService: Temp state cleared")}catch(e){console.error("AIService: Error clearing temp state:",e)}}async sendToCoach(e,t,n,r,o,i,a,s,l){if(!this.services?.api)throw new Error("API service not available");const c=function(e,t,n,r){const o=function(e){switch(e){case"intro":return'PHASE: Getting Started (3+ exchanges)\n\nGOAL: Understand who they are and why they came here.\n\nQUALITY CHECK:\nIf their answer is vague or short, ask for more:\n- "Can you tell me more about that?"\n- "What specifically prompted this?"\n- "Help me understand - what does that look like for you?"\n\nDo NOT accept surface-level answers like "just curious" or "feeling stuck".\nDig into the specifics.\n\nAfter 3+ meaningful exchanges, move to asking about what energizes them.\n';case"energy_map":return'PHASE: Energy Mapping (4+ exchanges)\n\nGOAL: Find what energizes and drains them with DEPTH.\n\nQUALITY CHECK - CRITICAL:\nIf they give a generic answer like "I like helping people" or "meetings drain me":\n- Do NOT accept this as complete\n- Say: "I need more specifics here. Can you give me a concrete example?"\n- Ask: "When was a specific time this happened? Walk me through it."\n\nYou need SPECIFIC examples, not general statements.\n\nWHAT TO EXPLORE:\n- What makes them feel alive? (Get a specific moment)\n- What makes them feel drained? (Get a specific moment)\n- WHY for each - what specifically about it?\n\nAfter 4+ exchanges with real depth, move to stories.\n';case"stories":return'PHASE: Stories (3+ exchanges)\n\nGOAL: Get 1-2 specific stories with emotional depth.\n\nQUALITY CHECK:\nIf their story lacks detail or emotion:\n- "I want to really understand this moment. Can you paint the picture for me?"\n- "What were you feeling in that moment?"\n- "Why did this stick with you?"\n\nA good story has:\n- Specific details (when, where, who)\n- Emotional content (how they felt)\n- Meaning (why it mattered)\n\nIf they only give you surface-level descriptions, keep asking until you get the emotional core.\n\nAfter 3+ exchanges with real stories, move to synthesizing their Why.\n';case"your_why":return'â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\nPHASE: YOUR WHY - Deliver the Why Statement\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\nYou are now delivering their WHY statement based on everything learned.\n\nCURRENT EXCHANGE: {exchange_count} of 12\n\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\nCRITICAL RULES\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\n1. YOU CAN ONLY DELIVER THE WHY ON EXCHANGE 12 (THE FINAL EXCHANGE)\n   - If exchange_count < 12: Keep asking questions, do NOT deliver Why\n   - If exchange_count = 12: You MUST deliver the Why, no more questions\n\n2. If this is NOT exchange 12:\n   - Ask deeper questions about patterns you\'re seeing\n   - Connect dots between their energizers and stories\n   - Probe for more specific examples\n   - Do NOT mention or hint at their Why yet\n\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\nWHEN DELIVERING WHY (EXCHANGE 12 ONLY)\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\nYour final response MUST include ALL of the following:\n\n1. **SUMMARY OF WHAT I LEARNED:**\n   - 3-4 bullet points summarizing key themes from the conversation\n   - Reference specific things they said\n\n2. **THE PATTERNS I SEE:**\n   - 2-3 clear patterns that connect their energizers, drainers, and stories\n   - Show how these patterns reveal their core values\n\n3. **YOUR WHY IS:**\n   To [contribution/action verb] so that [impact/result for others]\n   \n   Example: "To simplify complexity so that people can focus on what matters"\n\n4. **WHY THIS FITS YOU:**\n   - 2-3 paragraphs explaining WHY this Why fits them\n   - Connect it back to specific energizers they mentioned\n   - Connect it to stories they shared\n   - Explain how this addresses what drains them\n\n5. **WHAT YOU LOVE (extracted from conversation):**\n   - List 3-5 activities/things they clearly love\n   - These should be concrete, not generic\n\n6. **WHAT YOU\'RE GOOD AT (extracted from conversation):**\n   - List 3-5 skills/abilities that emerged\n   - Include things others recognize in them\n\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\nNO MORE QUESTIONS AFTER WHY\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\nAfter delivering the Why, do NOT ask any questions.\nEnd with a statement like:\n"Take a moment to reflect on this. Does this resonate with you?"\n\nDO NOT ask "What do you think?" or "How does this feel?"\nThe Why Finder is complete. Let them process.\n';case"completed":return"Session complete.";default:return""}}(e),i=w-r,a=r>=w;let s=`You are a warm, supportive coach helping someone discover their Why.\n\nCRITICAL RULES - FOLLOW EXACTLY:\n\n1. ASK ONE NEW QUESTION\n   - Every response must end with a question mark (?)\n   - Ask something you have NOT asked before\n   - If you catch yourself asking the same thing, change it\n\n2. NO REPEATING\n   - Read the conversation history carefully\n   - Do NOT ask the same question twice\n   - Do NOT rephrase a previous question\n   - Each question must explore something NEW\n\n3. RESPONSE FORMAT\n   - 1-2 sentences acknowledging what they said\n   - 1 sentence of insight or reflection\n   - 1 NEW question ending with ?\n   - Keep it SHORT (3-4 sentences total)\n\n4. "YOUR WHY IS:" - ONLY AT THE END\n   - Do NOT say "YOUR WHY IS:" until user has shared 10+ messages\n   - When you do give the Why, do NOT ask another question\n   - Thank them and end the conversation\n\n5. BE WARM AND HUMAN\n   - Acknowledge their feelings\n   - Show you understood what they said\n   - Be curious, not interrogating\n\nGOOD RESPONSE:\n"That sounds meaningful - getting absorbed in solving undefined problems where you can shape the solution. What was it about that specific challenge that made hours fly by? Was it the freedom, the creativity, or something else?"\n\nBAD RESPONSE (repeats):\n"Tell me more about feeling engaged" (if you already asked this)\n\nBAD RESPONSE (no question):\n"You clearly value creative problem-solving."\n\nBAD RESPONSE (premature why):\n"YOUR WHY IS: To solve problems creatively." (too early!)\n\n\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\nCURRENT SESSION STATUS\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\nPHASE: ${e.toUpperCase()}\nEXCHANGE: ${r} of 12\nREMAINING: ${i} exchanges\n\n${o}`;return s+=a?`\n\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n*** THIS IS EXCHANGE ${r} - DELIVER THE WHY NOW ***\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\nDO NOT ASK ANY MORE QUESTIONS.\n\nYour response MUST include ALL of these sections:\n\n**SUMMARY OF WHAT I LEARNED:**\nâ€¢ [3-4 bullet points referencing specific things they said]\n\n**THE PATTERNS I SEE:**\nâ€¢ [2-3 patterns connecting their energizers, drainers, and stories]\n\n**YOUR WHY IS:**\nTo [contribution verb] so that [impact for others]\n\n**WHY THIS FITS YOU:**\n[2-3 paragraphs explaining WHY this Why fits them]\n\n**WHAT YOU LOVE (extracted from our conversation):**\nâ€¢ [Item 1]\nâ€¢ [Item 2]\nâ€¢ [Item 3]\nâ€¢ [More if applicable]\n\n**WHAT YOU'RE GOOD AT (extracted from our conversation):**\nâ€¢ [Item 1]\nâ€¢ [Item 2]\nâ€¢ [Item 3]\nâ€¢ [More if applicable]\n\nEnd with: "Take a moment to reflect on this. Does this resonate with you?"\n\nNO QUESTIONS. This is the final message.`:`\n\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\nâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ\nâ–ˆâ–ˆâ–ˆ  CRITICAL: DO NOT GIVE "YOUR WHY IS:" - NOT ALLOWED YET  â–ˆâ–ˆâ–ˆ\nâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\nEXCHANGE ${r} OF 12\nYOU MUST ASK ${i} MORE QUESTIONS BEFORE GIVING THE WHY.\n\nABSOLUTELY FORBIDDEN IN THIS RESPONSE:\n- Writing "YOUR WHY IS:" \n- Writing "Your Why is:"\n- Giving a why statement\n- Summarizing their purpose\n- Concluding the session\n- Saying "we're done" or "that's all"\n\nYOU MUST DO:\n- Ask ONE thoughtful follow-up question\n- The question must end with "?"\n- Build on what they just shared\n- Explore deeper into their stories, energy, or patterns\n\n${r<=3?"Focus on: What brings them energy vs drains them":""}\n${r>3&&r<=6?"Focus on: Meaningful stories and peak moments":""}\n${r>6&&r<=9?"Focus on: Patterns connecting their experiences":""}\n${r>9?"Focus on: Preparing for the final synthesis (but DO NOT give it yet!)":""}\n\nYOUR RESPONSE MUST END WITH A QUESTION MARK (?).`,s}(t,0,0,o),u=l?`whydetector_${l}`:`whydetector_${Date.now()}`;await this.sendToAI(c,r,e,i,a,s,u)}async extractWhyData(e,t){if(!this.services?.api)return console.warn("AIService: API service not available for extraction"),null;if(!e||0===e.length)return console.warn("AIService: No conversation to extract from"),null;const n=function(e){return`Analyze this Why Finder conversation and extract:\n1. What the user LOVES (activities, tasks, moments they enjoy)\n2. What the user is GOOD AT (skills, talents, abilities)\n\nCONVERSATION:\n${e.map(e=>`${"user"===e.role?"USER":"COACH"}: ${e.content}`).join("\n\n")}\n\nReturn ONLY valid JSON:\n{\n  "whatYouLove": ["item 1", "item 2", ...],\n  "whatYouAreGoodAt": ["item 1", "item 2", ...],\n  "whyExplanation": "detailed explanation"\n}\n\nBe specific. Extract at least 3 items for each if the conversation supports it.`}(e.map(e=>({role:"user"===e.sender?"user":"assistant",content:e.content})));let r="";try{console.log("AIService: Extracting Why data from",e.length,"messages"),await this.sendToAI(n,[],"Extract the data as JSON.",t,e=>{r+=e},void 0,"why_extraction"),console.log("AIService: Raw extraction response length:",r.length);const o=this.extractValidJson(r);return o?(console.log("AIService: Successfully parsed extraction data"),{whatYouLove:Array.isArray(o.whatYouLove)?o.whatYouLove:[],whatYouAreGoodAt:Array.isArray(o.whatYouAreGoodAt)?o.whatYouAreGoodAt:[],whyExplanation:"string"==typeof o.whyExplanation?o.whyExplanation:""}):(console.warn("AIService: Could not parse JSON from extraction response"),null)}catch(e){return console.error("AIService: Error extracting Why data:",e),null}}async sendToIkigaiBuilder(e,t,n,r,o,i,a,s,l){if(!this.services?.api)throw new Error("API service not available");const c=function(e,t,n,r){const o=function(e){switch(e){case"phase1_love":return'â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\nPHASE 1: "WHAT I LOVE"\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\nYou are in PHASE 1 of the Ikigai Builder.\n\nCONTEXT: User has completed Why Finder and selected that profile.\n\nYOUR GOAL:\nFill the "WHAT I LOVE" circle with at least 3 specific items:\n- Activities that energize them\n- Tasks they never get bored with\n- Things they\'d do even without pay\n- Moments when they lose track of time\n\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\nALLOWED TOPICS IN PHASE 1\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\nâœ“ What activities energize them\nâœ“ What tasks they never get bored with\nâœ“ When they lose track of time doing something\nâœ“ What they\'d do even without getting paid\nâœ“ Hobbies and passions\nâœ“ What makes them feel alive\nâœ“ What brings them joy\n\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\nFORBIDDEN TOPICS IN PHASE 1 (DO NOT ASK)\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\nâœ— What they\'re good at / skills - FORBIDDEN (Phase 2)\nâœ— What people come to them for - FORBIDDEN (Phase 2)\nâœ— Problems in the world - FORBIDDEN (Phase 3)\nâœ— Causes they care about - FORBIDDEN (Phase 3)\nâœ— What they get paid for - FORBIDDEN (Phase 4)\nâœ— Career paths - FORBIDDEN (Phase 4)\n\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\nQUESTION BANK FOR PHASE 1\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\n- "When you have a completely free day, what activities do you naturally gravitate toward?"\n- "What tasks make you lose track of time?"\n- "If money didn\'t matter for a year, how would you spend your days?"\n- "What activities leave you feeling energized rather than drained?"\n- "What would you happily do for free on a weekend?"\n- "What did you love doing as a child that you still enjoy?"\n\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\nRESPONSE FORMAT\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\n1. Brief acknowledgment of what they shared (1 sentence)\n2. One reflection or insight (optional)\n3. ONE new question ending with ?\n\nKeep responses SHORT (3-4 sentences max).\nAsk ONE question at a time.\n\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\nCOMPLETION CRITERIA\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\nPhase 1 is complete when you have at least 3 specific "LOVE" items.\nNot generic like "helping people" - be specific: WHO, WHAT, HOW.\n\n\n';case"phase2_good_at":return'â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\nPHASE 2: "WHAT I\'M GOOD AT"\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\nYou are in PHASE 2 of the Ikigai Builder.\n\nThe user has COMPLETED Phase 1 (What I Love).\n\nYOUR GOAL:\nFill the "WHAT I\'M GOOD AT" circle with at least 3 specific items:\n- Skills that come naturally\n- Things people come to them for\n- Abilities others recognize in them\n- Tasks that feel easy while others struggle\n\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\nALLOWED TOPICS IN PHASE 2\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\nâœ“ What people usually come to them for help with\nâœ“ Skills that feel natural/easy\nâœ“ Roles they naturally take in groups\nâœ“ What others have praised them for\nâœ“ Things they do well that others struggle with\nâœ“ Natural talents and abilities\nâœ“ Feedback they\'ve received about strengths\n\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\nFORBIDDEN TOPICS IN PHASE 2 (DO NOT ASK)\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\nâœ— What they love doing / enjoy - FORBIDDEN (Phase 1, already done)\nâœ— What energizes them - FORBIDDEN (Phase 1, already done)\nâœ— When they lose track of time - FORBIDDEN (Phase 1, already done)\nâœ— Problems in the world - FORBIDDEN (Phase 3)\nâœ— Causes they care about - FORBIDDEN (Phase 3)\nâœ— What they get paid for - FORBIDDEN (Phase 4)\nâœ— Career paths - FORBIDDEN (Phase 4)\n\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\nQUESTION BANK FOR PHASE 2\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\n- "What do people usually come to you for help with?"\n- "In your work, what parts feel easy to you that others struggle with?"\n- "What role do you naturally end up playing in groups?"\n- "What skills feel so natural you forget they\'re special?"\n- "What have people praised you for repeatedly?"\n- "If friends or colleagues described your strengths, what would they say?"\n\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\nRESPONSE FORMAT\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\n1. Brief acknowledgment of what they shared (1 sentence)\n2. One reflection or insight (optional)\n3. ONE new question ending with ?\n\nKeep responses SHORT (3-4 sentences max).\nAsk ONE question at a time.\n\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\nCOMPLETION CRITERIA\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\nPhase 2 is complete when you have at least 3 specific "GOOD AT" items.\nNot generic like "communication" - be specific about WHAT and HOW.\n\n\n';case"phase3_world":return'â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\nPHASE 3: "WHAT THE WORLD NEEDS"\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\nYou are in PHASE 3 of the Ikigai Builder.\n\nThe user has COMPLETED:\n- Phase 1: What I Love\n- Phase 2: What I\'m Good At\n\nDO NOT RE-EXPLORE THESE. They are DONE.\n\nYOUR GOAL:\nFill the "WHAT THE WORLD NEEDS" circle with at least 3 specific items:\n- External problems they want to solve\n- People or groups they feel pulled to help\n- Causes or movements they care about\n- Broken systems that frustrate them\n\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\nALLOWED TOPICS IN PHASE 3\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\nâœ“ Problems in society, companies, or systems that frustrate them\nâœ“ Types of people or communities they feel pulled to help\nâœ“ Causes or movements they care about\nâœ“ Broken systems they\'ve witnessed\nâœ“ What they\'d fix with a magic wand\nâœ“ News topics that make them angry or sad\nâœ“ Where their skills could create impact for OTHERS\n\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\nHARD FORBIDDEN TOPICS IN PHASE 3 (NEVER ASK)\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\nâœ— What energizes them - FORBIDDEN (Phase 1)\nâœ— What they love doing - FORBIDDEN (Phase 1)\nâœ— When they lose track of time - FORBIDDEN (Phase 1)\nâœ— What they\'re good at - FORBIDDEN (Phase 2)\nâœ— What people come to them for - FORBIDDEN (Phase 2)\nâœ— Their skills or talents - FORBIDDEN (Phase 2)\nâœ— What they get paid for - FORBIDDEN (Phase 4)\nâœ— Career paths - FORBIDDEN (Phase 4)\n\nIf you catch yourself asking about energy/love/skills, STOP and redirect.\n\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\nQUESTION BANK FOR PHASE 3 (USE ONLY THESE TYPES)\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\n- "What problems or injustices in the world bother you the most?"\n- "If you could wave a magic wand and fix one thing in society, what would it be?"\n- "Is there a type of person or group you naturally want to protect or support?"\n- "What news stories consistently make you frustrated or sad?"\n- "What broken systems have you personally witnessed?"\n- "Who is most affected by the problems you care about?"\n\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\nRESPONSE FORMAT\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\n1. Brief acknowledgment of what they shared (1 sentence)\n2. One reflection connecting to external impact (optional)\n3. ONE new question about world needs ending with ?\n\nKeep responses SHORT (3-4 sentences max).\nStay focused on EXTERNAL problems and needs.\n\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\nCOMPLETION CRITERIA\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\nPhase 3 is complete when you have at least 3 specific "WORLD NEEDS" items.\nEach should identify WHO is affected and WHAT the problem is.\n\n\n';case"phase4_paid":return'â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\nPHASE 4: "WHAT I CAN BE PAID FOR"\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\nYou are in PHASE 4 of the Ikigai Builder.\n\nThe user has COMPLETED:\n- Phase 1: What I Love\n- Phase 2: What I\'m Good At\n- Phase 3: What the World Needs\n\nALL PREVIOUS PHASES ARE DONE. Do not revisit them.\n\nYOUR GOAL:\nFill the "WHAT I CAN BE PAID FOR" circle with at least 3 items:\n- What they CURRENTLY get paid for\n- What they COULD realistically be paid for\n- Monetizable skills and paths\n- Constraints (income needs, time, location)\n\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\nALLOWED TOPICS IN PHASE 4\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\nâœ“ Current job, side gigs, freelance work\nâœ“ What employers/clients actually pay them for\nâœ“ Skills that are monetizable\nâœ“ Realistic ways to earn using their abilities\nâœ“ Financial constraints (minimum income needs)\nâœ“ Time constraints (availability)\nâœ“ Location constraints\nâœ“ Things they DON\'T want to be paid for\n\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\nHARD FORBIDDEN TOPICS IN PHASE 4 (NEVER ASK)\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\nâœ— What energizes them - FORBIDDEN (Phase 1)\nâœ— What they love doing - FORBIDDEN (Phase 1)\nâœ— What they\'re good at - FORBIDDEN (Phase 2)\nâœ— Their skills in general - FORBIDDEN (Phase 2)\nâœ— Problems in the world - FORBIDDEN (Phase 3)\nâœ— Causes they care about - FORBIDDEN (Phase 3)\nâœ— People they want to help - FORBIDDEN (Phase 3)\n\nStay focused ONLY on monetization, income, and practical earning.\n\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\nQUESTION BANK FOR PHASE 4 (USE ONLY THESE TYPES)\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\nCURRENT REALITY:\n- "Right now, what do you get paid for? Job, side work, gigs - anything."\n- "When people or organizations pay you, what exactly are they paying for?"\n\nPOTENTIAL PATHS:\n- "What could realistically be something people would pay you for?"\n- "If you had to earn money next month using current abilities, what would you do?"\n\nCONSTRAINTS:\n- "What\'s your minimum monthly income need?"\n- "Any time constraints - do you need flexibility or is 9-5 fine?"\n- "Is there anything you absolutely do NOT want to do for money?"\n\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\nRESPONSE FORMAT\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\n1. Brief acknowledgment of what they shared (1 sentence)\n2. One practical reflection (optional)\n3. ONE new question about monetization ending with ?\n\nKeep responses SHORT (3-4 sentences max).\nBe REALISTIC, not aspirational.\n\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\nCOMPLETION CRITERIA\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\nPhase 4 is complete when you have:\n- At least 2 CURRENT monetization paths\n- At least 1 POTENTIAL monetization path\n- Total of at least 3 items\n\n\n';case"complete":return"All phases complete. Profile ready to save.";default:return""}}(e),i=function(e,t){const n=e=>Math.max(0,3-e);switch(e){case"phase1_love":return`LOVE: ${t.love}/3 (need ${n(t.love)} more)`;case"phase2_good_at":return`GOOD AT: ${t.goodAt}/3 (need ${n(t.goodAt)} more)`;case"phase3_world":return`WORLD NEEDS: ${t.worldNeeds}/3 (need ${n(t.worldNeeds)} more)`;case"phase4_paid":return`PAID FOR: ${t.paidFor}/3 (need ${n(t.paidFor)} more)`;default:return""}}(e,n),a=function(e,t){let n="";return n+=`WHY STATEMENT: "${t?.whyStatement||"Not specified"}"\n`,e.phase1?n+=`\nPHASE 1 COMPLETE - LOVE: ${e.phase1.love.bullets.slice(0,3).join(", ")}`:t?.whatYouLove?.length&&(n+=`\nFROM WHY PROFILE - LOVE: ${t.whatYouLove.slice(0,3).join(", ")}`),e.phase2?n+=`\nPHASE 2 COMPLETE - GOOD AT: ${e.phase2.goodAt.bullets.slice(0,3).join(", ")}`:t?.whatYouAreGoodAt?.length&&(n+=`\nFROM WHY PROFILE - GOOD AT: ${t.whatYouAreGoodAt.slice(0,3).join(", ")}`),e.phase3&&(n+=`\nPHASE 3 COMPLETE - WORLD NEEDS: ${e.phase3.worldNeeds.bullets.slice(0,3).join(", ")}`),n}(t,r);return`You are IkigaiBuilder, an Ikigai mapping coach.\n\nYou help users map their Why into the Western four-circle Ikigai framework:\n- What you LOVE (activities that energize you)\n- What you are GOOD AT (skills and strengths)\n- What the WORLD NEEDS (problems, causes, people to help)\n- What you can be PAID FOR (monetizable skills and paths)\n\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\nABSOLUTE RULES - FOLLOW EXACTLY\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\n1. YOU ARE NOT AN ORACLE\n   - NEVER tell the user what they "should" do\n   - NEVER name specific jobs, companies, or life decisions\n   - NEVER make career recommendations\n   - You are a thought partner who asks questions\n\n2. ONE QUESTION AT A TIME\n   - Ask ONE short, concrete question per response\n   - Wait for their answer before the next question\n   - Each question must explore something NEW\n\n3. STAY IN YOUR PHASE\n   - Each phase has ALLOWED and FORBIDDEN topics\n   - If a topic is FORBIDDEN in your current phase, DO NOT ASK ABOUT IT\n   - Violation of phase boundaries is a critical error\n\n4. RESPONSE FORMAT\n   - 1-2 sentences acknowledging what they shared\n   - 1 insight or reflection (if helpful)\n   - 1 NEW question ending with ?\n   - Keep responses SHORT (3-4 sentences max)\n\n5. LOOP PROTECTION\n   If you notice you are:\n   - Asking the same question in different words, OR\n   - Asking about topics FORBIDDEN in this phase\n   Then you MUST:\n   1) Say: "Let me explore a different angle."\n   2) Immediately ask a NEW question that fits THIS phase\n\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\nQUALITY GATES\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\nEach circle needs at least 3 distinct, specific items before completion.\nGeneric answers like "I like helping people" are NOT acceptable.\nPush for specifics: WHO, WHAT, WHERE, HOW, WHEN.\n\n\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\nCURRENT PHASE: ${e.toUpperCase()}\n${i}\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\n${o}\n\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\nCONTEXT FROM PREVIOUS PHASES\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\n${a}\n\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\nRULES: Stay in your phase. Do NOT ask about forbidden topics.\nNeed at least 3 answers to complete this phase.\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•`}(t,n,r,l);await this.sendToAI(c,o,e,i,a,s,"ikigai_builder")}async summarizePhase(e,t,n){if(!this.services?.api)throw new Error("API service not available");const r=function(e,t){const n=t.map(e=>`${"user"===e.role?"USER":"COACH"}: ${e.content}`).join("\n\n");let r='â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\nPHASE SUMMARIZATION - DETAILED EXTRACTION\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\nYou are summarizing a completed Ikigai phase conversation.\n\nYour task: Extract ALL meaningful information from this conversation\nand structure it for storage. This will be used for:\n1. Short context summary for the next phase (2-3 sentences)\n2. Full detailed storage in the user\'s Ikigai profile\n\nBE COMPREHENSIVE. Capture everything - don\'t summarize away details.\n\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\nPHASE BEING SUMMARIZED: {phase_name}\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\nCONVERSATION:\n{conversation}\n\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\nEXTRACTION RULES\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\n1. Capture EVERY specific item mentioned, not just the main ones\n2. Include EXACT quotes when meaningful (verbatim from user)\n3. Note any nuances, caveats, "but..." or "except..." statements\n4. Preserve specific examples, stories, and anecdotes\n5. Don\'t paraphrase away important details\n6. Include emotional context ("I love...", "I hate...", "I feel...")\n7. Create a short context_summary (2-3 sentences) for next phase\n\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\nOUTPUT FORMAT (JSON ONLY)\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\nFor PHASE 1 (What I Love):\n{\n  "phase": "phase1_love",\n  "love": {\n    "bullets": ["specific activity/thing 1", "specific activity/thing 2", ...],\n    "quotes": ["exact quote from user 1", "exact quote 2", ...],\n    "summary": "2-3 sentence narrative summary of what they love"\n  },\n  "key_insights": ["pattern or insight 1", "pattern or insight 2", ...],\n  "context_summary": "2-3 sentence summary to pass to next phase"\n}\n\nFor PHASE 2 (What I\'m Good At):\n{\n  "phase": "phase2_good_at",\n  "good_at": {\n    "bullets": ["specific skill 1", "specific talent 2", ...],\n    "quotes": ["exact quote from user 1", "exact quote 2", ...],\n    "summary": "2-3 sentence narrative summary of their strengths"\n  },\n  "key_insights": ["pattern or insight 1", "pattern or insight 2", ...],\n  "context_summary": "2-3 sentence summary to pass to next phase"\n}\n\nFor PHASE 3 (What the World Needs):\n{\n  "phase": "phase3_world",\n  "world_needs": {\n    "bullets": ["specific problem/cause 1", "specific problem/cause 2", ...],\n    "quotes": ["exact quote from user 1", "exact quote 2", ...],\n    "who_to_help": ["specific group/community 1", "specific group 2", ...],\n    "summary": "2-3 sentence narrative summary of world needs they care about"\n  },\n  "key_insights": ["pattern or insight 1", "pattern or insight 2", ...],\n  "context_summary": "2-3 sentence summary to pass to next phase"\n}\n\nFor PHASE 4 (What I Can Be Paid For):\n{\n  "phase": "phase4_paid",\n  "paid_for": {\n    "current": ["current income source 1", "current income source 2", ...],\n    "potential": ["potential income path 1", "potential income path 2", ...],\n    "constraints": ["financial constraint 1", "time constraint", ...],\n    "quotes": ["exact quote from user 1", "exact quote 2", ...],\n    "summary": "2-3 sentence narrative summary of monetization paths"\n  },\n  "key_insights": ["pattern or insight 1", "pattern or insight 2", ...],\n  "context_summary": "2-3 sentence summary for final profile"\n}\n\nReturn ONLY valid JSON. Do NOT include any text before or after.\n';return r=r.replace("{phase_name}",e),r=r.replace("{conversation}",n),r}(e,t.map(e=>({role:"user"===e.sender?"user":"assistant",content:e.content})));let o="";try{await this.sendToAI(r,[],"Extract the structured data as JSON.",n,e=>{o+=e},void 0,"phase_summarize");return this.extractValidJson(o)||(console.warn("AIService: Could not parse JSON from response, using fallback"),this.createFallbackSummary(e,t))}catch(n){return console.error("AIService: Error summarizing phase:",n),this.createFallbackSummary(e,t)}}extractValidJson(e){if(!e)return null;const t=e.match(/```(?:json)?\s*([\s\S]*?)```/);if(t)try{return JSON.parse(t[1].trim())}catch(e){}const n=e.match(/\{[\s\S]*?\}(?=\s*(?:\n|$|[^{]))/g);if(n)for(let e=n.length-1;e>=0;e--)try{return JSON.parse(n[e])}catch(e){}const r=e.indexOf("{");if(r>=0){let t=0,n=-1;for(let o=r;o<e.length;o++)if("{"===e[o])t++;else if("}"===e[o]&&(t--,0===t)){n=o+1;break}if(n>r)try{return JSON.parse(e.substring(r,n))}catch(e){}}return null}createFallbackSummary(e,t){const n=t.filter(e=>"user"===e.sender).map(e=>e.content.substring(0,150));return"phase1_love"===e?{love:{bullets:n,quotes:[],summary:""},key_insights:[]}:"phase2_good_at"===e?{good_at:{bullets:n,quotes:[],summary:""},key_insights:[]}:"phase3_world"===e?{world_needs:{bullets:n,quotes:[],who_to_help:[],summary:""},key_insights:[]}:"phase4_paid"===e?{paid_for:{current:n.slice(0,2),potential:n.slice(2),constraints:[],quotes:[],summary:""},key_insights:[]}:{bullets:n}}async computeOverlaps(e,t,n,r,o,i){if(!this.services?.api)throw new Error("API service not available");const a=function(e,t,n,r,o){let i='â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\nIKIGAI OVERLAP COMPUTATION\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\nYou are computing the four Ikigai overlaps from the user\'s completed circles.\n\nINPUT DATA:\n- WHY STATEMENT: {why_statement}\n- LOVE: {love_bullets}\n- GOOD AT: {good_at_bullets}\n- WORLD NEEDS: {world_needs_bullets}\n- PAID FOR: {paid_for_bullets}\n\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\nYOUR TASK\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\nGenerate semantic overlaps for each intersection. This is NOT simple\nset intersection - it\'s finding meaningful combinations where two\ncircles reinforce each other.\n\n1. PASSION (LOVE âˆ© GOOD AT)\n   What they enjoy AND excel at\n   - Activities where enthusiasm meets competence\n   - Tasks that are both fulfilling and effortless\n\n2. MISSION (LOVE âˆ© WORLD NEEDS)\n   What they enjoy AND the world needs\n   - How their passions could serve others\n   - Where personal joy meets external impact\n\n3. PROFESSION (GOOD AT âˆ© PAID FOR)\n   What they excel at AND can earn from\n   - Marketable strengths\n   - Sustainable career paths using natural abilities\n\n4. VOCATION (WORLD NEEDS âˆ© PAID FOR)\n   What the world needs AND will pay for\n   - Viable impact-driven income paths\n   - Where market demand meets social need\n\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\nRULES\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\n- Be SPECIFIC to THIS person\'s data - don\'t invent things they didn\'t say\n- Find GENUINE intersections, not forced connections\n- If an overlap is weak or unclear, say so honestly\n- Each overlap should have 3-5 bullets and a 1-2 sentence summary\n- Keep bullets concrete and actionable\n\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\nOUTPUT FORMAT (JSON ONLY)\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\nReturn ONLY valid JSON in this exact format:\n\n{\n  "passion": {\n    "bullets": ["bullet 1", "bullet 2", "bullet 3"],\n    "summary": "1-2 sentence summary of their passion overlap"\n  },\n  "mission": {\n    "bullets": ["bullet 1", "bullet 2", "bullet 3"],\n    "summary": "1-2 sentence summary of their mission overlap"\n  },\n  "profession": {\n    "bullets": ["bullet 1", "bullet 2", "bullet 3"],\n    "summary": "1-2 sentence summary of their profession overlap"\n  },\n  "vocation": {\n    "bullets": ["bullet 1", "bullet 2", "bullet 3"],\n    "summary": "1-2 sentence summary of their vocation overlap"\n  }\n}\n\nDo NOT include any text before or after the JSON.\n';return i=i.replace("{why_statement}",e),i=i.replace("{love_bullets}",JSON.stringify(t)),i=i.replace("{good_at_bullets}",JSON.stringify(n)),i=i.replace("{world_needs_bullets}",JSON.stringify(r)),i=i.replace("{paid_for_bullets}",JSON.stringify(o)),i}(e,t,n,r,o);let s="";try{await this.sendToAI(a,[],"Compute the overlaps and return ONLY valid JSON.",i,e=>{s+=e},void 0,"ikigai_overlaps");const e=this.extractValidJson(s);return e?{passion:e.passion||{bullets:[],summary:""},mission:e.mission||{bullets:[],summary:""},profession:e.profession||{bullets:[],summary:""},vocation:e.vocation||{bullets:[],summary:""},computedAt:(new Date).toISOString()}:(console.warn("AIService: Could not parse overlaps JSON"),null)}catch(e){return console.error("AIService: Error computing overlaps:",e),null}}async sendToDecisionHelper(e,t,n,r,o,i){if(!this.services?.api)throw new Error("API service not available");const a=function(e,t){const n=t.filter(e=>"user"===e.role).length;return`You are an Ikigai-based Socratic decision helper.\n\nYou are given the user's saved Ikigai profile which includes:\n- Their Why statement\n- What they love\n- What they are good at\n- What the world needs\n- What they can be paid for\n- Overlaps: passion, mission, profession, and vocation\n\nThe user will bring a decision, like:\n- "Should I change my degree?"\n- "Should I take this job?"\n- "Should I start this side project?"\n- "Should I move to a new city?"\n\nYOUR JOB:\n1. Ask short, concrete questions\n2. Reflect back how this decision aligns or conflicts with each Ikigai circle\n3. Help them think through the decision - do NOT tell them what to do\n\nCRITICAL RULES:\n\n1. NO DIRECT ADVICE\n   - Never say "you should..." or "I think you should..."\n   - Never give definitive answers\n   - Your role is to illuminate, not prescribe\n\n2. NO SPECIFIC RECOMMENDATIONS\n   - Don't suggest specific jobs, companies, schools, or paths\n   - Don't make the decision for them\n\n3. ASK ALIGNMENT QUESTIONS (1-2 per circle):\n\nFor LOVE:\n- "How much of your daily time in this option would be spent on activities from your 'love' list?"\n- "Which things you love would this option let you do more of? Less of?"\n\nFor GOOD AT:\n- "Which of your existing strengths would you use heavily here? Which would be ignored?"\n- "Does this option play to your natural talents or require building new ones?"\n\nFor WORLD NEEDS:\n- "Does this option let you contribute to any of the problems you care about?"\n- "Would this bring you closer to or further from making the impact you want?"\n\nFor PAID FOR:\n- "Does this option respect your financial needs and constraints?"\n- "How does this compare to your current earning potential?"\n\n4. REFLECT MISMATCHES EXPLICITLY BUT NEUTRALLY:\n"This option seems strong on paid_for and good_at, but weak on world_needs compared to what you said you care about."\n\n5. ALWAYS END WITH A REFLECTION PROMPT:\nAfter exploring the alignment, always ask:\n"Given all this, what feels more right to you right now and why?"\n\nRESPONSE FORMAT:\n- Short acknowledgment of what they're considering\n- 2-4 alignment questions or reflections\n- End with the reflection prompt\n\nRemember: You help them SEE their decision more clearly. You don't make it for them.\n\n\n\n\n\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\nUSER'S IKIGAI PROFILE: "${e.name}"\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\nWHY STATEMENT: "${e.whyStatement||"Not specified"}"\n\nWHAT THEY LOVE:\n${e.love.bullets.map(e=>`â€¢ ${e}`).join("\n")}\n\nWHAT THEY'RE GOOD AT:\n${e.goodAt.bullets.map(e=>`â€¢ ${e}`).join("\n")}\n\nWHAT THE WORLD NEEDS:\n${e.worldNeeds.bullets.map(e=>`â€¢ ${e}`).join("\n")}\n\nWHAT THEY CAN BE PAID FOR:\n${e.paidFor.bullets.map(e=>`â€¢ ${e}`).join("\n")}\n\nOVERLAPS:\nâ€¢ Passion: ${e.overlaps.passion.summary}\nâ€¢ Mission: ${e.overlaps.mission.summary}\nâ€¢ Profession: ${e.overlaps.profession.summary}\nâ€¢ Vocation: ${e.overlaps.vocation.summary}\n\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\nEXCHANGES: ${n}\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\nHelp them SEE alignment/misalignment. Never tell them what to do.`}(t,n);await this.sendToAI(a,n,e,r,o,i,"decision_helper")}async extractStrengths(e,t,n){if(!this.services?.api)return[];const r=function(e,t){return`Analyze this message and extract strength signals.\n\nMESSAGE (from ${t} phase):\n"${e}"\n\nReturn ONLY JSON array:\n[{"text": "strength", "sourceQuote": "quote", "phase": "${t}"}]\n\nIf none found, return: []`}(e,t);let o="";try{await this.sendToAI(r,[],e,n,e=>{o+=e},void 0,"strength_extraction");const i=o.match(/\[[\s\S]*\]/);return i?JSON.parse(i[0]).map(e=>({text:e.text||"",sourceQuote:e.sourceQuote||e.source_quote||"",phase:e.phase||t})):[]}catch(e){return console.error("AIService: Error extracting strengths:",e),[]}}async sendToAI(e,t,n,r,o,i,a="whydetector"){const s=[{role:"system",content:e},...t,{role:"user",content:n}],l={provider:r.provider||"ollama",settings_id:r.providerId||"ollama_servers_settings",server_id:r.serverId,model:r.name,messages:s,params:{temperature:.7,max_tokens:2048},stream:!0,user_id:this.currentUserId||"current",conversation_type:a};try{if("function"==typeof this.services.api.postStreaming)await this.services.api.postStreaming("/api/v1/ai/providers/chat",l,e=>{if(i?.signal.aborted)return;let t=e;if(e.startsWith("data: ")&&(t=e.substring(6)),t.trim()&&"[DONE]"!==t.trim())try{const e=JSON.parse(t),n=this.extractTextFromResponse(e);n&&o(n)}catch(e){t.trim()&&o(t)}},{timeout:12e4,signal:i?.signal});else{const e=await this.services.api.post("/api/v1/ai/providers/chat",{...l,stream:!1},{timeout:6e4}),t=this.extractTextFromResponse(e?.data||e);t&&o(t)}}catch(e){if(e instanceof Error&&"AbortError"===e.name)throw e;throw console.error("AIService: AI request failed:",e),e}}extractTextFromResponse(e){return e?"string"==typeof e?e:e.text?e.text:e.content?e.content:e.response?e.response:e.message?.content?e.message.content:e.choices?.[0]?.message?.content?e.choices[0].message.content:e.choices?.[0]?.delta?.content?e.choices[0].delta.content:"":""}buildFullContext(e){return e.map(e=>({role:"user"===e.sender?"user":"assistant",content:e.content}))}buildPhaseContext(e,t){return e.filter(e=>e.phase===t).map(e=>({role:"user"===e.sender?"user":"assistant",content:e.content}))}buildShortSummaryForModel(e,t){let n="";const r=t?.whyStatement||"";return r&&(n+=`WHY: "${r}"\n`),e.phase1?n+=`\nPHASE 1 (What I Love): ${e.phase1.love.bullets.slice(0,4).join(", ")}\n`:t?.whatYouLove?.length&&(n+=`\nFROM WHY PROFILE (Love): ${t.whatYouLove.slice(0,4).join(", ")}\n`),e.phase2?n+=`PHASE 2 (What I'm Good At): ${e.phase2.goodAt.bullets.slice(0,4).join(", ")}\n`:t?.whatYouAreGoodAt?.length&&(n+=`FROM WHY PROFILE (Good At): ${t.whatYouAreGoodAt.slice(0,4).join(", ")}\n`),e.phase3&&(n+=`PHASE 3 (World Needs): ${e.phase3.worldNeeds.bullets.slice(0,4).join(", ")}\n`),n}async loadWhyProfiles(){console.log("AIService: Loading Why profiles from API...");try{if(this.services?.api){const e=await this.services.api.get(`${R}/files`);if(e?.success&&Array.isArray(e.profiles))return console.log("AIService: Loaded",e.profiles.length,"Why profiles from files"),e.profiles}}catch(e){console.warn("AIService: API load failed, trying localStorage:",e)}try{const e=this.loadFromLocalStorage(_)||[];return console.log("AIService: Loaded",e.length,"Why profiles from localStorage"),Array.isArray(e)?e:[]}catch(e){return console.error("AIService: Error loading Why profiles:",e),[]}}async saveWhyProfile(e){console.log("AIService: Saving Why profile:",e.name);try{if(this.services?.api){const t=await this.services.api.post(`${R}/file`,e);if(t?.success)return console.log(`AIService: Why profile "${e.name}" saved to file: ${t.filename}`),e}}catch(e){console.warn("AIService: API save failed, trying localStorage:",e)}try{const t=this.loadFromLocalStorage(_)||[],n=t.findIndex(t=>t.id===e.id);return n>=0?t[n]={...e,updatedAt:(new Date).toISOString()}:t.push(e),this.saveToLocalStorage(_,t),console.log(`AIService: Why profile "${e.name}" saved to localStorage`),e}catch(e){throw console.error("AIService: Error saving Why profile:",e),new Error(`Failed to save profile: ${e instanceof Error?e.message:"Unknown error"}`)}}async getWhyProfile(e){return(await this.loadWhyProfiles()).find(t=>t.id===e)||null}async deleteWhyProfile(e){console.log("AIService: Deleting Why profile:",e);try{const t=(this.loadFromLocalStorage(_)||[]).filter(t=>t.id!==e);this.saveToLocalStorage(_,t),console.log("AIService: Why profile deleted")}catch(e){throw console.error("AIService: Error deleting Why profile:",e),e}}getWhyProfileSummaries(e){return e.map(e=>({id:e.id,name:e.name,whyStatement:e.whyStatement,createdAt:e.createdAt,loveCount:e.whatYouLove?.length||0,goodAtCount:e.whatYouAreGoodAt?.length||0}))}async loadIkigaiProfiles(){console.log("AIService: Loading Ikigai profiles from API...");try{if(this.services?.api){const e=await this.services.api.get(`${W}/files`);if(e?.success&&Array.isArray(e.profiles))return console.log("AIService: Loaded",e.profiles.length,"Ikigai profiles from files"),e.profiles}}catch(e){console.warn("AIService: API load failed, trying localStorage:",e)}try{const e=this.loadFromLocalStorage(L)||[];return console.log("AIService: Loaded",e.length,"Ikigai profiles from localStorage"),Array.isArray(e)?e:[]}catch(e){return console.error("AIService: Error loading Ikigai profiles:",e),[]}}async saveIkigaiProfile(e){console.log("AIService: Saving Ikigai profile:",e.name);try{if(this.services?.api){const t=await this.services.api.post(`${W}/file`,e);if(t?.success)return console.log(`AIService: Ikigai profile "${e.name}" saved to file: ${t.filename}`),e}}catch(e){console.warn("AIService: API save failed, trying localStorage:",e)}try{const t=this.loadFromLocalStorage(L)||[],n=t.findIndex(t=>t.id===e.id);return n>=0?t[n]={...e,updatedAt:(new Date).toISOString()}:t.push(e),this.saveToLocalStorage(L,t),console.log(`AIService: Ikigai profile "${e.name}" saved to localStorage`),e}catch(e){throw console.error("AIService: Error saving Ikigai profile:",e),new Error(`Failed to save Ikigai profile: ${e instanceof Error?e.message:"Unknown error"}`)}}async getIkigaiProfile(e){return(await this.loadIkigaiProfiles()).find(t=>t.id===e)||null}async deleteIkigaiProfile(e){console.log("AIService: Deleting Ikigai profile:",e);try{const t=(this.loadFromLocalStorage(L)||[]).filter(t=>t.id!==e);this.saveToLocalStorage(L,t),console.log("AIService: Ikigai profile deleted")}catch(e){throw console.error("AIService: Error deleting Ikigai profile:",e),e}}getIkigaiProfileSummaries(e){return e.map(e=>({id:e.id,name:e.name,whyStatement:e.whyStatement,isComplete:e.isComplete,createdAt:e.createdAt}))}async fetchIkigaiProfiles(){const e=await this.loadIkigaiProfiles();return this.getIkigaiProfileSummaries(e)}async fetchIkigaiProfile(e){return this.getIkigaiProfile(e)}async createIkigaiProfile(e){const t={id:O("ikigai"),name:e.name,createdAt:(new Date).toISOString(),sourceWhyProfileId:e.sourceWhyProfileId,whyStatement:e.whyStatement||"",love:e.love,goodAt:e.goodAt,worldNeeds:e.worldNeeds,paidFor:e.paidFor,overlaps:e.overlaps,keyPatterns:e.keyPatterns||[],autoFilledPhases:e.autoFilledPhases||{phase1_love:!1,phase2_good_at:!1},isComplete:!0};return this.saveIkigaiProfile(t)}}class H extends o.Component{constructor(e){super(e),this.aiService=null,this.abortController=null,this.themeChangeListener=null,this.autoStartSession=async()=>{const{models:e}=this.state;if(e.length>0){const t=O("why_session");this.setState({sessionStarted:!0,selectedModel:e[0],currentPhase:"intro",sessionMode:"why_finder",messages:[],sessionData:{...P},whyFinderExchangeCount:0,whyFinderSessionId:t},()=>this.sendCoachMessage("START_SESSION"))}},this.sendCoachMessage=async e=>{const{selectedModel:t,currentPhase:n,sessionData:r,messages:o,sessionMode:i,whyFinderExchangeCount:a}=this.state;if(!this.aiService||!t)return void this.setState({error:"No model selected"});if("ikigai_builder"===i)return this.sendIkigaiBuilderMessage(e);if("decision_helper"===i)return this.sendDecisionHelperMessage(e);let s=a,l=null;"START_SESSION"===e||(s=a+1,l={id:O("msg"),sender:"user",content:e,timestamp:(new Date).toISOString(),phase:n,mode:"why_finder"});const c=O("msg"),u={id:c,sender:"coach",content:"START_SESSION"===e?"Hey! I'm here to help you discover your Why - your core purpose.\n\nWe'll have a focused conversation (exactly 12 exchanges) exploring:\n- What energizes you vs what drains you\n- Meaningful moments and stories from your life\n- Patterns that reveal what truly matters to you\n\nAt the end, I'll synthesize everything into your personal Why statement.\n\nLet's start: **What do you do right now, and what made you curious about finding your why?**":"",timestamp:(new Date).toISOString(),isStreaming:"START_SESSION"!==e,phase:n,mode:"why_finder"},h=l?[...o,l,u]:[...o,u];if(this.setState({messages:h,whyFinderExchangeCount:s,isLoading:!0,isStreaming:"START_SESSION"!==e,inputText:""}),"START_SESSION"!==e){this.abortController=new AbortController;try{const o=h.filter(e=>e.id!==c&&(!l||e.id!==l.id)),i=this.aiService.buildFullContext(o);("stories"===n||"energy_map"===n)&&e.length>50&&this.extractAndSaveStrengths(e,n),await this.aiService.sendToCoach(e,n,r,i,s,t,e=>{this.setState(t=>({messages:t.messages.map(t=>t.id===c?{...t,content:t.content+e}:t)}))},this.abortController,this.state.whyFinderSessionId||void 0),this.setState(e=>{const t=e.messages.find(e=>e.id===c);if(!t)return{...e,isLoading:!1,isStreaming:!1};const{cleanedContent:n,hadPrematureWhy:r}=function(e,t){const n=/YOUR WHY IS:?/i.test(e)||/\*\*YOUR WHY[:\s]/i.test(e)||/Your Why[:\s]/i.test(e);if(t>=12)return{cleanedContent:e,hadPrematureWhy:!1};if(!n)return{cleanedContent:e,hadPrematureWhy:!1};console.warn(`PREMATURE WHY DETECTED at exchange ${t}/12 - stripping`);const r=e.search(/\*?\*?YOUR WHY[:\s]/i);if(r>0){let t=e.substring(0,r).trim();return t.length<50&&(t="I'm still learning about you. Tell me more about a time when you felt completely in your element - what were you doing and why did it matter to you?"),t.endsWith("?")||(t+="\n\nWhat else would you like to share about this?"),{cleanedContent:t,hadPrematureWhy:!0}}return{cleanedContent:"That's really interesting. Can you tell me more about a specific moment when you felt most alive and engaged? What were you doing?",hadPrematureWhy:!0}}(t.content,s);r&&console.warn(`Blocked premature Why at exchange ${s}`);const o=s>=w;console.log(`[WHY FINDER] Exchange ${s}: isComplete=${o} (FORCED AT 12)`);let i={...e.sessionData};if(o){const e=n.match(/SUMMARY OF WHAT I LEARNED:?([\s\S]*?)(?=THE PATTERNS|PATTERNS I SEE|YOUR WHY|$)/i);e&&(i.summary=e[1].replace(/\*+/g,"").trim().substring(0,1e3));const t=n.match(/(?:THE )?PATTERNS I SEE:?([\s\S]*?)(?=YOUR WHY|$)/i);t&&(i.patterns=t[1].replace(/\*+/g,"").trim().substring(0,1e3));let r=n.match(/YOUR WHY IS:?\s*\*?\*?\s*([^\n]+)/i);r||(r=n.match(/\*\*YOUR WHY[:\s]+\*?\*?\s*([^\n]+)/i)),r&&(i.whyStatement=r[1].replace(/^\*+|\*+$/g,"").trim());const o=n.match(/WHY THIS FITS YOU:?([\s\S]*?)(?=WHAT YOU LOVE|$)/i);o&&(i.whyExplanation=o[1].replace(/\*+/g,"").trim().substring(0,1e3));const a=n.match(/WHAT YOU LOVE[^:]*:?([\s\S]*?)(?=WHAT YOU|$)/i);if(a){const e=a[1].match(/[â€¢\-\*]\s*([^\nâ€¢\-\*]+)/g)||[];i.whatYouLove=e.map(e=>e.replace(/^[â€¢\-\*\s]+/,"").replace(/\*+/g,"").trim()).filter(e=>e.length>3)}const s=n.match(/WHAT YOU[''']?RE GOOD AT[^:]*:?([\s\S]*?)$/i)||n.match(/WHAT YOU ARE GOOD AT[^:]*:?([\s\S]*?)$/i)||n.match(/YOUR STRENGTHS[^:]*:?([\s\S]*?)$/i)||n.match(/GOOD AT[^:]*:?([\s\S]*?)$/i);if(s){const e=s[1].match(/[â€¢\-\*]\s*([^\nâ€¢\-\*]+)/g)||[];i.whatYouAreGoodAt=e.map(e=>e.replace(/^[â€¢\-\*\s]+/,"").replace(/\*+/g,"").trim()).filter(e=>e.length>3),console.log("[WHY FINDER] Found goodAt items:",i.whatYouAreGoodAt)}else console.log('[WHY FINDER] Could not find "What You Are Good At" section');console.log("[WHY FINDER] Extracted data:",{summary:i.summary?.substring(0,50)+"...",patterns:i.patterns?.substring(0,50)+"...",whyStatement:i.whyStatement,whyExplanation:i.whyExplanation?.substring(0,50)+"...",whatYouLove:i.whatYouLove,whatYouAreGoodAt:i.whatYouAreGoodAt})}const a=e.messages.map(e=>{if(e.id===c){const t=o?function(e){if(!e||!/YOUR WHY IS:/i.test(e))return e;const t=e.split("\n");return t.filter((e,n)=>{const r=e.trim();return!(n>=t.length-3&&r.endsWith("?")&&r.length<100)}).join("\n").trim()}(n):n;return{...e,content:t,isStreaming:!1}}return e});return{...e,messages:a,currentPhase:o?"completed":e.currentPhase,sessionData:i,showSaveWhyPrompt:o,isLoading:!1,isStreaming:!1}}),s<w&&this.analyzeAndUpdatePhase(e)}catch(e){e instanceof Error&&"AbortError"===e.name?this.setState(e=>({messages:e.messages.map(e=>e.id===c?{...e,isStreaming:!1,content:e.content+" [Stopped]"}:e),isLoading:!1,isStreaming:!1})):this.setState({error:`Error: ${e instanceof Error?e.message:"Unknown error"}`,isLoading:!1,isStreaming:!1})}}else this.setState({isLoading:!1})},this.handleSaveWhyProfile=async()=>{const{messages:e,sessionData:t,whyFinderExchangeCount:n,selectedModel:r,whyProfileName:o,isLoading:i}=this.state;if(!i)if(this.aiService)if(o.trim()){this.setState({isLoading:!0,error:""});try{const i=e.filter(e=>"why_finder"===e.mode&&"coach"===e.sender).pop();let a=this.extractBulletItems(i?.content||"","WHAT YOU LOVE"),s=this.extractBulletItems(i?.content||"","WHAT YOU'RE GOOD AT");0===a.length&&(a=t.whatYouLove||[]),0===s.length&&(s=t.whatYouAreGoodAt||[]),a=a.slice(0,5),s=s.slice(0,5);const l={id:O("why"),name:o.trim(),createdAt:(new Date).toISOString(),summary:t.summary||"",patterns:t.patterns||"",whyStatement:t.whyStatement||"",whyExplanation:t.whyExplanation||"",whatYouLove:a,whatYouAreGoodAt:s,modelUsed:r?.name||"unknown",exchangeCount:n};console.log("[WHY FINDER] Saving profile:",{summary:l.summary?.substring(0,50)+"...",patterns:l.patterns?.substring(0,50)+"...",whyStatement:l.whyStatement,whatYouLove:l.whatYouLove,whatYouAreGoodAt:l.whatYouAreGoodAt}),console.log("Saving lean Why profile:",l.name),await this.aiService.saveWhyProfile(l),console.log("Why profile saved successfully");const c=await this.aiService.loadWhyProfiles(),u={id:O("msg"),sender:"coach",content:'âœ… **Why Profile saved!**\n\nYou can now use this profile to build your Ikigai. Click "ğŸ¯ Ikigai" in the header to start!',timestamp:(new Date).toISOString(),phase:"completed",mode:"why_finder"};this.setState({whyProfiles:c,selectedWhyProfileId:l.id,showSaveWhyPrompt:!1,showBuildIkigaiPrompt:!0,messages:[...this.state.messages,u],isLoading:!1,error:""})}catch(e){console.error("Error saving Why profile:",e),this.setState({error:`Failed to save Why profile: ${e instanceof Error?e.message:"Unknown error"}`,isLoading:!1})}}else this.setState({error:"Please enter a name for your Why profile"});else this.setState({error:"Service not initialized. Please refresh the page."})},this.handleSkipSaveWhy=()=>{this.setState({showSaveWhyPrompt:!1,showBuildIkigaiPrompt:!0})},this.sendIkigaiBuilderMessage=async e=>{const{selectedModel:t,currentIkigaiPhase:n,phaseStorage:r,phaseAnswerCounts:o,selectedWhyProfileId:i,whyProfiles:a,isLoading:s}=this.state;if(s)return void console.log("[IKIGAI] Already loading, ignoring message");if(!this.aiService||!t)return void this.setState({error:"No model selected"});if(e.startsWith("START_PHASE_")){const e=this.getIkigaiPhaseIntroMessage(n),t={id:O("msg"),sender:"coach",content:e,timestamp:(new Date).toISOString(),phase:n,mode:"ikigai_builder"};return void this.setState(e=>({messages:[...e.messages,t]}))}const l=this.state.messages,c={id:O("msg"),sender:"user",content:e,timestamp:(new Date).toISOString(),phase:n,mode:"ikigai_builder"},u=O("msg"),h={id:u,sender:"coach",content:"",timestamp:(new Date).toISOString(),isStreaming:!0,phase:n,mode:"ikigai_builder"},d=l.filter(e=>"ikigai_builder"===e.mode&&e.phase===n).map(e=>({role:"user"===e.sender?"user":"assistant",content:e.content}));console.log("[IKIGAI] Context being sent to model:",d.length,"messages"),d.forEach((e,t)=>console.log(`  [${t}] ${e.role}: ${e.content.substring(0,50)}...`));const p=e.trim().toLowerCase(),f=p.length>=H.MIN_ANSWER_LENGTH&&!["ok","okay","yes","no","maybe","sure","i guess","i think so","not sure","idk"].includes(p);let m=0;switch(n){case"phase1_love":m=o.love;break;case"phase2_good_at":m=o.goodAt;break;case"phase3_world":m=o.worldNeeds;break;case"phase4_paid":m=o.paidFor}const g=f&&m+1>=3;if(console.log(`[IKIGAI] Phase ${n}: count=${m}, willComplete=${g}`),g){console.log(`[IKIGAI] *** Phase ${n} complete with 3rd answer - skipping coach, moving to next phase ***`);const t={id:O("msg"),sender:"coach",content:"âœ… Got it! Processing your answers and preparing the next phase...",timestamp:(new Date).toISOString(),phase:n,mode:"ikigai_builder",isStreaming:!0};return this.setState({messages:[...l,c,t],inputText:"",isLoading:!0}),void this.updatePhaseAnswerCount(e)}const y=[...l,c,h];this.setState({messages:y,isLoading:!0,isStreaming:!0,inputText:""}),this.updatePhaseAnswerCount(e),this.abortController=new AbortController;try{const s=i&&a.find(e=>e.id===i)||null;await this.aiService.sendToIkigaiBuilder(e,n,r,o,d,t,e=>{this.setState(t=>({messages:t.messages.map(t=>t.id===u?{...t,content:t.content+e}:t)}))},this.abortController,s),this.setState(e=>({messages:e.messages.map(e=>e.id===u?{...e,isStreaming:!1}:e),isLoading:!1,isStreaming:!1}))}catch(e){e instanceof Error&&"AbortError"===e.name?this.setState(e=>({messages:e.messages.map(e=>e.id===u?{...e,isStreaming:!1,content:e.content+" [Stopped]"}:e),isLoading:!1,isStreaming:!1})):this.setState({error:`Error: ${e instanceof Error?e.message:"Unknown error"}`,isLoading:!1,isStreaming:!1})}},this.sendDecisionHelperMessage=async e=>{const{selectedModel:t,selectedIkigaiProfileId:n,ikigaiProfiles:r,messages:o}=this.state;if(!this.aiService||!t)return void this.setState({error:"No model selected"});const i=r.find(e=>e.id===n);if(!i)return void this.setState({error:"Could not load profile"});const a="START_DECISION_HELPER"===e;if(!a){const t={id:O("msg"),sender:"user",content:e,timestamp:(new Date).toISOString(),mode:"decision_helper"};this.setState(e=>({messages:[...e.messages,t]}))}const s=O("msg"),l={id:s,sender:"coach",content:a?"I'm here to help you think through a decision using your Ikigai profile.\n\nI won't tell you what to do - instead, I'll ask questions to help you see how this decision aligns with what matters to you.\n\n**What decision are you working through right now?**":"",timestamp:(new Date).toISOString(),isStreaming:!a,mode:"decision_helper"};if(this.setState(e=>({messages:[...e.messages,l],isLoading:!0,isStreaming:!a,inputText:""})),a)this.setState({isLoading:!1});else{this.abortController=new AbortController;try{const n=this.aiService.buildFullContext(o.filter(e=>"decision_helper"===e.mode));await this.aiService.sendToDecisionHelper(e,i,n,t,e=>{this.setState(t=>({messages:t.messages.map(t=>t.id===s?{...t,content:t.content+e}:t)}))},this.abortController),this.setState(e=>({messages:e.messages.map(e=>e.id===s?{...e,isStreaming:!1}:e),isLoading:!1,isStreaming:!1}))}catch(e){e instanceof Error&&"AbortError"===e.name?this.setState(e=>({messages:e.messages.map(e=>e.id===s?{...e,isStreaming:!1,content:e.content+" [Stopped]"}:e),isLoading:!1,isStreaming:!1})):this.setState({error:`Error: ${e instanceof Error?e.message:"Unknown error"}`,isLoading:!1,isStreaming:!1})}}},this.handleStartIkigaiBuilder=()=>{const{whyProfiles:e,selectedWhyProfileId:t}=this.state;if(console.log("Starting Ikigai Builder..."),console.log("Why profiles available:",e.length),console.log("Selected Why Profile ID:",t),0===e.length){console.warn("No Why profiles found");const e={id:O("msg"),sender:"coach",content:"âš ï¸ **Why Profile Required**\n\nTo build your Ikigai profile, you first need to complete a Why Finder session and save a Why Profile.\n\nThe Ikigai Builder uses your Why Profile as the foundation for exploring:\nâ€¢ What you love\nâ€¢ What you're good at\nâ€¢ What the world needs\nâ€¢ What you can be paid for\n\n**Start a Why Discovery first!**",timestamp:(new Date).toISOString(),mode:"why_finder"};return void this.setState({error:"No saved Why Profile found. Complete a Why Discovery first!",messages:[...this.state.messages,e],showBuildIkigaiPrompt:!1})}if(!t){console.warn("No Why profile selected");const e={id:O("msg"),sender:"coach",content:"**Select a Why Profile**\n\nPlease select a Why Profile from the dropdown to use as the foundation for your Ikigai Builder.\n\nYour Why Profile contains insights about what you love and what you're good at, which helps us start strong.",timestamp:(new Date).toISOString(),mode:"why_finder"};return void this.setState({error:"Please select a Why Profile from the dropdown first.",messages:[...this.state.messages,e],showBuildIkigaiPrompt:!1})}const n=e.find(e=>e.id===t);if(!n)return console.warn("Selected Why profile not found in list"),void this.setState({error:"Selected Why Profile not found. Please select another one."});console.log("Using Why Profile:",n.name);const r=n.whatYouLove.length,o=n.whatYouAreGoodAt.length,i=r>=3,a=o>=3,s=function(e,t,n){const r=t>=3,o=n>=3;return r&&o?`âœ… **Great news!**\n\nFrom your Why Profile "${e.name}", I found:\n\n**What You Love (${t} items):**\n${e.whatYouLove.map(e=>`â€¢ ${e}`).join("\n")}\n\n**What You're Good At (${n} items):**\n${e.whatYouAreGoodAt.map(e=>`â€¢ ${e}`).join("\n")}\n\nThis covers **Phase 1** and **Phase 2**! Let's move directly to **Phase 3: What the World Needs**.`:r&&!o?`ğŸ“Š **Partial data found**\n\nFrom your Why Profile "${e.name}", I found:\n\n**What You Love (${t} items) âœ“**\n${e.whatYouLove.map(e=>`â€¢ ${e}`).join("\n")}\n\n**What You're Good At (${n} items) âš ï¸ - Need ${3-n} more**\n\nPhase 1 is covered, but we need to explore Phase 2 (What You're Good At) before moving forward.`:!r&&o?`ğŸ“Š **Partial data found**\n\nFrom your Why Profile "${e.name}", I found:\n\n**What You Love (${t} items) âš ï¸ - Need ${3-t} more**\n\n**What You're Good At (${n} items) âœ“**\n${e.whatYouAreGoodAt.map(e=>`â€¢ ${e}`).join("\n")}\n\nPhase 2 is covered, but we need to explore Phase 1 (What You Love) before moving forward.`:`ğŸ“Š **Analysis Complete**\n\nFrom your Why Profile "${e.name}", I found some insights but need more detail:\n\n**What You Love (${t} items) âš ï¸ - Need ${3-t} more**\n${t>0?e.whatYouLove.map(e=>`â€¢ ${e}`).join("\n"):"None found yet"}\n\n**What You're Good At (${n} items) âš ï¸ - Need ${3-n} more**\n${n>0?e.whatYouAreGoodAt.map(e=>`â€¢ ${e}`).join("\n"):"None found yet"}\n\nLet's start with **Phase 1: What You Love** to fill in the gaps.`}(n,r,o),l={id:O("msg"),sender:"coach",content:s,timestamp:(new Date).toISOString(),mode:"ikigai_builder"};let c,u={...E},h={...A},d={whyFinder:null,phase1:null,phase2:null,phase3:null,phase4:null,overlaps:null};d.whyProfileId=t,i&&a?(c="phase3_world",u={love:r,goodAt:o,worldNeeds:0,paidFor:0},h={phase1_love:!0,phase2_good_at:!0},d.phase1={fullConversation:[],love:{bullets:n.whatYouLove,quotes:[],summary:`Auto-filled from Why Profile: ${n.name}`},keyInsights:[],contextSummary:"",completedAt:(new Date).toISOString(),exchangeCount:0,autoFilled:!0},d.phase2={fullConversation:[],goodAt:{bullets:n.whatYouAreGoodAt,quotes:[],summary:`Auto-filled from Why Profile: ${n.name}`},keyInsights:[],contextSummary:"",completedAt:(new Date).toISOString(),exchangeCount:0,autoFilled:!0}):i?(c="phase2_good_at",u={love:r,goodAt:o,worldNeeds:0,paidFor:0},h={phase1_love:!0,phase2_good_at:!1},d.phase1={fullConversation:[],love:{bullets:n.whatYouLove,quotes:[],summary:`Auto-filled from Why Profile: ${n.name}`},keyInsights:[],contextSummary:"",completedAt:(new Date).toISOString(),exchangeCount:0,autoFilled:!0}):a?(c="phase1_love",u={love:r,goodAt:o,worldNeeds:0,paidFor:0},h={phase1_love:!1,phase2_good_at:!1}):(c="phase1_love",u={love:r,goodAt:o,worldNeeds:0,paidFor:0}),this.setState({sessionMode:"ikigai_builder",currentIkigaiPhase:c,showBuildIkigaiPrompt:!1,showSaveWhyPrompt:!1,messages:[l],phaseStorage:d,phaseAnswerCounts:u,autoFilledPhases:h},()=>{setTimeout(()=>{this.sendIkigaiBuilderMessage(`START_PHASE_${c.toUpperCase()}`)},500)})},this.handleStartDecisionHelper=()=>{const{ikigaiProfiles:e,selectedIkigaiProfileId:t}=this.state;if(console.log("Starting Decision Helper..."),console.log("Ikigai profiles available:",e.length),console.log("Selected Ikigai Profile ID:",t),0===e.length){console.warn("No Ikigai profiles found");const e={id:O("msg"),sender:"coach",content:'You don\'t have any saved Ikigai profiles yet.\n\nTo use the Decision Helper, you need to:\n1. Complete a Why Finder conversation and save it\n2. Build an Ikigai profile from your Why Profile\n3. Save the Ikigai profile\n\nStart with "Why Discovery" first!',timestamp:(new Date).toISOString(),mode:"why_finder"};return void this.setState({error:"No saved Ikigai Profile found. Complete Ikigai Builder first!",messages:[...this.state.messages,e]})}if(!t)return console.warn("No Ikigai profile selected"),void this.setState({error:"Please select an Ikigai profile from the dropdown first."});const n=e.find(e=>e.id===t);if(!n)return console.warn("Selected Ikigai profile not found"),void this.setState({error:"Selected Ikigai profile not found. Please select another one."});console.log("Using Ikigai Profile:",n.name),this.setState({sessionMode:"decision_helper",messages:[],error:""},()=>{this.sendDecisionHelperMessage("START_DECISION_HELPER")})},this.handleBackToWhyFinder=async()=>{await this.clearTempState(),this.setState({sessionMode:"why_finder",messages:[],currentPhase:"intro",sessionData:{...P},showBuildIkigaiPrompt:!1,showSaveWhyPrompt:!1,whyFinderExchangeCount:0,phaseStorage:{whyFinder:null,phase1:null,phase2:null,phase3:null,phase4:null,overlaps:null},phaseAnswerCounts:{...E},autoFilledPhases:{...A},isIkigaiComplete:!1},()=>this.sendCoachMessage("START_SESSION"))},this.handleWhyProfileSelect=e=>{this.setState({selectedWhyProfileId:e.target.value||null})},this.handleIkigaiProfileSelect=e=>{this.setState({selectedIkigaiProfileId:e.target.value||null})},this.handleSaveIkigaiProfile=async()=>{const{phaseStorage:e,profileName:t,selectedWhyProfileId:n,whyProfiles:r,autoFilledPhases:o,isLoading:i}=this.state;if(i)return;if(!this.aiService)return void this.setState({error:"Service not initialized. Please refresh the page."});if(!t.trim())return void this.setState({error:"Please enter a name for your Ikigai profile"});this.setState({isLoading:!0,error:""});const a=n?r.find(e=>e.id===n):null;try{console.log("Saving lean Ikigai profile:",t.trim());const r=this.extractKeyPatterns(e),i={name:t.trim(),sourceWhyProfileId:n||void 0,whyStatement:a?.whyStatement||"",love:{bullets:(e.phase1?.love.bullets||a?.whatYouLove||[]).slice(0,5),summary:(e.phase1?.love.summary||"").substring(0,200)},goodAt:{bullets:(e.phase2?.goodAt.bullets||a?.whatYouAreGoodAt||[]).slice(0,5),summary:(e.phase2?.goodAt.summary||"").substring(0,200)},worldNeeds:{bullets:(e.phase3?.worldNeeds.bullets||[]).slice(0,5),summary:(e.phase3?.worldNeeds.summary||"").substring(0,200)},paidFor:{bullets:(e.phase4?.paidFor.bullets||[]).slice(0,5),summary:(e.phase4?.paidFor.summary||"").substring(0,200)},overlaps:{passion:{bullets:(e.overlaps?.passion.bullets||[]).slice(0,3),summary:(e.overlaps?.passion.summary||"").substring(0,200)},mission:{bullets:(e.overlaps?.mission.bullets||[]).slice(0,3),summary:(e.overlaps?.mission.summary||"").substring(0,200)},profession:{bullets:(e.overlaps?.profession.bullets||[]).slice(0,3),summary:(e.overlaps?.profession.summary||"").substring(0,200)},vocation:{bullets:(e.overlaps?.vocation.bullets||[]).slice(0,3),summary:(e.overlaps?.vocation.summary||"").substring(0,200)}},keyPatterns:r.slice(0,5),autoFilledPhases:o},s=await this.aiService.createIkigaiProfile(i);if(!s)throw new Error("Profile was not returned after save");{console.log("Ikigai profile saved successfully:",s.id);const e=await this.aiService.loadIkigaiProfiles(),t={id:O("msg"),sender:"coach",content:`âœ… **Profile "${s.name}" saved!**\n\nYou can now use the **Decision Helper** to think through decisions!\n\nSelect your profile from the dropdown and click "Decision Helper" to get started.`,timestamp:(new Date).toISOString(),phase:"complete",mode:"ikigai_builder"};await this.clearTempState(),this.setState({ikigaiProfiles:e,selectedIkigaiProfileId:s.id,phaseStorage:{whyFinder:null,phase1:null,phase2:null,phase3:null,phase4:null,overlaps:null},isIkigaiComplete:!1,profileName:"",messages:[...this.state.messages,t],isLoading:!1,error:""})}}catch(e){console.error("Error saving Ikigai profile:",e),this.setState({error:`Failed to save Ikigai profile: ${e instanceof Error?e.message:"Unknown error"}`,isLoading:!1})}},this.handleSendMessage=()=>{const{inputText:e,isLoading:t}=this.state;e.trim()&&!t&&this.sendCoachMessage(e.trim())},this.handleKeyPress=e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),this.handleSendMessage())},this.handleStopGeneration=()=>{this.abortController&&this.abortController.abort()},this.handleModelSelect=e=>{const t=this.state.models.find(t=>t.name===e.target.value);t&&this.setState({selectedModel:t})},this.dismissError=()=>this.setState({error:""}),this.chatEndRef=i().createRef(),this.inputRef=i().createRef(),this.state={messages:[],inputText:"",isLoading:!1,error:"",currentTheme:"light",isStreaming:!1,isInitializing:!0,selectedModel:null,models:[],isLoadingModels:!0,sessionStarted:!1,currentPhase:"intro",sessionData:{...P},whyFinderExchangeCount:0,sessionMode:"why_finder",whyProfiles:[],selectedWhyProfileId:null,ikigaiProfiles:[],selectedIkigaiProfileId:null,currentIkigaiPhase:"phase1_love",phaseAnswerCounts:{...E},phaseStorage:{whyFinder:null,phase1:null,phase2:null,phase3:null,phase4:null,overlaps:null},showBuildIkigaiPrompt:!1,showSaveWhyPrompt:!1,isIkigaiComplete:!1,autoFilledPhases:{...A},profileName:"",whyProfileName:"",whyFinderSessionId:null}}async componentDidMount(){this.aiService=new F(this.props.services),this.initializeTheme(),await this.loadModels(),await this.loadProfiles(),await this.clearTempState(),this.setState({isInitializing:!1},()=>{this.autoStartSession()})}componentWillUnmount(){this.themeChangeListener&&this.props.services?.theme&&this.props.services.theme.removeThemeChangeListener(this.themeChangeListener),this.abortController&&this.abortController.abort()}componentDidUpdate(e,t){this.state.messages.length!==t.messages.length&&this.scrollToBottom()}initializeTheme(){if(this.props.services?.theme){const e=this.props.services.theme.getCurrentTheme();this.setState({currentTheme:e}),this.themeChangeListener=e=>this.setState({currentTheme:e}),this.props.services.theme.addThemeChangeListener(this.themeChangeListener)}}async loadModels(){if(this.aiService)try{const e=await this.aiService.fetchModels();this.setState({models:e,selectedModel:e.length>0?e[0]:null,isLoadingModels:!1,error:0===e.length?"No AI models available. Please configure a model provider.":""})}catch(e){this.setState({isLoadingModels:!1,error:"Failed to load AI models"})}else this.setState({isLoadingModels:!1,error:"Service not initialized"})}async loadProfiles(){if(this.aiService)try{const e=await this.aiService.loadWhyProfiles(),t=await this.aiService.loadIkigaiProfiles();this.setState({whyProfiles:e,ikigaiProfiles:t})}catch(e){console.error("Error loading profiles:",e)}}scrollToBottom(){this.chatEndRef.current?.scrollIntoView({behavior:"smooth"})}async extractAndSaveStrengths(e,t){if(this.aiService&&this.state.selectedModel)try{const n=await this.aiService.extractStrengths(e,t,this.state.selectedModel);n.length>0&&this.setState(e=>({sessionData:{...e.sessionData,candidateStrengths:[...e.sessionData.candidateStrengths,...n]}}))}catch(e){console.error("Error extracting strengths:",e)}}analyzeAndUpdatePhase(e){const{currentPhase:t,sessionData:n,messages:r,whyFinderExchangeCount:o}=this.state;r.filter(e=>e.phase===t&&"user"===e.sender).length;let i=t,a={...n};e.length>30&&("energy_map"===t&&(a.energizers.length<3?a.energizers=[...n.energizers,e.substring(0,150)]:a.drainers.length<3&&(a.drainers=[...n.drainers,e.substring(0,150)])),"stories"===t&&(a.stories=[...n.stories,e.substring(0,200)])),i=o<=3?"intro":o<=6?"energy_map":o<=10?"stories":"your_why",i===t&&JSON.stringify(a)===JSON.stringify(n)||this.setState({currentPhase:i,sessionData:a})}extractBulletItems(e,t){let n=t;if(t.toLowerCase().includes("good at")){const t=["WHAT YOU'RE GOOD AT","WHAT YOU ARE GOOD AT","WHAT YOU\\'RE GOOD AT","YOUR STRENGTHS"];for(const n of t){const t=new RegExp(`\\*{0,2}${n}[^:]*:?\\*{0,2}([\\s\\S]*?)(?=\\*{1,2}[A-Z]|$)`,"i"),r=e.match(t);if(r)return this.parseBulletSection(r[1])}return[]}const r=new RegExp(`\\*{1,2}${n}[^:]*:\\*{0,2}([\\s\\S]*?)(?=\\*{1,2}[A-Z]|$)`,"i"),o=e.match(r);return o?this.parseBulletSection(o[1]):[]}parseBulletSection(e){const t=[],n=e.split("\n");for(const e of n){let n=e.replace(/^[\sâ€¢\-\*]+/,"").trim();n=n.replace(/\*+/g,"").trim();const r=n.endsWith(":")||/^[A-Z\s]{5,}$/.test(n)||/WHAT YOU|PATTERNS|SUMMARY|WHY THIS/i.test(n);n&&n.length>5&&!r&&t.push(n)}return t}extractSection(e,t){const n=new RegExp(`\\*\\*${t}[^:]*:\\*\\*([\\s\\S]*?)(?=\\*\\*|$)`,"i"),r=e.match(n);return r?r[1].trim().replace(/\n+/g," ").substring(0,500):""}getIkigaiPhaseIntroMessage(e){switch(e){case"phase1_love":return"**Phase 1 of 4: What I Love** â¤ï¸\n\nLet's explore what truly brings you joy and energy.\n\nI need at least 3 specific things you love before we can proceed.\n\n**When you have a completely free day with no obligations, what activities do you naturally gravitate toward?**";case"phase2_good_at":return"**Phase 2 of 4: What I'm Good At** ğŸ’ª\n\nNow let's explore your natural talents and skills - things that come easy to you.\n\nI need at least 3 specific skills before we can proceed.\n\n**What do people usually come to you for help with?**";case"phase3_world":return"**Phase 3 of 4: What the World Needs** ğŸŒ\n\nNow let's look outward - at problems and causes you care about.\n\nThis isn't about your skills or preferences - it's about what's broken in the world that bothers you.\n\nI need at least 3 specific world needs before we can proceed.\n\n**When you look at the world around you, what problems or injustices frustrate you the most?**";case"phase4_paid":return"**Phase 4 of 4: What I Can Be Paid For** ğŸ’°\n\nFinally, let's be practical - what can you actually earn money doing?\n\nThis is about realistic monetization, not dream jobs.\n\nI need at least 3 items before we can proceed.\n\n**What do you currently get paid for - job, freelance, side gigs, anything?**";case"complete":return T;default:return""}}updatePhaseAnswerCount(e){const{currentIkigaiPhase:t,phaseAnswerCounts:n}=this.state,r=e.trim().toLowerCase();if(!(r.length>=H.MIN_ANSWER_LENGTH)||["ok","okay","yes","no","maybe","sure","i guess","i think so","not sure","idk"].includes(r))return void console.log(`Answer too short or filler: "${e}" - not counting`);let o={...n};switch(t){case"phase1_love":o.love++;break;case"phase2_good_at":o.goodAt++;break;case"phase3_world":o.worldNeeds++;break;case"phase4_paid":o.paidFor++}console.log(`Phase ${t} answer count: ${JSON.stringify(o)}`),this.setState({phaseAnswerCounts:o},()=>{(function(e,t){switch(t){case"phase1_love":return e.love>=3;case"phase2_good_at":return e.goodAt>=3;case"phase3_world":return e.worldNeeds>=3;case"phase4_paid":return e.paidFor>=3;default:return!0}})(o,t)&&this.checkAndCompletePhase()})}async checkAndCompletePhase(){const{currentIkigaiPhase:e,messages:t,selectedModel:n,phaseStorage:r,selectedWhyProfileId:o,whyProfiles:i}=this.state;if(!this.aiService||!n)return;const a=t.filter(t=>"ikigai_builder"===t.mode&&t.phase===e),s=o?i.find(e=>e.id===o):null;this.setState({isLoading:!0});try{const t=await this.aiService.summarizePhase(e,a,n);let i={...r,whyProfileId:o||void 0};"phase1_love"===e?(i.phase1={fullConversation:a,love:{bullets:t.love?.bullets||[],quotes:t.love?.quotes||[],summary:t.love?.summary||""},keyInsights:t.key_insights||[],contextSummary:t.context_summary||"",completedAt:(new Date).toISOString(),exchangeCount:a.filter(e=>"user"===e.sender).length,autoFilled:!1},s&&s.whatYouAreGoodAt.length>=3&&s?(i.phase2={fullConversation:[],goodAt:{bullets:s.whatYouAreGoodAt,quotes:[],summary:`Auto-filled from Why Profile: ${s.name}`},keyInsights:[],contextSummary:"",completedAt:(new Date).toISOString(),exchangeCount:0,autoFilled:!0},this.setState({autoFilledPhases:{...this.state.autoFilledPhases,phase2_good_at:!0},phaseAnswerCounts:{...this.state.phaseAnswerCounts,goodAt:s.whatYouAreGoodAt.length}}),await this.saveTempState(i),this.transitionToNextPhase("phase3_world",i)):(await this.saveTempState(i),this.transitionToNextPhase("phase2_good_at",i))):"phase2_good_at"===e?(i.phase2={fullConversation:a,goodAt:{bullets:t.good_at?.bullets||[],quotes:t.good_at?.quotes||[],summary:t.good_at?.summary||""},keyInsights:t.key_insights||[],contextSummary:t.context_summary||"",completedAt:(new Date).toISOString(),exchangeCount:a.filter(e=>"user"===e.sender).length,autoFilled:!1},await this.saveTempState(i),this.transitionToNextPhase("phase3_world",i)):"phase3_world"===e?(i.phase3={fullConversation:a,worldNeeds:{bullets:t.world_needs?.bullets||[],quotes:t.world_needs?.quotes||[],summary:t.world_needs?.summary||"",whoToHelp:t.world_needs?.who_to_help||[]},keyInsights:t.key_insights||[],contextSummary:t.context_summary||"",completedAt:(new Date).toISOString(),exchangeCount:a.filter(e=>"user"===e.sender).length},await this.saveTempState(i),this.transitionToNextPhase("phase4_paid",i)):"phase4_paid"===e&&(i.phase4={fullConversation:a,paidFor:{bullets:[...t.paid_for?.current||[],...t.paid_for?.potential||[]],quotes:t.paid_for?.quotes||[],summary:t.paid_for?.summary||"",currentPaths:t.paid_for?.current||[],potentialPaths:t.paid_for?.potential||[],constraints:t.paid_for?.constraints||[]},keyInsights:t.key_insights||[],contextSummary:t.context_summary||"",completedAt:(new Date).toISOString(),exchangeCount:a.filter(e=>"user"===e.sender).length},await this.saveTempState(i),await this.computeAndShowOverlaps(i))}catch(e){console.error("Error completing phase:",e),this.setState({error:"Error saving phase data. Please continue.",isLoading:!1})}}async saveTempState(e,t){if(this.aiService)try{await this.aiService.saveTempState({sessionMode:this.state.sessionMode,currentIkigaiPhase:this.state.currentIkigaiPhase,phaseStorage:e,messages:t||this.state.messages,autoFilledPhases:this.state.autoFilledPhases,phaseAnswerCounts:this.state.phaseAnswerCounts,selectedWhyProfileId:this.state.selectedWhyProfileId,lastUpdated:(new Date).toISOString()}),console.log("Temp state saved successfully")}catch(e){console.error("Error saving temp state:",e)}}async clearTempState(){if(this.aiService)try{await this.aiService.clearTempState(),console.log("Temp state cleared")}catch(e){console.error("Error clearing temp state:",e)}}transitionToNextPhase(e,t){this.setState({phaseStorage:t,currentIkigaiPhase:e,messages:this.state.messages.filter(e=>"ikigai_builder"!==e.mode),isLoading:!1},()=>{this.sendIkigaiBuilderMessage(`START_PHASE_${e.toUpperCase()}`)})}async computeAndShowOverlaps(e){const{selectedModel:t,selectedWhyProfileId:n,whyProfiles:r,autoFilledPhases:o}=this.state;if(!this.aiService||!t)return void this.setState({error:"No model available to compute overlaps",isLoading:!1});const i=n?r.find(e=>e.id===n):null,a=e.phase1?.love.bullets||(o.phase1_love&&i?i.whatYouLove:[]),s=e.phase2?.goodAt.bullets||(o.phase2_good_at&&i?i.whatYouAreGoodAt:[]),l=e.phase3?.worldNeeds.bullets||[],c=e.phase4?.paidFor.bullets||[],u=i?.whyStatement||"";try{const n=await this.aiService.computeOverlaps(u,a,s,l,c,t);if(n){const t={...e,overlaps:n};await this.saveTempState(t),this.setState({phaseStorage:t,currentIkigaiPhase:"complete",isIkigaiComplete:!0,messages:[],isLoading:!1},()=>{const e={id:O("msg"),sender:"coach",content:T+"\n\n"+this.generateIkigaiSummary(t),timestamp:(new Date).toISOString(),phase:"complete",mode:"ikigai_builder"};this.setState(t=>({messages:[...t.messages,e]}))})}else console.error("computeOverlaps returned null"),this.setState({error:"Failed to compute Ikigai overlaps. Please try saving again.",isLoading:!1,isIkigaiComplete:!0,currentIkigaiPhase:"complete"},()=>{const t={passion:{bullets:[],summary:"Could not compute - please add manually"},mission:{bullets:[],summary:"Could not compute - please add manually"},profession:{bullets:[],summary:"Could not compute - please add manually"},vocation:{bullets:[],summary:"Could not compute - please add manually"},computedAt:(new Date).toISOString()},n={...e,overlaps:t};this.setState({phaseStorage:n})})}catch(e){console.error("Error computing overlaps:",e),this.setState({error:"Failed to compute overlaps. You can still save your profile.",isLoading:!1})}}generateIkigaiSummary(e){const t=e.phase1?.love.bullets||[],n=e.phase2?.goodAt.bullets||[],r=e.phase3?.worldNeeds.bullets||[],o=e.phase4?.paidFor.bullets||[],i=e.overlaps;return`---\n\n**What You Love:** ${t.map(e=>`â€¢ ${e}`).join("\n")}\n\n**What You're Good At:** ${n.map(e=>`â€¢ ${e}`).join("\n")}\n\n**What the World Needs:** ${r.map(e=>`â€¢ ${e}`).join("\n")}\n\n**What You Can Be Paid For:** ${o.map(e=>`â€¢ ${e}`).join("\n")}\n\n---\n\n**Your Ikigai Overlaps:**\nğŸ”¥ **Passion**: ${i?.passion.summary||"..."}\nğŸŒ **Mission**: ${i?.mission.summary||"..."}\nğŸ’¼ **Profession**: ${i?.profession.summary||"..."}\nğŸ¯ **Vocation**: ${i?.vocation.summary||"..."}`}extractKeyPatterns(e){const t=[];return e.phase1?.keyInsights&&t.push(...e.phase1.keyInsights),e.phase2?.keyInsights&&t.push(...e.phase2.keyInsights),e.phase3?.keyInsights&&t.push(...e.phase3.keyInsights),e.phase4?.keyInsights&&t.push(...e.phase4.keyInsights),[...new Set(t)].slice(0,5)}renderPhaseTracker(){const{sessionMode:e,whyFinderExchangeCount:t,currentIkigaiPhase:n,autoFilledPhases:o,phaseAnswerCounts:i}=this.state;if("why_finder"===e){const e=[];for(let n=0;n<w;n++){const o=n<t,i=n===t;e.push((0,r.jsx)("div",{className:`phase-dot ${o?"complete":""} ${i?"current":""}`,title:`Exchange ${n+1}/12`},n))}return(0,r.jsxs)("div",{className:"phase-tracker why-finder-tracker",children:[(0,r.jsx)("span",{className:"tracker-label",children:"Progress:"}),(0,r.jsx)("div",{className:"phase-dots",children:e}),(0,r.jsxs)("span",{className:"tracker-count",children:[t,"/",w]})]})}if("ikigai_builder"===e){const e=S.indexOf(n),t=S.slice(0,4).map((t,a)=>{const s=a<e||"complete"===n,l=t===n,c="phase1_love"===t&&o.phase1_love||"phase2_good_at"===t&&o.phase2_good_at;let u=0;return"phase1_love"===t?u=i.love:"phase2_good_at"===t?u=i.goodAt:"phase3_world"===t?u=i.worldNeeds:"phase4_paid"===t&&(u=i.paidFor),(0,r.jsx)("div",{className:`phase-dot ikigai ${s?"complete":""} ${l?"current":""} ${c?"auto-filled":""}`,title:`${I[t]}${c?" (Auto-filled)":""} (${u}/3)`},t)});let a=0;return"phase1_love"===n?a=i.love:"phase2_good_at"===n?a=i.goodAt:"phase3_world"===n?a=i.worldNeeds:"phase4_paid"===n&&(a=i.paidFor),(0,r.jsxs)("div",{className:"phase-tracker ikigai-tracker",children:[(0,r.jsx)("span",{className:"tracker-label",children:"Phase:"}),(0,r.jsx)("div",{className:"phase-dots",children:t}),(0,r.jsx)("span",{className:"tracker-phase-name",children:"complete"===n?"âœ“ Complete":`${I[n]} (${a}/3)`})]})}return null}renderHeader(){const{models:e,selectedModel:t,isLoadingModels:n,sessionMode:o,whyProfiles:i,selectedWhyProfileId:a,ikigaiProfiles:s,selectedIkigaiProfileId:l}=this.state;return(0,r.jsxs)("div",{className:"why-header",children:[(0,r.jsxs)("div",{className:"header-left",children:[(0,r.jsx)("span",{className:"header-title",children:(()=>{switch(o){case"why_finder":default:return"ğŸ§­ Why Discovery";case"ikigai_builder":return"ğŸ¯ Ikigai Builder";case"decision_helper":return"ğŸ¤” Decision Helper"}})()}),"why_finder"!==o&&(0,r.jsx)("button",{className:"btn-back",onClick:this.handleBackToWhyFinder,title:"Start new Why Discovery",children:"â† New"})]}),(0,r.jsxs)("div",{className:"header-center",children:[(0,r.jsxs)("select",{className:"profile-select",value:a||"",onChange:this.handleWhyProfileSelect,title:"Select Why Profile for Ikigai Builder",children:[(0,r.jsx)("option",{value:"",children:"Select Why Profile..."}),i.map(e=>(0,r.jsxs)("option",{value:e.id,children:[e.name," (L:",e.whatYouLove.length,"/G:",e.whatYouAreGoodAt.length,")"]},e.id))]}),(0,r.jsxs)("select",{className:"profile-select",value:l||"",onChange:this.handleIkigaiProfileSelect,title:"Select Ikigai Profile for Decision Helper",children:[(0,r.jsx)("option",{value:"",children:"Select Ikigai Profile..."}),s.map(e=>(0,r.jsxs)("option",{value:e.id,children:[e.name," ",e.isComplete?"âœ“":""]},e.id))]}),(0,r.jsx)("button",{className:"btn-ikigai-builder themed",onClick:this.handleStartIkigaiBuilder,disabled:0===i.length||"ikigai_builder"===o,title:0===i.length?"Complete a Why Discovery first":"Start Ikigai Builder",children:"ğŸ¯ Ikigai"}),(0,r.jsx)("button",{className:"btn-decision-helper",onClick:this.handleStartDecisionHelper,disabled:0===s.length||!l,title:0===s.length?"Create an Ikigai profile first":"Start Decision Helper",children:"Decision Helper"})]}),(0,r.jsx)("div",{className:"header-right",children:(0,r.jsx)("select",{className:"model-select",value:t?.name||"",onChange:this.handleModelSelect,disabled:n,children:e.map(e=>(0,r.jsx)("option",{value:e.name,children:e.name},e.name))})})]})}renderMessages(){const{messages:e,showBuildIkigaiPrompt:t,showSaveWhyPrompt:n,currentIkigaiPhase:o,isIkigaiComplete:i,profileName:l,whyProfileName:c,isLoading:u}=this.state;return(0,r.jsxs)("div",{className:"why-chat",children:[e.map(e=>(0,r.jsx)("div",{className:`chat-message ${e.sender}`,children:(0,r.jsxs)("div",{className:"message-bubble "+(e.isStreaming?"streaming":""),children:[(0,r.jsx)(a.oz,{remarkPlugins:[s.A],children:e.content}),e.isStreaming&&(0,r.jsx)("span",{className:"typing-cursor",children:"â–‹"})]})},e.id)),n&&(0,r.jsx)("div",{className:"profile-save-container",children:(0,r.jsxs)("div",{className:"profile-save-card themed",children:[(0,r.jsx)("h4",{children:"ğŸ’¾ Save Your Why Profile"}),(0,r.jsx)(a.oz,{children:'Would you like to save this Why Profile?\n\nSaving allows you to:\nâ€¢ Use it as a foundation for building your Ikigai Profile\nâ€¢ Reference it later for decision-making\nâ€¢ Track how your Why evolves over time\n\nâš ï¸ **Important:** If you plan to use the Ikigai Builder or Decision Helper, you **must** save your Why Profile first. These features require a saved profile to work.\n\nEnter a name for your profile and click "Save Why Profile".'}),(0,r.jsxs)("div",{className:"profile-save-form",children:[(0,r.jsx)("input",{type:"text",className:"profile-name-input",placeholder:"e.g., My Why 2025...",value:c,onChange:e=>this.setState({whyProfileName:e.target.value}),disabled:u}),(0,r.jsx)("button",{className:"btn-save-profile themed",onClick:this.handleSaveWhyProfile,disabled:!c.trim()||u,children:u?"â³ Saving...":"Save Why Profile"}),(0,r.jsx)("button",{className:"btn-skip",onClick:this.handleSkipSaveWhy,disabled:u,children:"Skip"})]})]})}),t&&(0,r.jsx)("div",{className:"ikigai-prompt-container",children:(0,r.jsxs)("div",{className:"ikigai-prompt themed",children:[(0,r.jsx)("p",{children:"Ready to build your Ikigai profile?"}),(0,r.jsx)("button",{className:"btn-build-ikigai themed",onClick:this.handleStartIkigaiBuilder,disabled:0===this.state.whyProfiles.length,children:"ğŸ¯ Build Ikigai Profile"})]})}),i&&"complete"===o&&(0,r.jsx)("div",{className:"profile-save-container",children:(0,r.jsxs)("div",{className:"profile-save-card themed",children:[(0,r.jsx)("h4",{children:"ğŸ’¾ Save Your Ikigai Profile"}),(0,r.jsx)("p",{children:"Save your profile to use Decision Helper."}),(0,r.jsxs)("div",{className:"profile-save-form",children:[(0,r.jsx)("input",{type:"text",className:"profile-name-input",placeholder:"e.g., Career 2025...",value:l,onChange:e=>this.setState({profileName:e.target.value}),disabled:u}),(0,r.jsx)("button",{className:"btn-save-profile themed",onClick:this.handleSaveIkigaiProfile,disabled:!l.trim()||u,children:u?"â³ Saving...":"Save Ikigai Profile"})]})]})}),(0,r.jsx)("div",{ref:this.chatEndRef})]})}renderInput(){const{inputText:e,isLoading:t,isStreaming:n,currentPhase:o,sessionMode:i,isIkigaiComplete:a,showSaveWhyPrompt:s,currentIkigaiPhase:l,phaseAnswerCounts:c}=this.state;if("why_finder"===i&&"completed"===o&&!s||a)return(0,r.jsx)("div",{className:"why-input",children:(0,r.jsx)("div",{className:"session-complete",children:(0,r.jsxs)("span",{children:["âœ… ","why_finder"===i?"Why Discovery Complete!":"Ikigai Profile Ready!"]})})});let u=0;return"phase1_love"===l?u=c.love:"phase2_good_at"===l?u=c.goodAt:"phase3_world"===l?u=c.worldNeeds:"phase4_paid"===l&&(u=c.paidFor),(0,r.jsxs)("div",{className:"why-input",children:[(0,r.jsx)("div",{className:"input-wrapper",children:(0,r.jsx)("textarea",{ref:this.inputRef,className:"input-textarea",value:e,onChange:e=>this.setState({inputText:e.target.value}),onKeyPress:this.handleKeyPress,placeholder:this.getInputPlaceholder(),disabled:t||s,rows:1})}),n?(0,r.jsx)("button",{className:"btn-stop",onClick:this.handleStopGeneration,children:"â– "}):(0,r.jsx)("button",{className:"btn-send",onClick:this.handleSendMessage,disabled:!e.trim()||t||s,children:"â¤"})]})}getInputPlaceholder(){const{sessionMode:e,currentIkigaiPhase:t,whyFinderExchangeCount:n,phaseAnswerCounts:r}=this.state;switch(e){case"why_finder":return`Exchange ${n+1}/12 - Share your thoughts...`;case"ikigai_builder":let e=0;return"phase1_love"===t?e=r.love:"phase2_good_at"===t?e=r.goodAt:"phase3_world"===t?e=r.worldNeeds:"phase4_paid"===t&&(e=r.paidFor),`${I[t]} (${e}/3) - Share your answer...`;case"decision_helper":return"What decision are you thinking through?";default:return"Share your thoughts..."}}render(){const{currentTheme:e,isInitializing:t,isLoadingModels:n,error:o,models:i}=this.state,a=t||n,s=!a&&0===i.length;return(0,r.jsxs)("div",{className:"why-detector "+("dark"===e?"dark-theme":""),children:[o&&(0,r.jsxs)("div",{className:"error-banner",children:[(0,r.jsxs)("span",{children:["âš ï¸ ",o]}),(0,r.jsx)("button",{className:"error-dismiss",onClick:this.dismissError,children:"Ã—"})]}),a?(0,r.jsxs)("div",{className:"loading-container",children:[(0,r.jsx)("div",{className:"loading-spinner"}),(0,r.jsx)("p",{children:"Loading models..."})]}):s?(0,r.jsx)("div",{className:"loading-container",children:(0,r.jsx)("p",{children:"âš ï¸ No AI models available. Please configure a model provider in Settings."})}):(0,r.jsxs)("div",{className:"why-session",children:[this.renderHeader(),this.renderPhaseTracker(),this.renderMessages(),this.renderInput()]})]})}}H.MIN_ANSWER_LENGTH=15;const M=H,z=H},283:(e,t,n)=>{n.d(t,{B:()=>i});var r=n(433),o=n(574);const i={partial:!0,tokenize:function(e,t,n){return function(t){return(0,o.On)(t)?(0,r.N)(e,i,"linePrefix")(t):i(t)};function i(e){return null===e||(0,o.HP)(e)?t(e):n(e)}}}},287:(e,t)=>{var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),p=Symbol.iterator,f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}function v(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var x=b.prototype=new v;x.constructor=b,m(x,y.prototype),x.isPureReactComponent=!0;var k=Array.isArray,w=Object.prototype.hasOwnProperty,S={current:null},I={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,r){var o,i={},a=null,s=null;if(null!=t)for(o in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(a=""+t.key),t)w.call(t,o)&&!I.hasOwnProperty(o)&&(i[o]=t[o]);var l=arguments.length-2;if(1===l)i.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];i.children=c}if(e&&e.defaultProps)for(o in l=e.defaultProps)void 0===i[o]&&(i[o]=l[o]);return{$$typeof:n,type:e,key:a,ref:s,props:i,_owner:S.current}}function A(e){return"object"==typeof e&&null!==e&&e.$$typeof===n}var O=/\/+/g;function P(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function T(e,t,o,i,a){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var l=!1;if(null===e)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return a=a(l=e),e=""===i?"."+P(l,0):i,k(a)?(o="",null!=e&&(o=e.replace(O,"$&/")+"/"),T(a,t,o,"",function(e){return e})):null!=a&&(A(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,o+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(O,"$&/")+"/")+e)),t.push(a)),1;if(l=0,i=""===i?".":i+":",k(e))for(var c=0;c<e.length;c++){var u=i+P(s=e[c],c);l+=T(s,t,o,u,a)}else if(u=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"==typeof u)for(e=u.call(e),c=0;!(s=e.next()).done;)l+=T(s=s.value,t,o,u=i+P(s,c++),a);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function C(e,t,n){if(null==e)return e;var r=[],o=0;return T(e,r,"","",function(e){return t.call(n,e,o++)}),r}function N(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var D={current:null},_={transition:null},L={ReactCurrentDispatcher:D,ReactCurrentBatchConfig:_,ReactCurrentOwner:S};function R(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:C,forEach:function(e,t,n){C(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return C(e,function(){t++}),t},toArray:function(e){return C(e,function(e){return e})||[]},only:function(e){if(!A(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=o,t.Profiler=a,t.PureComponent=b,t.StrictMode=i,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=L,t.act=R,t.cloneElement=function(e,t,r){if(null==e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var o=m({},e.props),i=e.key,a=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,s=S.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)w.call(t,c)&&!I.hasOwnProperty(c)&&(o[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)o.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];o.children=l}return{$$typeof:n,type:e.type,key:i,ref:a,props:o,_owner:s}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=A,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:N}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=_.transition;_.transition={};try{e()}finally{_.transition=t}},t.unstable_act=R,t.useCallback=function(e,t){return D.current.useCallback(e,t)},t.useContext=function(e){return D.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return D.current.useDeferredValue(e)},t.useEffect=function(e,t){return D.current.useEffect(e,t)},t.useId=function(){return D.current.useId()},t.useImperativeHandle=function(e,t,n){return D.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return D.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return D.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return D.current.useMemo(e,t)},t.useReducer=function(e,t,n){return D.current.useReducer(e,t,n)},t.useRef=function(e){return D.current.useRef(e)},t.useState=function(e){return D.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return D.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return D.current.useTransition()},t.version="18.3.1"},314:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var n="",r=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),r&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),r&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n}).join("")},t.i=function(e,n,r,o,i){"string"==typeof e&&(e=[[null,e,void 0]]);var a={};if(r)for(var s=0;s<this.length;s++){var l=this[s][0];null!=l&&(a[l]=!0)}for(var c=0;c<e.length;c++){var u=[].concat(e[c]);r&&a[u[0]]||(void 0!==i&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=i),n&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=n):u[2]=n),o&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=o):u[4]="".concat(o)),t.push(u))}},t}},389:(e,t,n)=>{n.d(t,{y:()=>i});var r=n(777);const o={}.hasOwnProperty;function i(e){const t={};let n=-1;for(;++n<e.length;)a(t,e[n]);return t}function a(e,t){let n;for(n in t){const r=(o.call(e,n)?e[n]:void 0)||(e[n]={}),i=t[n];let a;if(i)for(a in i){o.call(r,a)||(r[a]=[]);const e=i[a];s(r[a],Array.isArray(e)?e:e?[e]:[])}}}function s(e,t){let n=-1;const o=[];for(;++n<t.length;)("after"===t[n].add?e:o).push(t[n]);(0,r.m)(e,0,0,o)}},423:(e,t,n)=>{n.d(t,{A:()=>s});var r=n(601),o=n.n(r),i=n(314),a=n.n(i)()(o());a.push([e.id,"/**\n * BrainDriveWhyDetector Styles\n * Matching BrainDriveChat color scheme and design\n * With Phase Tracker and Themed Buttons\n */\n\n/* ============================================================================\n   CSS VARIABLES - Matching BrainDriveChat\n   ============================================================================ */\n.why-detector {\n  --bg-color: #ffffff;\n  --paper-bg: #ffffff;\n  --text-color: #333333;\n  --border-color: rgba(0, 0, 0, 0.2);\n  --hover-color: rgba(0, 0, 0, 0.1);\n  --input-bg: #ffffff;\n  --button-primary-bg: #2196f3;\n  --button-primary-text: #ffffff;\n  --button-secondary-bg: #e0e0e0;\n  --button-secondary-text: #333333;\n  --status-error-color: #f44336;\n  --status-success-color: #4caf50;\n  --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);\n  --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1);\n  --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1);\n  /* Theme accent for Ikigai/Decision Helper cards */\n  --accent-gradient: linear-gradient(135deg, #2196f3, #1976d2);\n  --accent-color: #2196f3;\n  --accent-color-light: rgba(33, 150, 243, 0.1);\n  --accent-border: rgba(33, 150, 243, 0.3);\n}\n\n.why-detector.dark-theme {\n  --bg-color: #121a28;\n  --paper-bg: #1a2332;\n  --text-color: #e0e0e0;\n  --border-color: rgba(255, 255, 255, 0.1);\n  --hover-color: rgba(255, 255, 255, 0.1);\n  --input-bg: #1e293b;\n  --button-secondary-bg: #2c3a4f;\n  --button-secondary-text: #ffffff;\n  --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.3);\n  --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.4);\n  --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.5);\n  --accent-color-light: rgba(33, 150, 243, 0.15);\n  --accent-border: rgba(33, 150, 243, 0.4);\n}\n\n/* ============================================================================\n   BASE CONTAINER\n   ============================================================================ */\n.why-detector {\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\n  color: var(--text-color);\n  background-color: var(--bg-color);\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  width: 100%;\n  overflow: hidden;\n  position: relative;\n}\n\n/* ============================================================================\n   WELCOME SCREEN - Simplified\n   ============================================================================ */\n.why-welcome {\n  flex: 1;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 1.5rem;\n  overflow-y: auto;\n  background-color: var(--paper-bg);\n}\n\n.welcome-content {\n  max-width: 480px;\n  text-align: center;\n}\n\n.welcome-icon {\n  font-size: 48px;\n  margin-bottom: 12px;\n}\n\n.welcome-content h1 {\n  font-size: 24px;\n  font-weight: 600;\n  margin: 0 0 8px;\n  color: var(--text-color);\n}\n\n.welcome-subtitle {\n  font-size: 14px;\n  color: var(--text-color);\n  opacity: 0.7;\n  margin: 0 0 20px;\n}\n\n.welcome-description {\n  text-align: left;\n  background: var(--input-bg);\n  border: 1px solid var(--border-color);\n  border-radius: 8px;\n  padding: 16px;\n  margin-bottom: 20px;\n  font-size: 14px;\n  line-height: 1.5;\n}\n\n.welcome-description p {\n  margin: 0 0 8px;\n}\n\n.welcome-description p:last-child {\n  margin-bottom: 0;\n}\n\n/* Phase preview - simplified */\n.welcome-phases {\n  text-align: left;\n  margin-bottom: 20px;\n}\n\n.welcome-phases h3 {\n  font-size: 14px;\n  font-weight: 600;\n  margin: 0 0 10px;\n  color: var(--text-color);\n}\n\n.phase-list {\n  display: flex;\n  flex-direction: column;\n  gap: 6px;\n}\n\n.phase-preview {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  padding: 8px 12px;\n  background: var(--input-bg);\n  border: 1px solid var(--border-color);\n  border-radius: 6px;\n}\n\n.phase-number {\n  width: 20px;\n  height: 20px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: var(--button-primary-bg);\n  color: white;\n  border-radius: 50%;\n  font-size: 11px;\n  font-weight: 600;\n  flex-shrink: 0;\n}\n\n.phase-info {\n  display: flex;\n  flex-direction: column;\n}\n\n.phase-info strong {\n  font-size: 13px;\n  font-weight: 500;\n  color: var(--text-color);\n}\n\n.phase-info span {\n  font-size: 11px;\n  color: var(--text-color);\n  opacity: 0.6;\n}\n\n/* Disclaimer */\n.welcome-disclaimer {\n  display: flex;\n  align-items: flex-start;\n  gap: 10px;\n  text-align: left;\n  padding: 12px;\n  border-radius: 6px;\n  margin-bottom: 20px;\n  font-size: 12px;\n  background: rgba(33, 150, 243, 0.08);\n  border: 1px solid rgba(33, 150, 243, 0.2);\n  color: var(--text-color);\n}\n\n.welcome-warning,\n.welcome-error {\n  display: flex;\n  align-items: flex-start;\n  gap: 10px;\n  text-align: left;\n  padding: 12px;\n  border-radius: 6px;\n  margin-bottom: 20px;\n  font-size: 12px;\n}\n\n.welcome-warning {\n  background: rgba(255, 152, 0, 0.1);\n  border: 1px solid rgba(255, 152, 0, 0.3);\n}\n\n.welcome-error {\n  background: rgba(244, 67, 54, 0.1);\n  border: 1px solid var(--status-error-color);\n  color: var(--status-error-color);\n}\n\n.disclaimer-icon {\n  font-size: 16px;\n  flex-shrink: 0;\n}\n\n/* Welcome actions */\n.welcome-actions {\n  display: flex;\n  gap: 10px;\n  justify-content: center;\n  flex-wrap: wrap;\n  margin-bottom: 12px;\n}\n\n.welcome-time {\n  font-size: 12px;\n  color: var(--text-color);\n  opacity: 0.6;\n}\n\n/* ============================================================================\n   BUTTONS - Matching BrainDriveChat\n   ============================================================================ */\n.btn-primary {\n  background: var(--button-primary-bg);\n  color: var(--button-primary-text);\n  border: none;\n  padding: 10px 24px;\n  font-size: 14px;\n  font-weight: 500;\n  border-radius: 6px;\n  cursor: pointer;\n  transition: all 0.15s ease;\n}\n\n.btn-primary:hover:not(:disabled) {\n  opacity: 0.9;\n}\n\n.btn-primary:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n\n.btn-secondary {\n  background: var(--button-secondary-bg);\n  color: var(--button-secondary-text);\n  border: 1px solid var(--border-color);\n  padding: 10px 20px;\n  font-size: 14px;\n  font-weight: 500;\n  border-radius: 6px;\n  cursor: pointer;\n  transition: all 0.15s ease;\n}\n\n.btn-secondary:hover {\n  background: var(--hover-color);\n}\n\n/* ============================================================================\n   SESSION LAYOUT\n   ============================================================================ */\n.why-session {\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  overflow: hidden;\n  background-color: var(--paper-bg);\n  border-radius: 8px;\n  box-shadow: var(--shadow-lg);\n}\n\n/* ============================================================================\n   HEADER - Matching BrainDriveChat\n   ============================================================================ */\n.why-header {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 0.75rem 1rem;\n  background: var(--paper-bg);\n  border-bottom: 1px solid var(--border-color);\n  flex-shrink: 0;\n  gap: 12px;\n}\n\n.header-left {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n}\n\n.header-title {\n  font-size: 14px;\n  font-weight: 600;\n  color: var(--text-color);\n}\n\n.header-center {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  flex: 1;\n  justify-content: center;\n}\n\n.header-right {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n\n.model-select,\n.profile-select {\n  padding: 6px 10px;\n  font-size: 12px;\n  background: var(--input-bg);\n  color: var(--text-color);\n  border: 1px solid var(--border-color);\n  border-radius: 6px;\n  cursor: pointer;\n  max-width: 180px;\n}\n\n.model-select:focus,\n.profile-select:focus {\n  outline: none;\n  border-color: var(--button-primary-bg);\n}\n\n.btn-back {\n  padding: 4px 10px;\n  font-size: 12px;\n  background: transparent;\n  color: var(--text-color);\n  border: 1px solid var(--border-color);\n  border-radius: 6px;\n  cursor: pointer;\n  transition: all 0.15s;\n}\n\n.btn-back:hover {\n  background: var(--hover-color);\n}\n\n/* Ikigai Builder Button */\n.btn-ikigai-builder {\n  padding: 6px 12px;\n  font-size: 12px;\n  font-weight: 500;\n  background: var(--accent-gradient);\n  color: white;\n  border: none;\n  border-radius: 6px;\n  cursor: pointer;\n  transition: all 0.15s;\n}\n\n.btn-ikigai-builder:hover:not(:disabled) {\n  transform: translateY(-1px);\n  box-shadow: 0 4px 12px rgba(33, 150, 243, 0.3);\n}\n\n.btn-ikigai-builder:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n\n/* Decision Helper Button - Now using theme color */\n.btn-decision-helper {\n  padding: 6px 12px;\n  font-size: 12px;\n  font-weight: 500;\n  background: var(--accent-gradient);\n  color: white;\n  border: none;\n  border-radius: 6px;\n  cursor: pointer;\n  transition: all 0.15s;\n}\n\n.btn-decision-helper:hover:not(:disabled) {\n  transform: translateY(-1px);\n  box-shadow: 0 4px 12px rgba(33, 150, 243, 0.3);\n}\n\n.btn-decision-helper:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n\n/* Skip Button */\n.btn-skip {\n  padding: 8px 16px;\n  font-size: 13px;\n  background: transparent;\n  color: var(--text-color);\n  border: 1px solid var(--border-color);\n  border-radius: 6px;\n  cursor: pointer;\n  transition: all 0.15s;\n  opacity: 0.7;\n}\n\n.btn-skip:hover {\n  background: var(--hover-color);\n  opacity: 1;\n}\n\n.btn-get-why {\n  padding: 6px 12px;\n  font-size: 12px;\n  font-weight: 500;\n  background: linear-gradient(135deg, #10b981, #059669);\n  color: white;\n  border: none;\n  border-radius: 6px;\n  cursor: pointer;\n  transition: all 0.15s ease;\n}\n\n.btn-get-why:hover:not(:disabled) {\n  transform: translateY(-1px);\n  box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);\n}\n\n.btn-get-why:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n\n/* ============================================================================\n   PHASE TRACKER - NEW\n   ============================================================================ */\n.phase-tracker {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  padding: 8px 1rem;\n  background: var(--input-bg);\n  border-bottom: 1px solid var(--border-color);\n  flex-shrink: 0;\n}\n\n.tracker-label {\n  font-size: 11px;\n  font-weight: 500;\n  color: var(--text-color);\n  opacity: 0.7;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n}\n\n.phase-dots {\n  display: flex;\n  gap: 4px;\n  align-items: center;\n}\n\n/* Why Finder tracker - 12 dots */\n.why-finder-tracker .phase-dot {\n  width: 8px;\n  height: 8px;\n  border-radius: 50%;\n  background: var(--border-color);\n  transition: all 0.2s ease;\n}\n\n.why-finder-tracker .phase-dot.complete {\n  background: var(--accent-color);\n}\n\n.why-finder-tracker .phase-dot.current {\n  background: var(--accent-color);\n  box-shadow: 0 0 0 3px var(--accent-color-light);\n  transform: scale(1.2);\n}\n\n.tracker-count {\n  font-size: 11px;\n  font-weight: 500;\n  color: var(--text-color);\n  opacity: 0.6;\n  margin-left: 4px;\n}\n\n/* Ikigai tracker - 4 dots (larger) */\n.ikigai-tracker .phase-dot {\n  width: 12px;\n  height: 12px;\n  border-radius: 50%;\n  background: var(--border-color);\n  transition: all 0.2s ease;\n}\n\n.ikigai-tracker .phase-dot.complete {\n  background: var(--status-success-color);\n}\n\n.ikigai-tracker .phase-dot.current {\n  background: var(--accent-color);\n  box-shadow: 0 0 0 3px var(--accent-color-light);\n  transform: scale(1.15);\n}\n\n.ikigai-tracker .phase-dot.auto-filled {\n  background: var(--status-success-color);\n  position: relative;\n}\n\n.ikigai-tracker .phase-dot.auto-filled::after {\n  content: 'âœ“';\n  position: absolute;\n  font-size: 8px;\n  color: white;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n}\n\n.tracker-phase-name {\n  font-size: 12px;\n  font-weight: 500;\n  color: var(--text-color);\n  margin-left: 6px;\n}\n\n/* Old phase indicator - keep for compatibility */\n.phase-indicator {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  position: relative;\n}\n\n.phase-dot.completed {\n  background: #9ca3af;\n}\n\n.phase-dot.active {\n  background: var(--button-primary-bg);\n  box-shadow: 0 0 0 2px rgba(33, 150, 243, 0.3);\n  transform: scale(1.2);\n}\n\n.phase-label {\n  font-size: 12px;\n  font-weight: 500;\n  color: var(--text-color);\n  opacity: 0.8;\n}\n\n.phase-info-btn {\n  width: 16px;\n  height: 16px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: var(--input-bg);\n  border: 1px solid var(--border-color);\n  border-radius: 50%;\n  font-size: 10px;\n  color: var(--text-color);\n  opacity: 0.6;\n  cursor: pointer;\n}\n\n.phase-details-popup {\n  position: absolute;\n  top: 100%;\n  left: 0;\n  margin-top: 6px;\n  padding: 10px;\n  background: var(--paper-bg);\n  border: 1px solid var(--border-color);\n  border-radius: 6px;\n  box-shadow: var(--shadow-md);\n  z-index: 100;\n  min-width: 180px;\n}\n\n.phase-details-popup h4 {\n  margin: 0 0 4px;\n  font-size: 13px;\n  color: var(--text-color);\n}\n\n.phase-details-popup p {\n  margin: 0;\n  font-size: 12px;\n  color: var(--text-color);\n  opacity: 0.7;\n}\n\n/* ============================================================================\n   CHAT AREA - Matching BrainDriveChat\n   ============================================================================ */\n.why-chat {\n  flex: 1;\n  overflow-y: auto;\n  overflow-x: hidden;\n  padding: 1rem 1rem 4rem;\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n  scrollbar-width: thin;\n  scrollbar-color: var(--border-color) transparent;\n  min-height: 0;\n  height: 0;\n}\n\n.why-chat::-webkit-scrollbar {\n  width: 6px;\n}\n\n.why-chat::-webkit-scrollbar-track {\n  background: transparent;\n}\n\n.why-chat::-webkit-scrollbar-thumb {\n  background-color: var(--border-color);\n  border-radius: 3px;\n}\n\n/* Messages - Matching BrainDriveChat */\n.chat-message {\n  display: flex;\n  width: 100%;\n}\n\n.chat-message.user {\n  justify-content: flex-end;\n}\n\n.chat-message.coach {\n  justify-content: flex-start;\n}\n\n.message-header {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  margin-bottom: 4px;\n}\n\n.message-sender {\n  font-size: 12px;\n  font-weight: 600;\n  color: var(--text-color);\n  opacity: 0.8;\n}\n\n.message-time {\n  font-size: 11px;\n  color: var(--text-color);\n  opacity: 0.5;\n}\n\n.message-bubble {\n  max-width: min(720px, 88%);\n  width: fit-content;\n  padding: 1rem 1.25rem;\n  border-radius: 1rem;\n  border: 1px solid var(--border-color);\n  background-color: var(--input-bg);\n  box-shadow: 0 12px 32px rgba(15, 23, 42, 0.06);\n  transition: transform 0.2s ease, box-shadow 0.2s ease;\n}\n\n.chat-message.coach .message-bubble:hover {\n  transform: translateY(-1px);\n  box-shadow: 0 16px 40px rgba(15, 23, 42, 0.1);\n}\n\n.chat-message.user .message-bubble {\n  background-color: rgba(0, 0, 0, 0.05);\n  border-color: rgba(0, 0, 0, 0.12);\n  box-shadow: none;\n}\n\n.dark-theme .chat-message.user .message-bubble {\n  background-color: rgba(33, 150, 243, 0.2);\n  border-color: rgba(33, 150, 243, 0.35);\n}\n\n.dark-theme .chat-message.coach .message-bubble {\n  background-color: rgba(255, 255, 255, 0.04);\n  border-color: rgba(255, 255, 255, 0.08);\n  box-shadow: 0 12px 34px rgba(8, 47, 73, 0.55);\n}\n\n.message-bubble.streaming {\n  border-color: rgba(33, 150, 243, 0.4);\n  box-shadow: 0 10px 28px rgba(33, 150, 243, 0.15);\n}\n\n/* Markdown content */\n.message-bubble p {\n  margin: 0 0 8px;\n  line-height: 1.6;\n}\n\n.message-bubble p:last-child {\n  margin-bottom: 0;\n}\n\n.message-bubble strong {\n  font-weight: 600;\n}\n\n.message-bubble ul,\n.message-bubble ol {\n  margin: 8px 0;\n  padding-left: 1.5rem;\n}\n\n.message-bubble li {\n  margin: 4px 0;\n  line-height: 1.5;\n}\n\n.message-bubble code {\n  background: var(--hover-color);\n  padding: 2px 6px;\n  border-radius: 4px;\n  font-family: 'SF Mono', Consolas, monospace;\n  font-size: 13px;\n}\n\n.typing-cursor {\n  display: inline-block;\n  animation: blink 1s infinite;\n  color: var(--button-primary-bg);\n  margin-left: 2px;\n}\n\n@keyframes blink {\n  0%, 50% { opacity: 1; }\n  51%, 100% { opacity: 0; }\n}\n\n/* ============================================================================\n   INPUT AREA - Matching BrainDriveChat\n   ============================================================================ */\n.why-input {\n  display: flex;\n  align-items: flex-end;\n  gap: 8px;\n  padding: 1rem;\n  background: var(--paper-bg);\n  flex-shrink: 0;\n}\n\n.input-wrapper {\n  flex: 1;\n  border: 1px solid var(--border-color);\n  border-radius: 8px;\n  background: var(--input-bg);\n  transition: border-color 0.2s;\n}\n\n.input-wrapper:focus-within {\n  border-color: var(--button-primary-bg);\n}\n\n.input-textarea {\n  width: 100%;\n  padding: 10px 12px;\n  font-size: 14px;\n  font-family: inherit;\n  line-height: 1.5;\n  background: transparent;\n  color: var(--text-color);\n  border: none;\n  resize: none;\n  overflow-y: auto;\n  max-height: 120px;\n}\n\n.input-textarea:focus {\n  outline: none;\n}\n\n.input-textarea::placeholder {\n  color: var(--text-color);\n  opacity: 0.5;\n}\n\n.btn-send,\n.btn-stop {\n  width: 40px;\n  height: 40px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border: none;\n  border-radius: 8px;\n  font-size: 16px;\n  cursor: pointer;\n  transition: all 0.15s;\n  flex-shrink: 0;\n}\n\n.btn-send {\n  background: var(--button-primary-bg);\n  color: white;\n}\n\n.btn-send:hover:not(:disabled) {\n  opacity: 0.9;\n}\n\n.btn-send:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n\n.btn-stop {\n  background: var(--status-error-color);\n  color: white;\n  font-size: 12px;\n}\n\n.btn-stop:hover {\n  opacity: 0.9;\n}\n\n/* Session complete */\n.session-complete {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 12px;\n  width: 100%;\n  padding: 8px;\n}\n\n.session-complete span {\n  font-size: 14px;\n  font-weight: 500;\n  color: var(--status-success-color);\n}\n\n/* ============================================================================\n   SESSION SUMMARY\n   ============================================================================ */\n.session-summary {\n  padding: 1rem;\n  background: rgba(33, 150, 243, 0.05);\n  border-top: 1px solid rgba(33, 150, 243, 0.2);\n  max-height: 250px;\n  overflow-y: auto;\n}\n\n.session-summary h3 {\n  margin: 0 0 12px;\n  font-size: 16px;\n  color: var(--text-color);\n}\n\n.summary-section {\n  margin-bottom: 12px;\n}\n\n.summary-section:last-child {\n  margin-bottom: 0;\n}\n\n.summary-section h4 {\n  margin: 0 0 6px;\n  font-size: 12px;\n  font-weight: 600;\n  color: var(--text-color);\n  opacity: 0.7;\n  text-transform: uppercase;\n}\n\n.summary-section .why-statement {\n  font-size: 16px;\n  font-weight: 500;\n  color: var(--button-primary-bg);\n  font-style: italic;\n}\n\n.summary-section ul {\n  margin: 0;\n  padding-left: 16px;\n  font-size: 13px;\n}\n\n.summary-section li {\n  margin: 3px 0;\n  color: var(--text-color);\n}\n\n/* ============================================================================\n   ERROR BANNER\n   ============================================================================ */\n.error-banner {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 10px 12px;\n  background: rgba(244, 67, 54, 0.1);\n  border-bottom: 1px solid var(--status-error-color);\n  color: var(--status-error-color);\n  font-size: 13px;\n}\n\n.error-dismiss {\n  background: none;\n  border: none;\n  color: var(--status-error-color);\n  font-size: 18px;\n  cursor: pointer;\n  padding: 0 6px;\n  line-height: 1;\n}\n\n/* ============================================================================\n   LOADING STATE\n   ============================================================================ */\n.loading-container {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  gap: 12px;\n  background: var(--paper-bg);\n}\n\n.loading-spinner {\n  width: 32px;\n  height: 32px;\n  border: 3px solid var(--border-color);\n  border-top-color: var(--button-primary-bg);\n  border-radius: 50%;\n  animation: spin 1s linear infinite;\n}\n\n@keyframes spin {\n  to { transform: rotate(360deg); }\n}\n\n.loading-container p {\n  color: var(--text-color);\n  opacity: 0.7;\n  font-size: 13px;\n}\n\n/* ============================================================================\n   IKIGAI BUILDER UI - THEMED (No Purple!)\n   ============================================================================ */\n\n/* Build Ikigai Prompt - Now using theme color */\n.ikigai-prompt-container {\n  display: flex;\n  justify-content: center;\n  padding: 1rem;\n}\n\n.ikigai-prompt {\n  max-width: 500px;\n  padding: 1.5rem;\n  background: linear-gradient(135deg, rgba(139, 92, 246, 0.1), rgba(236, 72, 153, 0.1));\n  border: 1px solid rgba(139, 92, 246, 0.3);\n  border-radius: 12px;\n  text-align: center;\n}\n\n/* Themed version - uses primary blue */\n.ikigai-prompt.themed {\n  background: var(--accent-color-light);\n  border: 1px solid var(--accent-border);\n}\n\n.ikigai-prompt p {\n  margin: 0 0 1rem;\n  line-height: 1.6;\n  color: var(--text-color);\n}\n\n.btn-build-ikigai {\n  padding: 12px 24px;\n  font-size: 14px;\n  font-weight: 600;\n  background: linear-gradient(135deg, #8b5cf6, #ec4899);\n  color: white;\n  border: none;\n  border-radius: 8px;\n  cursor: pointer;\n  transition: all 0.2s;\n}\n\n/* Themed version - uses primary blue */\n.btn-build-ikigai.themed {\n  background: var(--accent-gradient);\n}\n\n.btn-build-ikigai:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 8px 20px rgba(139, 92, 246, 0.3);\n}\n\n.btn-build-ikigai.themed:hover {\n  box-shadow: 0 8px 20px rgba(33, 150, 243, 0.3);\n}\n\n/* Profile Save Container */\n.profile-save-container {\n  display: flex;\n  justify-content: center;\n  padding: 1rem;\n}\n\n.profile-save-card {\n  max-width: 450px;\n  width: 100%;\n  padding: 1.5rem;\n  background: linear-gradient(135deg, rgba(139, 92, 246, 0.1), rgba(236, 72, 153, 0.1));\n  border: 1px solid rgba(139, 92, 246, 0.3);\n  border-radius: 12px;\n  text-align: center;\n}\n\n/* Themed version */\n.profile-save-card.themed {\n  background: var(--accent-color-light);\n  border: 1px solid var(--accent-border);\n}\n\n.profile-save-card h4 {\n  margin: 0 0 8px;\n  font-size: 16px;\n  color: var(--text-color);\n}\n\n.profile-save-card p {\n  margin: 0 0 1rem;\n  font-size: 13px;\n  color: var(--text-color);\n  opacity: 0.8;\n}\n\n.profile-save-form {\n  display: flex;\n  gap: 10px;\n  flex-wrap: wrap;\n  justify-content: center;\n}\n\n/* Profile Name Input */\n.profile-name-container {\n  display: flex;\n  gap: 12px;\n  padding: 1rem;\n  justify-content: center;\n  align-items: center;\n}\n\n.profile-name-input {\n  padding: 10px 16px;\n  font-size: 14px;\n  background: var(--input-bg);\n  color: var(--text-color);\n  border: 1px solid var(--border-color);\n  border-radius: 8px;\n  width: 260px;\n  max-width: 100%;\n}\n\n.profile-name-input:focus {\n  outline: none;\n  border-color: var(--button-primary-bg);\n}\n\n.profile-name-input::placeholder {\n  color: var(--text-color);\n  opacity: 0.5;\n}\n\n.btn-save-profile {\n  padding: 10px 20px;\n  font-size: 14px;\n  font-weight: 500;\n  background: linear-gradient(135deg, #10b981, #059669);\n  color: white;\n  border: none;\n  border-radius: 8px;\n  cursor: pointer;\n  transition: all 0.15s;\n}\n\n/* Themed version - uses primary blue */\n.btn-save-profile.themed {\n  background: var(--accent-gradient);\n}\n\n.btn-save-profile:hover:not(:disabled) {\n  transform: translateY(-1px);\n  box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);\n}\n\n.btn-save-profile.themed:hover:not(:disabled) {\n  box-shadow: 0 4px 12px rgba(33, 150, 243, 0.3);\n}\n\n.btn-save-profile:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n\n/* Ikigai Summary Styles */\n.message-bubble h2,\n.message-bubble h3 {\n  margin-top: 1rem;\n  margin-bottom: 0.5rem;\n  color: var(--text-color);\n}\n\n.message-bubble h2:first-child,\n.message-bubble h3:first-child {\n  margin-top: 0;\n}\n\n.message-bubble hr {\n  border: none;\n  border-top: 1px solid var(--border-color);\n  margin: 1rem 0;\n}\n\n/* Mode Indicator Badge */\n.mode-badge {\n  display: inline-block;\n  padding: 2px 8px;\n  font-size: 10px;\n  font-weight: 600;\n  text-transform: uppercase;\n  border-radius: 4px;\n  margin-left: 8px;\n}\n\n.mode-badge.why-finder {\n  background: rgba(33, 150, 243, 0.2);\n  color: #2196f3;\n}\n\n.mode-badge.ikigai-builder {\n  background: var(--accent-color-light);\n  color: var(--accent-color);\n}\n\n.mode-badge.decision-helper {\n  background: var(--accent-color-light);\n  color: var(--accent-color);\n}\n\n/* ============================================================================\n   RESPONSIVE\n   ============================================================================ */\n@media (max-width: 640px) {\n  .welcome-content {\n    padding: 12px;\n  }\n\n  .welcome-content h1 {\n    font-size: 20px;\n  }\n\n  .chat-message .message-bubble {\n    max-width: 95%;\n  }\n\n  .why-header {\n    flex-wrap: wrap;\n    gap: 8px;\n  }\n\n  .header-left,\n  .header-center,\n  .header-right {\n    width: 100%;\n    justify-content: center;\n  }\n\n  .header-left {\n    justify-content: flex-start;\n  }\n\n  .profile-name-container,\n  .profile-save-form {\n    flex-direction: column;\n  }\n\n  .profile-name-input {\n    width: 100%;\n  }\n\n  .profile-select,\n  .model-select {\n    max-width: 100%;\n    width: 100%;\n  }\n\n  .phase-tracker {\n    flex-wrap: wrap;\n    gap: 6px;\n  }\n\n  .phase-dots {\n    flex-wrap: wrap;\n  }\n\n  .why-finder-tracker .phase-dot {\n    width: 6px;\n    height: 6px;\n  }\n}\n",""]);const s=a},433:(e,t,n)=>{n.d(t,{N:()=>o});var r=n(574);function o(e,t,n,o){const i=o?o-1:Number.POSITIVE_INFINITY;let a=0;return function(o){return(0,r.On)(o)?(e.enter(n),s(o)):t(o)};function s(o){return(0,r.On)(o)&&a++<i?(e.consume(o),s):(e.exit(n),t(o))}}},471:(e,t,n)=>{function r(){}function o(){}n.d(t,{HB:()=>o,ok:()=>r})},515:(e,t,n)=>{n.d(t,{oz:()=>er});var r={};n.r(r),n.d(r,{boolean:()=>y,booleanish:()=>v,commaOrSpaceSeparated:()=>S,commaSeparated:()=>w,number:()=>x,overloadedBoolean:()=>b,spaceSeparated:()=>k});var o={};n.r(o),n.d(o,{attentionMarkers:()=>Lt,contentInitial:()=>Pt,disable:()=>Rt,document:()=>Ot,flow:()=>Ct,flowInitial:()=>Tt,insideSpan:()=>_t,string:()=>Nt,text:()=>Dt});var i=n(471);const a=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,s=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,l={};function c(e,t){return((t||l).jsx?s:a).test(e)}const u=/[ \t\n\f\r]/g;function h(e){return""===e.replace(u,"")}class d{constructor(e,t,n){this.normal=t,this.property=e,n&&(this.space=n)}}function p(e,t){const n={},r={};for(const t of e)Object.assign(n,t.property),Object.assign(r,t.normal);return new d(n,r,t)}function f(e){return e.toLowerCase()}d.prototype.normal={},d.prototype.property={},d.prototype.space=void 0;class m{constructor(e,t){this.attribute=t,this.property=e}}m.prototype.attribute="",m.prototype.booleanish=!1,m.prototype.boolean=!1,m.prototype.commaOrSpaceSeparated=!1,m.prototype.commaSeparated=!1,m.prototype.defined=!1,m.prototype.mustUseProperty=!1,m.prototype.number=!1,m.prototype.overloadedBoolean=!1,m.prototype.property="",m.prototype.spaceSeparated=!1,m.prototype.space=void 0;let g=0;const y=I(),v=I(),b=I(),x=I(),k=I(),w=I(),S=I();function I(){return 2**++g}const E=Object.keys(r);class A extends m{constructor(e,t,n,o){let i=-1;if(super(e,t),O(this,"space",o),"number"==typeof n)for(;++i<E.length;){const e=E[i];O(this,E[i],(n&r[e])===r[e])}}}function O(e,t,n){n&&(e[t]=n)}function P(e){const t={},n={};for(const[r,o]of Object.entries(e.properties)){const i=new A(r,e.transform(e.attributes||{},r),o,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(i.mustUseProperty=!0),t[r]=i,n[f(r)]=r,n[f(i.attribute)]=r}return new d(t,n,e.space)}A.prototype.defined=!0;const T=P({properties:{ariaActiveDescendant:null,ariaAtomic:v,ariaAutoComplete:null,ariaBusy:v,ariaChecked:v,ariaColCount:x,ariaColIndex:x,ariaColSpan:x,ariaControls:k,ariaCurrent:null,ariaDescribedBy:k,ariaDetails:null,ariaDisabled:v,ariaDropEffect:k,ariaErrorMessage:null,ariaExpanded:v,ariaFlowTo:k,ariaGrabbed:v,ariaHasPopup:null,ariaHidden:v,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:k,ariaLevel:x,ariaLive:null,ariaModal:v,ariaMultiLine:v,ariaMultiSelectable:v,ariaOrientation:null,ariaOwns:k,ariaPlaceholder:null,ariaPosInSet:x,ariaPressed:v,ariaReadOnly:v,ariaRelevant:null,ariaRequired:v,ariaRoleDescription:k,ariaRowCount:x,ariaRowIndex:x,ariaRowSpan:x,ariaSelected:v,ariaSetSize:x,ariaSort:null,ariaValueMax:x,ariaValueMin:x,ariaValueNow:x,ariaValueText:null,role:null},transform:(e,t)=>"role"===t?t:"aria-"+t.slice(4).toLowerCase()});function C(e,t){return t in e?e[t]:t}function N(e,t){return C(e,t.toLowerCase())}const D=P({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:w,acceptCharset:k,accessKey:k,action:null,allow:null,allowFullScreen:y,allowPaymentRequest:y,allowUserMedia:y,alt:null,as:null,async:y,autoCapitalize:null,autoComplete:k,autoFocus:y,autoPlay:y,blocking:k,capture:null,charSet:null,checked:y,cite:null,className:k,cols:x,colSpan:null,content:null,contentEditable:v,controls:y,controlsList:k,coords:x|w,crossOrigin:null,data:null,dateTime:null,decoding:null,default:y,defer:y,dir:null,dirName:null,disabled:y,download:b,draggable:v,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:y,formTarget:null,headers:k,height:x,hidden:b,high:x,href:null,hrefLang:null,htmlFor:k,httpEquiv:k,id:null,imageSizes:null,imageSrcSet:null,inert:y,inputMode:null,integrity:null,is:null,isMap:y,itemId:null,itemProp:k,itemRef:k,itemScope:y,itemType:k,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:y,low:x,manifest:null,max:null,maxLength:x,media:null,method:null,min:null,minLength:x,multiple:y,muted:y,name:null,nonce:null,noModule:y,noValidate:y,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:y,optimum:x,pattern:null,ping:k,placeholder:null,playsInline:y,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:y,referrerPolicy:null,rel:k,required:y,reversed:y,rows:x,rowSpan:x,sandbox:k,scope:null,scoped:y,seamless:y,selected:y,shadowRootClonable:y,shadowRootDelegatesFocus:y,shadowRootMode:null,shape:null,size:x,sizes:null,slot:null,span:x,spellCheck:v,src:null,srcDoc:null,srcLang:null,srcSet:null,start:x,step:null,style:null,tabIndex:x,target:null,title:null,translate:null,type:null,typeMustMatch:y,useMap:null,value:v,width:x,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:k,axis:null,background:null,bgColor:null,border:x,borderColor:null,bottomMargin:x,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:y,declare:y,event:null,face:null,frame:null,frameBorder:null,hSpace:x,leftMargin:x,link:null,longDesc:null,lowSrc:null,marginHeight:x,marginWidth:x,noResize:y,noHref:y,noShade:y,noWrap:y,object:null,profile:null,prompt:null,rev:null,rightMargin:x,rules:null,scheme:null,scrolling:v,standby:null,summary:null,text:null,topMargin:x,valueType:null,version:null,vAlign:null,vLink:null,vSpace:x,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:y,disableRemotePlayback:y,prefix:null,property:null,results:x,security:null,unselectable:null},space:"html",transform:N}),_=P({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:S,accentHeight:x,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:x,amplitude:x,arabicForm:null,ascent:x,attributeName:null,attributeType:null,azimuth:x,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:x,by:null,calcMode:null,capHeight:x,className:k,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:x,diffuseConstant:x,direction:null,display:null,dur:null,divisor:x,dominantBaseline:null,download:y,dx:null,dy:null,edgeMode:null,editable:null,elevation:x,enableBackground:null,end:null,event:null,exponent:x,externalResourcesRequired:null,fill:null,fillOpacity:x,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:w,g2:w,glyphName:w,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:x,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:x,horizOriginX:x,horizOriginY:x,id:null,ideographic:x,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:x,k:x,k1:x,k2:x,k3:x,k4:x,kernelMatrix:S,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:x,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:x,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:x,overlineThickness:x,paintOrder:null,panose1:null,path:null,pathLength:x,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:k,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:x,pointsAtY:x,pointsAtZ:x,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:S,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:S,rev:S,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:S,requiredFeatures:S,requiredFonts:S,requiredFormats:S,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:x,specularExponent:x,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:x,strikethroughThickness:x,string:null,stroke:null,strokeDashArray:S,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:x,strokeOpacity:x,strokeWidth:null,style:null,surfaceScale:x,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:S,tabIndex:x,tableValues:null,target:null,targetX:x,targetY:x,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:S,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:x,underlineThickness:x,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:x,values:null,vAlphabetic:x,vMathematical:x,vectorEffect:null,vHanging:x,vIdeographic:x,version:null,vertAdvY:x,vertOriginX:x,vertOriginY:x,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:x,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:C}),L=P({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform:(e,t)=>"xlink:"+t.slice(5).toLowerCase()}),R=P({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:N}),W=P({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform:(e,t)=>"xml:"+t.slice(3).toLowerCase()}),F=p([T,D,L,R,W],"html"),H=p([T,_,L,R,W],"svg"),M=/[A-Z]/g,z=/-[a-z]/g,j=/^data[-\w.:]+$/i;function B(e){return"-"+e.toLowerCase()}function Y(e){return e.charAt(1).toUpperCase()}const U={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"};var $=n(229);const V=G("end"),q=G("start");function G(e){return function(t){const n=t&&t.position&&t.position[e]||{};if("number"==typeof n.line&&n.line>0&&"number"==typeof n.column&&n.column>0)return{line:n.line,column:n.column,offset:"number"==typeof n.offset&&n.offset>-1?n.offset:void 0}}}function K(e){return e&&"object"==typeof e?"position"in e||"type"in e?Q(e.position):"start"in e||"end"in e?Q(e):"line"in e||"column"in e?J(e):"":""}function J(e){return X(e&&e.line)+":"+X(e&&e.column)}function Q(e){return J(e&&e.start)+"-"+J(e&&e.end)}function X(e){return e&&"number"==typeof e?e:1}class Z extends Error{constructor(e,t,n){super(),"string"==typeof t&&(n=t,t=void 0);let r="",o={},i=!1;if(t&&(o="line"in t&&"column"in t||"start"in t&&"end"in t?{place:t}:"type"in t?{ancestors:[t],place:t.position}:{...t}),"string"==typeof e?r=e:!o.cause&&e&&(i=!0,r=e.message,o.cause=e),!o.ruleId&&!o.source&&"string"==typeof n){const e=n.indexOf(":");-1===e?o.ruleId=n:(o.source=n.slice(0,e),o.ruleId=n.slice(e+1))}if(!o.place&&o.ancestors&&o.ancestors){const e=o.ancestors[o.ancestors.length-1];e&&(o.place=e.position)}const a=o.place&&"start"in o.place?o.place.start:o.place;this.ancestors=o.ancestors||void 0,this.cause=o.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file="",this.message=r,this.line=a?a.line:void 0,this.name=K(o.place)||"1:1",this.place=o.place||void 0,this.reason=this.message,this.ruleId=o.ruleId||void 0,this.source=o.source||void 0,this.stack=i&&o.cause&&"string"==typeof o.cause.stack?o.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}Z.prototype.file="",Z.prototype.name="",Z.prototype.reason="",Z.prototype.message="",Z.prototype.stack="",Z.prototype.column=void 0,Z.prototype.line=void 0,Z.prototype.ancestors=void 0,Z.prototype.cause=void 0,Z.prototype.fatal=void 0,Z.prototype.place=void 0,Z.prototype.ruleId=void 0,Z.prototype.source=void 0;const ee={}.hasOwnProperty,te=new Map,ne=/[A-Z]/g,re=new Set(["table","tbody","thead","tfoot","tr"]),oe=new Set(["td","th"]),ie="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function ae(e,t,n){return"element"===t.type?function(e,t,n){const r=e.schema;let o=r;"svg"===t.tagName.toLowerCase()&&"html"===r.space&&(o=H,e.schema=o),e.ancestors.push(t);const i=he(e,t.tagName,!1),a=function(e,t){const n={};let r,o;for(o in t.properties)if("children"!==o&&ee.call(t.properties,o)){const i=ue(e,o,t.properties[o]);if(i){const[o,a]=i;e.tableCellAlignToStyle&&"align"===o&&"string"==typeof a&&oe.has(t.tagName)?r=a:n[o]=a}}return r&&((n.style||(n.style={}))["css"===e.stylePropertyNameCase?"text-align":"textAlign"]=r),n}(e,t);let s=ce(e,t);return re.has(t.tagName)&&(s=s.filter(function(e){return"string"!=typeof e||!("object"==typeof(t=e)?"text"===t.type&&h(t.value):h(t));var t})),se(e,a,i,t),le(a,s),e.ancestors.pop(),e.schema=r,e.create(t,i,a,n)}(e,t,n):"mdxFlowExpression"===t.type||"mdxTextExpression"===t.type?function(e,t){if(t.data&&t.data.estree&&e.evaluater){const n=t.data.estree.body[0];return(0,i.ok)("ExpressionStatement"===n.type),e.evaluater.evaluateExpression(n.expression)}de(e,t.position)}(e,t):"mdxJsxFlowElement"===t.type||"mdxJsxTextElement"===t.type?function(e,t,n){const r=e.schema;let o=r;"svg"===t.name&&"html"===r.space&&(o=H,e.schema=o),e.ancestors.push(t);const a=null===t.name?e.Fragment:he(e,t.name,!0),s=function(e,t){const n={};for(const r of t.attributes)if("mdxJsxExpressionAttribute"===r.type)if(r.data&&r.data.estree&&e.evaluater){const t=r.data.estree.body[0];(0,i.ok)("ExpressionStatement"===t.type);const o=t.expression;(0,i.ok)("ObjectExpression"===o.type);const a=o.properties[0];(0,i.ok)("SpreadElement"===a.type),Object.assign(n,e.evaluater.evaluateExpression(a.argument))}else de(e,t.position);else{const o=r.name;let a;if(r.value&&"object"==typeof r.value)if(r.value.data&&r.value.data.estree&&e.evaluater){const t=r.value.data.estree.body[0];(0,i.ok)("ExpressionStatement"===t.type),a=e.evaluater.evaluateExpression(t.expression)}else de(e,t.position);else a=null===r.value||r.value;n[o]=a}return n}(e,t),l=ce(e,t);return se(e,s,a,t),le(s,l),e.ancestors.pop(),e.schema=r,e.create(t,a,s,n)}(e,t,n):"mdxjsEsm"===t.type?function(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);de(e,t.position)}(e,t):"root"===t.type?function(e,t,n){const r={};return le(r,ce(e,t)),e.create(t,e.Fragment,r,n)}(e,t,n):"text"===t.type?function(e,t){return t.value}(0,t):void 0}function se(e,t,n,r){"string"!=typeof n&&n!==e.Fragment&&e.passNode&&(t.node=r)}function le(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function ce(e,t){const n=[];let r=-1;const o=e.passKeys?new Map:te;for(;++r<t.children.length;){const i=t.children[r];let a;if(e.passKeys){const e="element"===i.type?i.tagName:"mdxJsxFlowElement"===i.type||"mdxJsxTextElement"===i.type?i.name:void 0;if(e){const t=o.get(e)||0;a=e+"-"+t,o.set(e,t+1)}}const s=ae(e,i,a);void 0!==s&&n.push(s)}return n}function ue(e,t,n){const r=function(e,t){const n=f(t);let r=t,o=m;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&"data"===n.slice(0,4)&&j.test(t)){if("-"===t.charAt(4)){const e=t.slice(5).replace(z,Y);r="data"+e.charAt(0).toUpperCase()+e.slice(1)}else{const e=t.slice(4);if(!z.test(e)){let n=e.replace(M,B);"-"!==n.charAt(0)&&(n="-"+n),t="data"+n}}o=A}return new o(r,t)}(e.schema,t);if(!(null==n||"number"==typeof n&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?function(e){const t={};return(""===e[e.length-1]?[...e,""]:e).join((t.padRight?" ":"")+","+(!1===t.padLeft?"":" ")).trim()}(n):n.join(" ").trim()),"style"===r.property){let t="object"==typeof n?n:function(e,t){try{return $(t,{reactCompat:!0})}catch(t){if(e.ignoreInvalidStyle)return{};const n=t,r=new Z("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:n,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw r.file=e.filePath||void 0,r.url=ie+"#cannot-parse-style-attribute",r}}(e,String(n));return"css"===e.stylePropertyNameCase&&(t=function(e){const t={};let n;for(n in e)ee.call(e,n)&&(t[pe(n)]=e[n]);return t}(t)),["style",t]}return["react"===e.elementAttributeNameCase&&r.space?U[r.property]||r.property:r.attribute,n]}}function he(e,t,n){let r;if(n)if(t.includes(".")){const e=t.split(".");let n,o=-1;for(;++o<e.length;){const t=c(e[o])?{type:"Identifier",name:e[o]}:{type:"Literal",value:e[o]};n=n?{type:"MemberExpression",object:n,property:t,computed:Boolean(o&&"Literal"===t.type),optional:!1}:t}(0,i.ok)(n,"always a result"),r=n}else r=c(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};else r={type:"Literal",value:t};if("Literal"===r.type){const t=r.value;return ee.call(e.components,t)?e.components[t]:t}if(e.evaluater)return e.evaluater.evaluateExpression(r);de(e)}function de(e,t){const n=new Z("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=ie+"#cannot-handle-mdx-estrees-without-createevaluater",n}function pe(e){let t=e.replace(ne,fe);return"ms-"===t.slice(0,3)&&(t="-"+t),t}function fe(e){return"-"+e.toLowerCase()}const me={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]};var ge=n(848),ye=(n(769),n(534)),ve=n(777);class be{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,t){const n=null==t?Number.POSITIVE_INFINITY:t;return n<this.left.length?this.left.slice(e,n):e>this.left.length?this.right.slice(this.right.length-n+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-n+this.left.length).reverse())}splice(e,t,n){const r=t||0;this.setCursor(Math.trunc(e));const o=this.right.splice(this.right.length-r,Number.POSITIVE_INFINITY);return n&&xe(this.left,n),o.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),xe(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),xe(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&0===this.right.length||e<0&&0===this.left.length))if(e<this.left.length){const t=this.left.splice(e,Number.POSITIVE_INFINITY);xe(this.right,t.reverse())}else{const t=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);xe(this.left,t.reverse())}}}function xe(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function ke(e){const t={};let n,r,o,i,a,s,l,c=-1;const u=new be(e);for(;++c<u.length;){for(;c in t;)c=t[c];if(n=u.get(c),c&&"chunkFlow"===n[1].type&&"listItemPrefix"===u.get(c-1)[1].type&&(s=n[1]._tokenizer.events,o=0,o<s.length&&"lineEndingBlank"===s[o][1].type&&(o+=2),o<s.length&&"content"===s[o][1].type))for(;++o<s.length&&"content"!==s[o][1].type;)"chunkText"===s[o][1].type&&(s[o][1]._isInFirstContentOfListItem=!0,o++);if("enter"===n[0])n[1].contentType&&(Object.assign(t,we(u,c)),c=t[c],l=!0);else if(n[1]._container){for(o=c,r=void 0;o--;)if(i=u.get(o),"lineEnding"===i[1].type||"lineEndingBlank"===i[1].type)"enter"===i[0]&&(r&&(u.get(r)[1].type="lineEndingBlank"),i[1].type="lineEnding",r=o);else if("linePrefix"!==i[1].type&&"listItemIndent"!==i[1].type)break;r&&(n[1].end={...u.get(r)[1].start},a=u.slice(r,c),a.unshift(n),u.splice(r,c-r+1,a))}}return(0,ve.m)(e,0,Number.POSITIVE_INFINITY,u.slice(0)),!l}function we(e,t){const n=e.get(t)[1],r=e.get(t)[2];let o=t-1;const i=[];let a=n._tokenizer;a||(a=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(a._contentTypeTextTrailing=!0));const s=a.events,l=[],c={};let u,h,d=-1,p=n,f=0,m=0;const g=[m];for(;p;){for(;e.get(++o)[1]!==p;);i.push(o),p._tokenizer||(u=r.sliceStream(p),p.next||u.push(null),h&&a.defineSkip(p.start),p._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=!0),a.write(u),p._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=void 0)),h=p,p=p.next}for(p=n;++d<s.length;)"exit"===s[d][0]&&"enter"===s[d-1][0]&&s[d][1].type===s[d-1][1].type&&s[d][1].start.line!==s[d][1].end.line&&(m=d+1,g.push(m),p._tokenizer=void 0,p.previous=void 0,p=p.next);for(a.events=[],p?(p._tokenizer=void 0,p.previous=void 0):g.pop(),d=g.length;d--;){const t=s.slice(g[d],g[d+1]),n=i.pop();l.push([n,n+t.length-1]),e.splice(n,2,t)}for(l.reverse(),d=-1;++d<l.length;)c[f+l[d][0]]=f+l[d][1],f+=l[d][1]-l[d][0]-1;return c}var Se=n(389),Ie=n(433),Ee=n(574);const Ae={tokenize:function(e){const t=e.attempt(this.parser.constructs.contentInitial,function(n){if(null!==n)return e.enter("lineEnding"),e.consume(n),e.exit("lineEnding"),(0,Ie.N)(e,t,"linePrefix");e.consume(n)},function(t){return e.enter("paragraph"),r(t)});let n;return t;function r(t){const r=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=r),n=r,o(t)}function o(t){return null===t?(e.exit("chunkText"),e.exit("paragraph"),void e.consume(t)):(0,Ee.HP)(t)?(e.consume(t),e.exit("chunkText"),r):(e.consume(t),o)}}},Oe={tokenize:function(e){const t=this,n=[];let r,o,i,a=0;return s;function s(r){if(a<n.length){const o=n[a];return t.containerState=o[1],e.attempt(o[0].continuation,l,c)(r)}return c(r)}function l(e){if(a++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,r&&v();const n=t.events.length;let o,i=n;for(;i--;)if("exit"===t.events[i][0]&&"chunkFlow"===t.events[i][1].type){o=t.events[i][1].end;break}y(a);let s=n;for(;s<t.events.length;)t.events[s][1].end={...o},s++;return(0,ve.m)(t.events,i+1,0,t.events.slice(n)),t.events.length=s,c(e)}return s(e)}function c(o){if(a===n.length){if(!r)return d(o);if(r.currentConstruct&&r.currentConstruct.concrete)return f(o);t.interrupt=Boolean(r.currentConstruct&&!r._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(Pe,u,h)(o)}function u(e){return r&&v(),y(a),d(e)}function h(e){return t.parser.lazy[t.now().line]=a!==n.length,i=t.now().offset,f(e)}function d(n){return t.containerState={},e.attempt(Pe,p,f)(n)}function p(e){return a++,n.push([t.currentConstruct,t.containerState]),d(e)}function f(n){return null===n?(r&&v(),y(0),void e.consume(n)):(r=r||t.parser.flow(t.now()),e.enter("chunkFlow",{_tokenizer:r,contentType:"flow",previous:o}),m(n))}function m(n){return null===n?(g(e.exit("chunkFlow"),!0),y(0),void e.consume(n)):(0,Ee.HP)(n)?(e.consume(n),g(e.exit("chunkFlow")),a=0,t.interrupt=void 0,s):(e.consume(n),m)}function g(e,n){const s=t.sliceStream(e);if(n&&s.push(null),e.previous=o,o&&(o.next=e),o=e,r.defineSkip(e.start),r.write(s),t.parser.lazy[e.start.line]){let e=r.events.length;for(;e--;)if(r.events[e][1].start.offset<i&&(!r.events[e][1].end||r.events[e][1].end.offset>i))return;const n=t.events.length;let o,s,l=n;for(;l--;)if("exit"===t.events[l][0]&&"chunkFlow"===t.events[l][1].type){if(o){s=t.events[l][1].end;break}o=!0}for(y(a),e=n;e<t.events.length;)t.events[e][1].end={...s},e++;(0,ve.m)(t.events,l+1,0,t.events.slice(n)),t.events.length=e}}function y(r){let o=n.length;for(;o-- >r;){const r=n[o];t.containerState=r[1],r[0].exit.call(t,e)}n.length=r}function v(){r.write([null]),o=void 0,r=void 0,t.containerState._closeFlow=void 0}}},Pe={tokenize:function(e,t,n){return(0,Ie.N)(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}};var Te=n(283);const Ce={resolve:function(e){return ke(e),e},tokenize:function(e,t){let n;return function(t){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),r(t)};function r(t){return null===t?o(t):(0,Ee.HP)(t)?e.check(Ne,i,o)(t):(e.consume(t),r)}function o(n){return e.exit("chunkContent"),e.exit("content"),t(n)}function i(t){return e.consume(t),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,r}}},Ne={partial:!0,tokenize:function(e,t,n){const r=this;return function(t){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),(0,Ie.N)(e,o,"linePrefix")};function o(o){if(null===o||(0,Ee.HP)(o))return n(o);const i=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&i&&"linePrefix"===i[1].type&&i[2].sliceSerialize(i[1],!0).length>=4?t(o):e.interrupt(r.parser.constructs.flow,n,t)(o)}}},De={tokenize:function(e){const t=this,n=e.attempt(Te.B,function(r){if(null!==r)return e.enter("lineEndingBlank"),e.consume(r),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n;e.consume(r)},e.attempt(this.parser.constructs.flowInitial,r,(0,Ie.N)(e,e.attempt(this.parser.constructs.flow,r,e.attempt(Ce,r)),"linePrefix")));return n;function r(r){if(null!==r)return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),t.currentConstruct=void 0,n;e.consume(r)}}},_e={resolveAll:Fe()},Le=We("string"),Re=We("text");function We(e){return{resolveAll:Fe("text"===e?He:void 0),tokenize:function(t){const n=this,r=this.parser.constructs[e],o=t.attempt(r,i,a);return i;function i(e){return l(e)?o(e):a(e)}function a(e){if(null!==e)return t.enter("data"),t.consume(e),s;t.consume(e)}function s(e){return l(e)?(t.exit("data"),o(e)):(t.consume(e),s)}function l(e){if(null===e)return!0;const t=r[e];let o=-1;if(t)for(;++o<t.length;){const e=t[o];if(!e.previous||e.previous.call(n,n.previous))return!0}return!1}}}}function Fe(e){return function(t,n){let r,o=-1;for(;++o<=t.length;)void 0===r?t[o]&&"data"===t[o][1].type&&(r=o,o++):t[o]&&"data"===t[o][1].type||(o!==r+2&&(t[r][1].end=t[o-1][1].end,t.splice(r+2,o-r-2),o=r+2),r=void 0);return e?e(t,n):t}}function He(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||"lineEnding"===e[n][1].type)&&"data"===e[n-1][1].type){const r=e[n-1][1],o=t.sliceStream(r);let i,a=o.length,s=-1,l=0;for(;a--;){const e=o[a];if("string"==typeof e){for(s=e.length;32===e.charCodeAt(s-1);)l++,s--;if(s)break;s=-1}else if(-2===e)i=!0,l++;else if(-1!==e){a++;break}}if(t._contentTypeTextTrailing&&n===e.length&&(l=0),l){const o={type:n===e.length||i||l<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:a?s:r.start._bufferIndex+s,_index:r.start._index+a,line:r.end.line,column:r.end.column-l,offset:r.end.offset-l},end:{...r.end}};r.end={...o.start},r.start.offset===r.end.offset?Object.assign(r,o):(e.splice(n,0,["enter",o,t],["exit",o,t]),n+=2)}n++}return e}const Me={name:"thematicBreak",tokenize:function(e,t,n){let r,o=0;return function(t){return e.enter("thematicBreak"),function(e){return r=e,i(e)}(t)};function i(i){return i===r?(e.enter("thematicBreakSequence"),a(i)):o>=3&&(null===i||(0,Ee.HP)(i))?(e.exit("thematicBreak"),t(i)):n(i)}function a(t){return t===r?(e.consume(t),o++,a):(e.exit("thematicBreakSequence"),(0,Ee.On)(t)?(0,Ie.N)(e,i,"whitespace")(t):i(t))}}},ze={continuation:{tokenize:function(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(Te.B,function(n){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,(0,Ie.N)(e,t,"listItemIndent",r.containerState.size+1)(n)},function(n){return r.containerState.furtherBlankLines||!(0,Ee.On)(n)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(n)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(Be,t,o)(n))});function o(o){return r.containerState._closeFlow=!0,r.interrupt=void 0,(0,Ie.N)(e,e.attempt(ze,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o)}}},exit:function(e){e.exit(this.containerState.type)},name:"list",tokenize:function(e,t,n){const r=this,o=r.events[r.events.length-1];let i=o&&"linePrefix"===o[1].type?o[2].sliceSerialize(o[1],!0).length:0,a=0;return function(t){const o=r.containerState.type||(42===t||43===t||45===t?"listUnordered":"listOrdered");if("listUnordered"===o?!r.containerState.marker||t===r.containerState.marker:(0,Ee.BM)(t)){if(r.containerState.type||(r.containerState.type=o,e.enter(o,{_container:!0})),"listUnordered"===o)return e.enter("listItemPrefix"),42===t||45===t?e.check(Me,n,l)(t):l(t);if(!r.interrupt||49===t)return e.enter("listItemPrefix"),e.enter("listItemValue"),s(t)}return n(t)};function s(t){return(0,Ee.BM)(t)&&++a<10?(e.consume(t),s):(!r.interrupt||a<2)&&(r.containerState.marker?t===r.containerState.marker:41===t||46===t)?(e.exit("listItemValue"),l(t)):n(t)}function l(t){return e.enter("listItemMarker"),e.consume(t),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||t,e.check(Te.B,r.interrupt?n:c,e.attempt(je,h,u))}function c(e){return r.containerState.initialBlankLine=!0,i++,h(e)}function u(t){return(0,Ee.On)(t)?(e.enter("listItemPrefixWhitespace"),e.consume(t),e.exit("listItemPrefixWhitespace"),h):n(t)}function h(n){return r.containerState.size=i+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(n)}}},je={partial:!0,tokenize:function(e,t,n){const r=this;return(0,Ie.N)(e,function(e){const o=r.events[r.events.length-1];return!(0,Ee.On)(e)&&o&&"listItemPrefixWhitespace"===o[1].type?t(e):n(e)},"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5)}},Be={partial:!0,tokenize:function(e,t,n){const r=this;return(0,Ie.N)(e,function(e){const o=r.events[r.events.length-1];return o&&"listItemIndent"===o[1].type&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?t(e):n(e)},"listItemIndent",r.containerState.size+1)}},Ye={continuation:{tokenize:function(e,t,n){const r=this;return function(t){return(0,Ee.On)(t)?(0,Ie.N)(e,o,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(t):o(t)};function o(r){return e.attempt(Ye,t,n)(r)}}},exit:function(e){e.exit("blockQuote")},name:"blockQuote",tokenize:function(e,t,n){const r=this;return function(t){if(62===t){const n=r.containerState;return n.open||(e.enter("blockQuote",{_container:!0}),n.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(t),e.exit("blockQuoteMarker"),o}return n(t)};function o(n){return(0,Ee.On)(n)?(e.enter("blockQuotePrefixWhitespace"),e.consume(n),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(n))}}};function Ue(e,t,n,r,o,i,a,s,l){const c=l||Number.POSITIVE_INFINITY;let u=0;return function(t){return 60===t?(e.enter(r),e.enter(o),e.enter(i),e.consume(t),e.exit(i),h):null===t||32===t||41===t||(0,Ee.JQ)(t)?n(t):(e.enter(r),e.enter(a),e.enter(s),e.enter("chunkString",{contentType:"string"}),f(t))};function h(n){return 62===n?(e.enter(i),e.consume(n),e.exit(i),e.exit(o),e.exit(r),t):(e.enter(s),e.enter("chunkString",{contentType:"string"}),d(n))}function d(t){return 62===t?(e.exit("chunkString"),e.exit(s),h(t)):null===t||60===t||(0,Ee.HP)(t)?n(t):(e.consume(t),92===t?p:d)}function p(t){return 60===t||62===t||92===t?(e.consume(t),d):d(t)}function f(o){return u||null!==o&&41!==o&&!(0,Ee.Ee)(o)?u<c&&40===o?(e.consume(o),u++,f):41===o?(e.consume(o),u--,f):null===o||32===o||40===o||(0,Ee.JQ)(o)?n(o):(e.consume(o),92===o?m:f):(e.exit("chunkString"),e.exit(s),e.exit(a),e.exit(r),t(o))}function m(t){return 40===t||41===t||92===t?(e.consume(t),f):f(t)}}function $e(e,t,n,r,o,i){const a=this;let s,l=0;return function(t){return e.enter(r),e.enter(o),e.consume(t),e.exit(o),e.enter(i),c};function c(h){return l>999||null===h||91===h||93===h&&!s||94===h&&!l&&"_hiddenFootnoteSupport"in a.parser.constructs?n(h):93===h?(e.exit(i),e.enter(o),e.consume(h),e.exit(o),e.exit(r),t):(0,Ee.HP)(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),c):(e.enter("chunkString",{contentType:"string"}),u(h))}function u(t){return null===t||91===t||93===t||(0,Ee.HP)(t)||l++>999?(e.exit("chunkString"),c(t)):(e.consume(t),s||(s=!(0,Ee.On)(t)),92===t?h:u)}function h(t){return 91===t||92===t||93===t?(e.consume(t),l++,u):u(t)}}function Ve(e,t,n,r,o,i){let a;return function(t){return 34===t||39===t||40===t?(e.enter(r),e.enter(o),e.consume(t),e.exit(o),a=40===t?41:t,s):n(t)};function s(n){return n===a?(e.enter(o),e.consume(n),e.exit(o),e.exit(r),t):(e.enter(i),l(n))}function l(t){return t===a?(e.exit(i),s(a)):null===t?n(t):(0,Ee.HP)(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),(0,Ie.N)(e,l,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),c(t))}function c(t){return t===a||null===t||(0,Ee.HP)(t)?(e.exit("chunkString"),l(t)):(e.consume(t),92===t?u:c)}function u(t){return t===a||92===t?(e.consume(t),c):c(t)}}function qe(e,t){let n;return function r(o){return(0,Ee.HP)(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),n=!0,r):(0,Ee.On)(o)?(0,Ie.N)(e,r,n?"linePrefix":"lineSuffix")(o):t(o)}}var Ge=n(638);const Ke={name:"definition",tokenize:function(e,t,n){const r=this;let o;return function(t){return e.enter("definition"),function(t){return $e.call(r,e,i,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(t)}(t)};function i(t){return o=(0,Ge.B)(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),58===t?(e.enter("definitionMarker"),e.consume(t),e.exit("definitionMarker"),a):n(t)}function a(t){return(0,Ee.Ee)(t)?qe(e,s)(t):s(t)}function s(t){return Ue(e,l,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(t)}function l(t){return e.attempt(Je,c,c)(t)}function c(t){return(0,Ee.On)(t)?(0,Ie.N)(e,u,"whitespace")(t):u(t)}function u(i){return null===i||(0,Ee.HP)(i)?(e.exit("definition"),r.parser.defined.push(o),t(i)):n(i)}}},Je={partial:!0,tokenize:function(e,t,n){return function(t){return(0,Ee.Ee)(t)?qe(e,r)(t):n(t)};function r(t){return Ve(e,o,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(t)}function o(t){return(0,Ee.On)(t)?(0,Ie.N)(e,i,"whitespace")(t):i(t)}function i(e){return null===e||(0,Ee.HP)(e)?t(e):n(e)}}},Qe={name:"codeIndented",tokenize:function(e,t,n){const r=this;return function(t){return e.enter("codeIndented"),(0,Ie.N)(e,o,"linePrefix",5)(t)};function o(e){const t=r.events[r.events.length-1];return t&&"linePrefix"===t[1].type&&t[2].sliceSerialize(t[1],!0).length>=4?i(e):n(e)}function i(t){return null===t?s(t):(0,Ee.HP)(t)?e.attempt(Xe,i,s)(t):(e.enter("codeFlowValue"),a(t))}function a(t){return null===t||(0,Ee.HP)(t)?(e.exit("codeFlowValue"),i(t)):(e.consume(t),a)}function s(n){return e.exit("codeIndented"),t(n)}}},Xe={partial:!0,tokenize:function(e,t,n){const r=this;return o;function o(t){return r.parser.lazy[r.now().line]?n(t):(0,Ee.HP)(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),o):(0,Ie.N)(e,i,"linePrefix",5)(t)}function i(e){const i=r.events[r.events.length-1];return i&&"linePrefix"===i[1].type&&i[2].sliceSerialize(i[1],!0).length>=4?t(e):(0,Ee.HP)(e)?o(e):n(e)}}},Ze={name:"headingAtx",resolve:function(e,t){let n,r,o=e.length-2,i=3;return"whitespace"===e[i][1].type&&(i+=2),o-2>i&&"whitespace"===e[o][1].type&&(o-=2),"atxHeadingSequence"===e[o][1].type&&(i===o-1||o-4>i&&"whitespace"===e[o-2][1].type)&&(o-=i+1===o?2:4),o>i&&(n={type:"atxHeadingText",start:e[i][1].start,end:e[o][1].end},r={type:"chunkText",start:e[i][1].start,end:e[o][1].end,contentType:"text"},(0,ve.m)(e,i,o-i+1,[["enter",n,t],["enter",r,t],["exit",r,t],["exit",n,t]])),e},tokenize:function(e,t,n){let r=0;return function(t){return e.enter("atxHeading"),function(t){return e.enter("atxHeadingSequence"),o(t)}(t)};function o(t){return 35===t&&r++<6?(e.consume(t),o):null===t||(0,Ee.Ee)(t)?(e.exit("atxHeadingSequence"),i(t)):n(t)}function i(n){return 35===n?(e.enter("atxHeadingSequence"),a(n)):null===n||(0,Ee.HP)(n)?(e.exit("atxHeading"),t(n)):(0,Ee.On)(n)?(0,Ie.N)(e,i,"whitespace")(n):(e.enter("atxHeadingText"),s(n))}function a(t){return 35===t?(e.consume(t),a):(e.exit("atxHeadingSequence"),i(t))}function s(t){return null===t||35===t||(0,Ee.Ee)(t)?(e.exit("atxHeadingText"),i(t)):(e.consume(t),s)}}},et={name:"setextUnderline",resolveTo:function(e,t){let n,r,o,i=e.length;for(;i--;)if("enter"===e[i][0]){if("content"===e[i][1].type){n=i;break}"paragraph"===e[i][1].type&&(r=i)}else"content"===e[i][1].type&&e.splice(i,1),o||"definition"!==e[i][1].type||(o=i);const a={type:"setextHeading",start:{...e[n][1].start},end:{...e[e.length-1][1].end}};return e[r][1].type="setextHeadingText",o?(e.splice(r,0,["enter",a,t]),e.splice(o+1,0,["exit",e[n][1],t]),e[n][1].end={...e[o][1].end}):e[n][1]=a,e.push(["exit",a,t]),e},tokenize:function(e,t,n){const r=this;let o;return function(t){let a,s=r.events.length;for(;s--;)if("lineEnding"!==r.events[s][1].type&&"linePrefix"!==r.events[s][1].type&&"content"!==r.events[s][1].type){a="paragraph"===r.events[s][1].type;break}return r.parser.lazy[r.now().line]||!r.interrupt&&!a?n(t):(e.enter("setextHeadingLine"),o=t,function(t){return e.enter("setextHeadingLineSequence"),i(t)}(t))};function i(t){return t===o?(e.consume(t),i):(e.exit("setextHeadingLineSequence"),(0,Ee.On)(t)?(0,Ie.N)(e,a,"lineSuffix")(t):a(t))}function a(r){return null===r||(0,Ee.HP)(r)?(e.exit("setextHeadingLine"),t(r)):n(r)}}},tt=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],nt=["pre","script","style","textarea"],rt={concrete:!0,name:"htmlFlow",resolveTo:function(e){let t=e.length;for(;t--&&("enter"!==e[t][0]||"htmlFlow"!==e[t][1].type););return t>1&&"linePrefix"===e[t-2][1].type&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e},tokenize:function(e,t,n){const r=this;let o,i,a,s,l;return function(t){return function(t){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(t),c}(t)};function c(s){return 33===s?(e.consume(s),u):47===s?(e.consume(s),i=!0,p):63===s?(e.consume(s),o=3,r.interrupt?t:L):(0,Ee.CW)(s)?(e.consume(s),a=String.fromCharCode(s),f):n(s)}function u(i){return 45===i?(e.consume(i),o=2,h):91===i?(e.consume(i),o=5,s=0,d):(0,Ee.CW)(i)?(e.consume(i),o=4,r.interrupt?t:L):n(i)}function h(o){return 45===o?(e.consume(o),r.interrupt?t:L):n(o)}function d(o){return o==="CDATA[".charCodeAt(s++)?(e.consume(o),6===s?r.interrupt?t:A:d):n(o)}function p(t){return(0,Ee.CW)(t)?(e.consume(t),a=String.fromCharCode(t),f):n(t)}function f(s){if(null===s||47===s||62===s||(0,Ee.Ee)(s)){const l=47===s,c=a.toLowerCase();return l||i||!nt.includes(c)?tt.includes(a.toLowerCase())?(o=6,l?(e.consume(s),m):r.interrupt?t(s):A(s)):(o=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(s):i?g(s):y(s)):(o=1,r.interrupt?t(s):A(s))}return 45===s||(0,Ee.lV)(s)?(e.consume(s),a+=String.fromCharCode(s),f):n(s)}function m(o){return 62===o?(e.consume(o),r.interrupt?t:A):n(o)}function g(t){return(0,Ee.On)(t)?(e.consume(t),g):I(t)}function y(t){return 47===t?(e.consume(t),I):58===t||95===t||(0,Ee.CW)(t)?(e.consume(t),v):(0,Ee.On)(t)?(e.consume(t),y):I(t)}function v(t){return 45===t||46===t||58===t||95===t||(0,Ee.lV)(t)?(e.consume(t),v):b(t)}function b(t){return 61===t?(e.consume(t),x):(0,Ee.On)(t)?(e.consume(t),b):y(t)}function x(t){return null===t||60===t||61===t||62===t||96===t?n(t):34===t||39===t?(e.consume(t),l=t,k):(0,Ee.On)(t)?(e.consume(t),x):w(t)}function k(t){return t===l?(e.consume(t),l=null,S):null===t||(0,Ee.HP)(t)?n(t):(e.consume(t),k)}function w(t){return null===t||34===t||39===t||47===t||60===t||61===t||62===t||96===t||(0,Ee.Ee)(t)?b(t):(e.consume(t),w)}function S(e){return 47===e||62===e||(0,Ee.On)(e)?y(e):n(e)}function I(t){return 62===t?(e.consume(t),E):n(t)}function E(t){return null===t||(0,Ee.HP)(t)?A(t):(0,Ee.On)(t)?(e.consume(t),E):n(t)}function A(t){return 45===t&&2===o?(e.consume(t),C):60===t&&1===o?(e.consume(t),N):62===t&&4===o?(e.consume(t),R):63===t&&3===o?(e.consume(t),L):93===t&&5===o?(e.consume(t),_):!(0,Ee.HP)(t)||6!==o&&7!==o?null===t||(0,Ee.HP)(t)?(e.exit("htmlFlowData"),O(t)):(e.consume(t),A):(e.exit("htmlFlowData"),e.check(ot,W,O)(t))}function O(t){return e.check(it,P,W)(t)}function P(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),T}function T(t){return null===t||(0,Ee.HP)(t)?O(t):(e.enter("htmlFlowData"),A(t))}function C(t){return 45===t?(e.consume(t),L):A(t)}function N(t){return 47===t?(e.consume(t),a="",D):A(t)}function D(t){if(62===t){const n=a.toLowerCase();return nt.includes(n)?(e.consume(t),R):A(t)}return(0,Ee.CW)(t)&&a.length<8?(e.consume(t),a+=String.fromCharCode(t),D):A(t)}function _(t){return 93===t?(e.consume(t),L):A(t)}function L(t){return 62===t?(e.consume(t),R):45===t&&2===o?(e.consume(t),L):A(t)}function R(t){return null===t||(0,Ee.HP)(t)?(e.exit("htmlFlowData"),W(t)):(e.consume(t),R)}function W(n){return e.exit("htmlFlow"),t(n)}}},ot={partial:!0,tokenize:function(e,t,n){return function(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),e.attempt(Te.B,t,n)}}},it={partial:!0,tokenize:function(e,t,n){const r=this;return function(t){return(0,Ee.HP)(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),o):n(t)};function o(e){return r.parser.lazy[r.now().line]?n(e):t(e)}}},at={partial:!0,tokenize:function(e,t,n){const r=this;return function(t){return null===t?n(t):(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),o)};function o(e){return r.parser.lazy[r.now().line]?n(e):t(e)}}},st={concrete:!0,name:"codeFenced",tokenize:function(e,t,n){const r=this,o={partial:!0,tokenize:function(e,t,n){let o=0;return function(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),a};function a(t){return e.enter("codeFencedFence"),(0,Ee.On)(t)?(0,Ie.N)(e,l,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(t):l(t)}function l(t){return t===i?(e.enter("codeFencedFenceSequence"),c(t)):n(t)}function c(t){return t===i?(o++,e.consume(t),c):o>=s?(e.exit("codeFencedFenceSequence"),(0,Ee.On)(t)?(0,Ie.N)(e,u,"whitespace")(t):u(t)):n(t)}function u(r){return null===r||(0,Ee.HP)(r)?(e.exit("codeFencedFence"),t(r)):n(r)}}};let i,a=0,s=0;return function(t){return function(t){const n=r.events[r.events.length-1];return a=n&&"linePrefix"===n[1].type?n[2].sliceSerialize(n[1],!0).length:0,i=t,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),l(t)}(t)};function l(t){return t===i?(s++,e.consume(t),l):s<3?n(t):(e.exit("codeFencedFenceSequence"),(0,Ee.On)(t)?(0,Ie.N)(e,c,"whitespace")(t):c(t))}function c(n){return null===n||(0,Ee.HP)(n)?(e.exit("codeFencedFence"),r.interrupt?t(n):e.check(at,p,v)(n)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),u(n))}function u(t){return null===t||(0,Ee.HP)(t)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),c(t)):(0,Ee.On)(t)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),(0,Ie.N)(e,h,"whitespace")(t)):96===t&&t===i?n(t):(e.consume(t),u)}function h(t){return null===t||(0,Ee.HP)(t)?c(t):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),d(t))}function d(t){return null===t||(0,Ee.HP)(t)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),c(t)):96===t&&t===i?n(t):(e.consume(t),d)}function p(t){return e.attempt(o,v,f)(t)}function f(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),m}function m(t){return a>0&&(0,Ee.On)(t)?(0,Ie.N)(e,g,"linePrefix",a+1)(t):g(t)}function g(t){return null===t||(0,Ee.HP)(t)?e.check(at,p,v)(t):(e.enter("codeFlowValue"),y(t))}function y(t){return null===t||(0,Ee.HP)(t)?(e.exit("codeFlowValue"),g(t)):(e.consume(t),y)}function v(n){return e.exit("codeFenced"),t(n)}}},lt=document.createElement("i");function ct(e){const t="&"+e+";";lt.innerHTML=t;const n=lt.textContent;return(59!==n.charCodeAt(n.length-1)||"semi"===e)&&n!==t&&n}const ut={name:"characterReference",tokenize:function(e,t,n){const r=this;let o,i,a=0;return function(t){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(t),e.exit("characterReferenceMarker"),s};function s(t){return 35===t?(e.enter("characterReferenceMarkerNumeric"),e.consume(t),e.exit("characterReferenceMarkerNumeric"),l):(e.enter("characterReferenceValue"),o=31,i=Ee.lV,c(t))}function l(t){return 88===t||120===t?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(t),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),o=6,i=Ee.ok,c):(e.enter("characterReferenceValue"),o=7,i=Ee.BM,c(t))}function c(s){if(59===s&&a){const o=e.exit("characterReferenceValue");return i!==Ee.lV||ct(r.sliceSerialize(o))?(e.enter("characterReferenceMarker"),e.consume(s),e.exit("characterReferenceMarker"),e.exit("characterReference"),t):n(s)}return i(s)&&a++<o?(e.consume(s),c):n(s)}}},ht={name:"characterEscape",tokenize:function(e,t,n){return function(t){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(t),e.exit("escapeMarker"),r};function r(r){return(0,Ee.ol)(r)?(e.enter("characterEscapeValue"),e.consume(r),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(r)}}},dt={name:"lineEnding",tokenize:function(e,t){return function(n){return e.enter("lineEnding"),e.consume(n),e.exit("lineEnding"),(0,Ie.N)(e,t,"linePrefix")}}};var pt=n(535);const ft={name:"labelEnd",resolveAll:function(e){let t=-1;const n=[];for(;++t<e.length;){const r=e[t][1];if(n.push(e[t]),"labelImage"===r.type||"labelLink"===r.type||"labelEnd"===r.type){const e="labelImage"===r.type?4:2;r.type="data",t+=e}}return e.length!==n.length&&(0,ve.m)(e,0,e.length,n),e},resolveTo:function(e,t){let n,r,o,i,a=e.length,s=0;for(;a--;)if(n=e[a][1],r){if("link"===n.type||"labelLink"===n.type&&n._inactive)break;"enter"===e[a][0]&&"labelLink"===n.type&&(n._inactive=!0)}else if(o){if("enter"===e[a][0]&&("labelImage"===n.type||"labelLink"===n.type)&&!n._balanced&&(r=a,"labelLink"!==n.type)){s=2;break}}else"labelEnd"===n.type&&(o=a);const l={type:"labelLink"===e[r][1].type?"link":"image",start:{...e[r][1].start},end:{...e[e.length-1][1].end}},c={type:"label",start:{...e[r][1].start},end:{...e[o][1].end}},u={type:"labelText",start:{...e[r+s+2][1].end},end:{...e[o-2][1].start}};return i=[["enter",l,t],["enter",c,t]],i=(0,ve.V)(i,e.slice(r+1,r+s+3)),i=(0,ve.V)(i,[["enter",u,t]]),i=(0,ve.V)(i,(0,pt.W)(t.parser.constructs.insideSpan.null,e.slice(r+s+4,o-3),t)),i=(0,ve.V)(i,[["exit",u,t],e[o-2],e[o-1],["exit",c,t]]),i=(0,ve.V)(i,e.slice(o+1)),i=(0,ve.V)(i,[["exit",l,t]]),(0,ve.m)(e,r,e.length,i),e},tokenize:function(e,t,n){const r=this;let o,i,a=r.events.length;for(;a--;)if(("labelImage"===r.events[a][1].type||"labelLink"===r.events[a][1].type)&&!r.events[a][1]._balanced){o=r.events[a][1];break}return function(t){return o?o._inactive?u(t):(i=r.parser.defined.includes((0,Ge.B)(r.sliceSerialize({start:o.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelEnd"),s):n(t)};function s(t){return 40===t?e.attempt(mt,c,i?c:u)(t):91===t?e.attempt(gt,c,i?l:u)(t):i?c(t):u(t)}function l(t){return e.attempt(yt,c,u)(t)}function c(e){return t(e)}function u(e){return o._balanced=!0,n(e)}}},mt={tokenize:function(e,t,n){return function(t){return e.enter("resource"),e.enter("resourceMarker"),e.consume(t),e.exit("resourceMarker"),r};function r(t){return(0,Ee.Ee)(t)?qe(e,o)(t):o(t)}function o(t){return 41===t?c(t):Ue(e,i,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(t)}function i(t){return(0,Ee.Ee)(t)?qe(e,s)(t):c(t)}function a(e){return n(e)}function s(t){return 34===t||39===t||40===t?Ve(e,l,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(t):c(t)}function l(t){return(0,Ee.Ee)(t)?qe(e,c)(t):c(t)}function c(r){return 41===r?(e.enter("resourceMarker"),e.consume(r),e.exit("resourceMarker"),e.exit("resource"),t):n(r)}}},gt={tokenize:function(e,t,n){const r=this;return function(t){return $e.call(r,e,o,i,"reference","referenceMarker","referenceString")(t)};function o(e){return r.parser.defined.includes((0,Ge.B)(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(e):n(e)}function i(e){return n(e)}}},yt={tokenize:function(e,t,n){return function(t){return e.enter("reference"),e.enter("referenceMarker"),e.consume(t),e.exit("referenceMarker"),r};function r(r){return 93===r?(e.enter("referenceMarker"),e.consume(r),e.exit("referenceMarker"),e.exit("reference"),t):n(r)}}},vt={name:"labelStartImage",resolveAll:ft.resolveAll,tokenize:function(e,t,n){const r=this;return function(t){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(t),e.exit("labelImageMarker"),o};function o(t){return 91===t?(e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelImage"),i):n(t)}function i(e){return 94===e&&"_hiddenFootnoteSupport"in r.parser.constructs?n(e):t(e)}}};var bt=n(691);const xt={name:"attention",resolveAll:function(e,t){let n,r,o,i,a,s,l,c,u=-1;for(;++u<e.length;)if("enter"===e[u][0]&&"attentionSequence"===e[u][1].type&&e[u][1]._close)for(n=u;n--;)if("exit"===e[n][0]&&"attentionSequence"===e[n][1].type&&e[n][1]._open&&t.sliceSerialize(e[n][1]).charCodeAt(0)===t.sliceSerialize(e[u][1]).charCodeAt(0)){if((e[n][1]._close||e[u][1]._open)&&(e[u][1].end.offset-e[u][1].start.offset)%3&&!((e[n][1].end.offset-e[n][1].start.offset+e[u][1].end.offset-e[u][1].start.offset)%3))continue;s=e[n][1].end.offset-e[n][1].start.offset>1&&e[u][1].end.offset-e[u][1].start.offset>1?2:1;const h={...e[n][1].end},d={...e[u][1].start};kt(h,-s),kt(d,s),i={type:s>1?"strongSequence":"emphasisSequence",start:h,end:{...e[n][1].end}},a={type:s>1?"strongSequence":"emphasisSequence",start:{...e[u][1].start},end:d},o={type:s>1?"strongText":"emphasisText",start:{...e[n][1].end},end:{...e[u][1].start}},r={type:s>1?"strong":"emphasis",start:{...i.start},end:{...a.end}},e[n][1].end={...i.start},e[u][1].start={...a.end},l=[],e[n][1].end.offset-e[n][1].start.offset&&(l=(0,ve.V)(l,[["enter",e[n][1],t],["exit",e[n][1],t]])),l=(0,ve.V)(l,[["enter",r,t],["enter",i,t],["exit",i,t],["enter",o,t]]),l=(0,ve.V)(l,(0,pt.W)(t.parser.constructs.insideSpan.null,e.slice(n+1,u),t)),l=(0,ve.V)(l,[["exit",o,t],["enter",a,t],["exit",a,t],["exit",r,t]]),e[u][1].end.offset-e[u][1].start.offset?(c=2,l=(0,ve.V)(l,[["enter",e[u][1],t],["exit",e[u][1],t]])):c=0,(0,ve.m)(e,n-1,u-n+3,l),u=n+l.length-c-2;break}for(u=-1;++u<e.length;)"attentionSequence"===e[u][1].type&&(e[u][1].type="data");return e},tokenize:function(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,o=(0,bt.S)(r);let i;return function(t){return i=t,e.enter("attentionSequence"),a(t)};function a(s){if(s===i)return e.consume(s),a;const l=e.exit("attentionSequence"),c=(0,bt.S)(s),u=!c||2===c&&o||n.includes(s),h=!o||2===o&&c||n.includes(r);return l._open=Boolean(42===i?u:u&&(o||!h)),l._close=Boolean(42===i?h:h&&(c||!u)),t(s)}}};function kt(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const wt={name:"autolink",tokenize:function(e,t,n){let r=0;return function(t){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(t),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),o};function o(t){return(0,Ee.CW)(t)?(e.consume(t),i):64===t?n(t):l(t)}function i(e){return 43===e||45===e||46===e||(0,Ee.lV)(e)?(r=1,a(e)):l(e)}function a(t){return 58===t?(e.consume(t),r=0,s):(43===t||45===t||46===t||(0,Ee.lV)(t))&&r++<32?(e.consume(t),a):(r=0,l(t))}function s(r){return 62===r?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(r),e.exit("autolinkMarker"),e.exit("autolink"),t):null===r||32===r||60===r||(0,Ee.JQ)(r)?n(r):(e.consume(r),s)}function l(t){return 64===t?(e.consume(t),c):(0,Ee.cx)(t)?(e.consume(t),l):n(t)}function c(e){return(0,Ee.lV)(e)?u(e):n(e)}function u(n){return 46===n?(e.consume(n),r=0,c):62===n?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(n),e.exit("autolinkMarker"),e.exit("autolink"),t):h(n)}function h(t){if((45===t||(0,Ee.lV)(t))&&r++<63){const n=45===t?h:u;return e.consume(t),n}return n(t)}}},St={name:"htmlText",tokenize:function(e,t,n){const r=this;let o,i,a;return function(t){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(t),s};function s(t){return 33===t?(e.consume(t),l):47===t?(e.consume(t),x):63===t?(e.consume(t),v):(0,Ee.CW)(t)?(e.consume(t),S):n(t)}function l(t){return 45===t?(e.consume(t),c):91===t?(e.consume(t),i=0,p):(0,Ee.CW)(t)?(e.consume(t),y):n(t)}function c(t){return 45===t?(e.consume(t),d):n(t)}function u(t){return null===t?n(t):45===t?(e.consume(t),h):(0,Ee.HP)(t)?(a=u,D(t)):(e.consume(t),u)}function h(t){return 45===t?(e.consume(t),d):u(t)}function d(e){return 62===e?N(e):45===e?h(e):u(e)}function p(t){return t==="CDATA[".charCodeAt(i++)?(e.consume(t),6===i?f:p):n(t)}function f(t){return null===t?n(t):93===t?(e.consume(t),m):(0,Ee.HP)(t)?(a=f,D(t)):(e.consume(t),f)}function m(t){return 93===t?(e.consume(t),g):f(t)}function g(t){return 62===t?N(t):93===t?(e.consume(t),g):f(t)}function y(t){return null===t||62===t?N(t):(0,Ee.HP)(t)?(a=y,D(t)):(e.consume(t),y)}function v(t){return null===t?n(t):63===t?(e.consume(t),b):(0,Ee.HP)(t)?(a=v,D(t)):(e.consume(t),v)}function b(e){return 62===e?N(e):v(e)}function x(t){return(0,Ee.CW)(t)?(e.consume(t),k):n(t)}function k(t){return 45===t||(0,Ee.lV)(t)?(e.consume(t),k):w(t)}function w(t){return(0,Ee.HP)(t)?(a=w,D(t)):(0,Ee.On)(t)?(e.consume(t),w):N(t)}function S(t){return 45===t||(0,Ee.lV)(t)?(e.consume(t),S):47===t||62===t||(0,Ee.Ee)(t)?I(t):n(t)}function I(t){return 47===t?(e.consume(t),N):58===t||95===t||(0,Ee.CW)(t)?(e.consume(t),E):(0,Ee.HP)(t)?(a=I,D(t)):(0,Ee.On)(t)?(e.consume(t),I):N(t)}function E(t){return 45===t||46===t||58===t||95===t||(0,Ee.lV)(t)?(e.consume(t),E):A(t)}function A(t){return 61===t?(e.consume(t),O):(0,Ee.HP)(t)?(a=A,D(t)):(0,Ee.On)(t)?(e.consume(t),A):I(t)}function O(t){return null===t||60===t||61===t||62===t||96===t?n(t):34===t||39===t?(e.consume(t),o=t,P):(0,Ee.HP)(t)?(a=O,D(t)):(0,Ee.On)(t)?(e.consume(t),O):(e.consume(t),T)}function P(t){return t===o?(e.consume(t),o=void 0,C):null===t?n(t):(0,Ee.HP)(t)?(a=P,D(t)):(e.consume(t),P)}function T(t){return null===t||34===t||39===t||60===t||61===t||96===t?n(t):47===t||62===t||(0,Ee.Ee)(t)?I(t):(e.consume(t),T)}function C(e){return 47===e||62===e||(0,Ee.Ee)(e)?I(e):n(e)}function N(r){return 62===r?(e.consume(r),e.exit("htmlTextData"),e.exit("htmlText"),t):n(r)}function D(t){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),_}function _(t){return(0,Ee.On)(t)?(0,Ie.N)(e,L,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(t):L(t)}function L(t){return e.enter("htmlTextData"),a(t)}}},It={name:"labelStartLink",resolveAll:ft.resolveAll,tokenize:function(e,t,n){const r=this;return function(t){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelLink"),o};function o(e){return 94===e&&"_hiddenFootnoteSupport"in r.parser.constructs?n(e):t(e)}}},Et={name:"hardBreakEscape",tokenize:function(e,t,n){return function(t){return e.enter("hardBreakEscape"),e.consume(t),r};function r(r){return(0,Ee.HP)(r)?(e.exit("hardBreakEscape"),t(r)):n(r)}}},At={name:"codeText",previous:function(e){return 96!==e||"characterEscape"===this.events[this.events.length-1][1].type},resolve:function(e){let t,n,r=e.length-4,o=3;if(!("lineEnding"!==e[o][1].type&&"space"!==e[o][1].type||"lineEnding"!==e[r][1].type&&"space"!==e[r][1].type))for(t=o;++t<r;)if("codeTextData"===e[t][1].type){e[o][1].type="codeTextPadding",e[r][1].type="codeTextPadding",o+=2,r-=2;break}for(t=o-1,r++;++t<=r;)void 0===n?t!==r&&"lineEnding"!==e[t][1].type&&(n=t):t!==r&&"lineEnding"!==e[t][1].type||(e[n][1].type="codeTextData",t!==n+2&&(e[n][1].end=e[t-1][1].end,e.splice(n+2,t-n-2),r-=t-n-2,t=n+2),n=void 0);return e},tokenize:function(e,t,n){let r,o,i=0;return function(t){return e.enter("codeText"),e.enter("codeTextSequence"),a(t)};function a(t){return 96===t?(e.consume(t),i++,a):(e.exit("codeTextSequence"),s(t))}function s(t){return null===t?n(t):32===t?(e.enter("space"),e.consume(t),e.exit("space"),s):96===t?(o=e.enter("codeTextSequence"),r=0,c(t)):(0,Ee.HP)(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),s):(e.enter("codeTextData"),l(t))}function l(t){return null===t||32===t||96===t||(0,Ee.HP)(t)?(e.exit("codeTextData"),s(t)):(e.consume(t),l)}function c(n){return 96===n?(e.consume(n),r++,c):r===i?(e.exit("codeTextSequence"),e.exit("codeText"),t(n)):(o.type="codeTextData",l(n))}}},Ot={42:ze,43:ze,45:ze,48:ze,49:ze,50:ze,51:ze,52:ze,53:ze,54:ze,55:ze,56:ze,57:ze,62:Ye},Pt={91:Ke},Tt={[-2]:Qe,[-1]:Qe,32:Qe},Ct={35:Ze,42:Me,45:[et,Me],60:rt,61:et,95:Me,96:st,126:st},Nt={38:ut,92:ht},Dt={[-5]:dt,[-4]:dt,[-3]:dt,33:vt,38:ut,42:xt,60:[wt,St],91:It,92:[Et,ht],93:ft,95:xt,96:At},_t={null:[xt,_e]},Lt={null:[42,95]},Rt={null:[]};function Wt(e,t,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const o={},i=[];let a=[],s=[],l=!0;const c={attempt:y(function(e,t){v(e,t.from)}),check:y(g),consume:function(e){(0,Ee.HP)(e)?(r.line++,r.column=1,r.offset+=-3===e?2:1,b()):-1!==e&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===a[r._index].length&&(r._bufferIndex=-1,r._index++)),u.previous=e,l=!0},enter:function(e,t){const n=t||{};return n.type=e,n.start=f(),u.events.push(["enter",n,u]),s.push(n),n},exit:function(e){const t=s.pop();return t.end=f(),u.events.push(["exit",t,u]),t},interrupt:y(g,{interrupt:!0})},u={code:null,containerState:{},defineSkip:function(e){o[e.line]=e.column,b()},events:[],now:f,parser:e,previous:null,sliceSerialize:function(e,t){return function(e,t){let n=-1;const r=[];let o;for(;++n<e.length;){const i=e[n];let a;if("string"==typeof i)a=i;else switch(i){case-5:a="\r";break;case-4:a="\n";break;case-3:a="\r\n";break;case-2:a=t?" ":"\t";break;case-1:if(!t&&o)continue;a=" ";break;default:a=String.fromCharCode(i)}o=-2===i,r.push(a)}return r.join("")}(p(e),t)},sliceStream:p,write:function(e){return a=(0,ve.V)(a,e),function(){let e;for(;r._index<a.length;){const t=a[r._index];if("string"==typeof t)for(e=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===e&&r._bufferIndex<t.length;)m(t.charCodeAt(r._bufferIndex));else m(t)}}(),null!==a[a.length-1]?[]:(v(t,0),u.events=(0,pt.W)(i,u.events,u),u.events)}};let h,d=t.tokenize.call(u,c);return t.resolveAll&&i.push(t),u;function p(e){return function(e,t){const n=t.start._index,r=t.start._bufferIndex,o=t.end._index,i=t.end._bufferIndex;let a;if(n===o)a=[e[n].slice(r,i)];else{if(a=e.slice(n,o),r>-1){const e=a[0];"string"==typeof e?a[0]=e.slice(r):a.shift()}i>0&&a.push(e[o].slice(0,i))}return a}(a,e)}function f(){const{_bufferIndex:e,_index:t,line:n,column:o,offset:i}=r;return{_bufferIndex:e,_index:t,line:n,column:o,offset:i}}function m(e){l=void 0,h=e,d=d(e)}function g(e,t){t.restore()}function y(e,t){return function(n,o,i){let a,h,d,p;return Array.isArray(n)?g(n):"tokenize"in n?g([n]):(m=n,function(e){const t=null!==e&&m[e],n=null!==e&&m.null;return g([...Array.isArray(t)?t:t?[t]:[],...Array.isArray(n)?n:n?[n]:[]])(e)});var m;function g(e){return a=e,h=0,0===e.length?i:y(e[h])}function y(e){return function(n){return p=function(){const e=f(),t=u.previous,n=u.currentConstruct,o=u.events.length,i=Array.from(s);return{from:o,restore:function(){r=e,u.previous=t,u.currentConstruct=n,u.events.length=o,s=i,b()}}}(),d=e,e.partial||(u.currentConstruct=e),e.name&&u.parser.constructs.disable.null.includes(e.name)?x():e.tokenize.call(t?Object.assign(Object.create(u),t):u,c,v,x)(n)}}function v(t){return l=!0,e(d,p),o}function x(e){return l=!0,p.restore(),++h<a.length?y(a[h]):i}}}function v(e,t){e.resolveAll&&!i.includes(e)&&i.push(e),e.resolve&&(0,ve.m)(u.events,t,u.events.length-t,e.resolve(u.events.slice(t),u)),e.resolveTo&&(u.events=e.resolveTo(u.events,u))}function b(){r.line in o&&r.column<2&&(r.column=o[r.line],r.offset+=o[r.line]-1)}}const Ft=/[\0\t\n\r]/g;function Ht(e,t){const n=Number.parseInt(e,t);return n<9||11===n||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||!(65535&~n)||65534==(65535&n)||n>1114111?"ï¿½":String.fromCodePoint(n)}const Mt=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function zt(e,t,n){if(t)return t;if(35===n.charCodeAt(0)){const e=n.charCodeAt(1),t=120===e||88===e;return Ht(n.slice(t?2:1),t?16:10)}return ct(n)||e}const jt={}.hasOwnProperty;function Bt(e,t,n){return"string"!=typeof t&&(n=t,t=void 0),function(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:o(v),autolinkProtocol:u,autolinkEmail:u,atxHeading:o(m),blockQuote:o(function(){return{type:"blockquote",children:[]}}),characterEscape:u,characterReference:u,codeFenced:o(f),codeFencedFenceInfo:i,codeFencedFenceMeta:i,codeIndented:o(f,i),codeText:o(function(){return{type:"inlineCode",value:""}},i),codeTextData:u,data:u,codeFlowValue:u,definition:o(function(){return{type:"definition",identifier:"",label:null,title:null,url:""}}),definitionDestinationString:i,definitionLabelString:i,definitionTitleString:i,emphasis:o(function(){return{type:"emphasis",children:[]}}),hardBreakEscape:o(g),hardBreakTrailing:o(g),htmlFlow:o(y,i),htmlFlowData:u,htmlText:o(y,i),htmlTextData:u,image:o(function(){return{type:"image",title:null,url:"",alt:null}}),label:i,link:o(v),listItem:o(function(e){return{type:"listItem",spread:e._spread,checked:null,children:[]}}),listItemValue:function(e){this.data.expectingFirstListItemValue&&(this.stack[this.stack.length-2].start=Number.parseInt(this.sliceSerialize(e),10),this.data.expectingFirstListItemValue=void 0)},listOrdered:o(b,function(){this.data.expectingFirstListItemValue=!0}),listUnordered:o(b),paragraph:o(function(){return{type:"paragraph",children:[]}}),reference:function(){this.data.referenceType="collapsed"},referenceString:i,resourceDestinationString:i,resourceTitleString:i,setextHeading:o(m),strong:o(function(){return{type:"strong",children:[]}}),thematicBreak:o(function(){return{type:"thematicBreak"}})},exit:{atxHeading:s(),atxHeadingSequence:function(e){const t=this.stack[this.stack.length-1];if(!t.depth){const n=this.sliceSerialize(e).length;t.depth=n}},autolink:s(),autolinkEmail:function(e){h.call(this,e),this.stack[this.stack.length-1].url="mailto:"+this.sliceSerialize(e)},autolinkProtocol:function(e){h.call(this,e),this.stack[this.stack.length-1].url=this.sliceSerialize(e)},blockQuote:s(),characterEscapeValue:h,characterReferenceMarkerHexadecimal:p,characterReferenceMarkerNumeric:p,characterReferenceValue:function(e){const t=this.sliceSerialize(e),n=this.data.characterReferenceType;let r;n?(r=Ht(t,"characterReferenceMarkerNumeric"===n?10:16),this.data.characterReferenceType=void 0):r=ct(t);this.stack[this.stack.length-1].value+=r},characterReference:function(e){this.stack.pop().position.end=Yt(e.end)},codeFenced:s(function(){const e=this.resume();this.stack[this.stack.length-1].value=e.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}),codeFencedFence:function(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)},codeFencedFenceInfo:function(){const e=this.resume();this.stack[this.stack.length-1].lang=e},codeFencedFenceMeta:function(){const e=this.resume();this.stack[this.stack.length-1].meta=e},codeFlowValue:h,codeIndented:s(function(){const e=this.resume();this.stack[this.stack.length-1].value=e.replace(/(\r?\n|\r)$/g,"")}),codeText:s(function(){const e=this.resume();this.stack[this.stack.length-1].value=e}),codeTextData:h,data:h,definition:s(),definitionDestinationString:function(){const e=this.resume();this.stack[this.stack.length-1].url=e},definitionLabelString:function(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.label=t,n.identifier=(0,Ge.B)(this.sliceSerialize(e)).toLowerCase()},definitionTitleString:function(){const e=this.resume();this.stack[this.stack.length-1].title=e},emphasis:s(),hardBreakEscape:s(d),hardBreakTrailing:s(d),htmlFlow:s(function(){const e=this.resume();this.stack[this.stack.length-1].value=e}),htmlFlowData:h,htmlText:s(function(){const e=this.resume();this.stack[this.stack.length-1].value=e}),htmlTextData:h,image:s(function(){const e=this.stack[this.stack.length-1];if(this.data.inReference){const t=this.data.referenceType||"shortcut";e.type+="Reference",e.referenceType=t,delete e.url,delete e.title}else delete e.identifier,delete e.label;this.data.referenceType=void 0}),label:function(){const e=this.stack[this.stack.length-1],t=this.resume(),n=this.stack[this.stack.length-1];if(this.data.inReference=!0,"link"===n.type){const t=e.children;n.children=t}else n.alt=t},labelText:function(e){const t=this.sliceSerialize(e),n=this.stack[this.stack.length-2];n.label=function(e){return e.replace(Mt,zt)}(t),n.identifier=(0,Ge.B)(t).toLowerCase()},lineEnding:function(e){const n=this.stack[this.stack.length-1];if(this.data.atHardBreak)return n.children[n.children.length-1].position.end=Yt(e.end),void(this.data.atHardBreak=void 0);!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(n.type)&&(u.call(this,e),h.call(this,e))},link:s(function(){const e=this.stack[this.stack.length-1];if(this.data.inReference){const t=this.data.referenceType||"shortcut";e.type+="Reference",e.referenceType=t,delete e.url,delete e.title}else delete e.identifier,delete e.label;this.data.referenceType=void 0}),listItem:s(),listOrdered:s(),listUnordered:s(),paragraph:s(),referenceString:function(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.label=t,n.identifier=(0,Ge.B)(this.sliceSerialize(e)).toLowerCase(),this.data.referenceType="full"},resourceDestinationString:function(){const e=this.resume();this.stack[this.stack.length-1].url=e},resourceTitleString:function(){const e=this.resume();this.stack[this.stack.length-1].title=e},resource:function(){this.data.inReference=void 0},setextHeading:s(function(){this.data.setextHeadingSlurpLineEnding=void 0}),setextHeadingLineSequence:function(e){this.stack[this.stack.length-1].depth=61===this.sliceSerialize(e).codePointAt(0)?1:2},setextHeadingText:function(){this.data.setextHeadingSlurpLineEnding=!0},strong:s(),thematicBreak:s()}};Ut(t,(e||{}).mdastExtensions||[]);const n={};return function(e){let o={type:"root",children:[]};const s={stack:[o],tokenStack:[],config:t,enter:a,exit:l,buffer:i,resume:c,data:n},u=[];let h=-1;for(;++h<e.length;)"listOrdered"!==e[h][1].type&&"listUnordered"!==e[h][1].type||("enter"===e[h][0]?u.push(h):h=r(e,u.pop(),h));for(h=-1;++h<e.length;){const n=t[e[h][0]];jt.call(n,e[h][1].type)&&n[e[h][1].type].call(Object.assign({sliceSerialize:e[h][2].sliceSerialize},s),e[h][1])}if(s.tokenStack.length>0){const e=s.tokenStack[s.tokenStack.length-1];(e[1]||Vt).call(s,void 0,e[0])}for(o.position={start:Yt(e.length>0?e[0][1].start:{line:1,column:1,offset:0}),end:Yt(e.length>0?e[e.length-2][1].end:{line:1,column:1,offset:0})},h=-1;++h<t.transforms.length;)o=t.transforms[h](o)||o;return o};function r(e,t,n){let r,o,i,a,s=t-1,l=-1,c=!1;for(;++s<=n;){const t=e[s];switch(t[1].type){case"listUnordered":case"listOrdered":case"blockQuote":"enter"===t[0]?l++:l--,a=void 0;break;case"lineEndingBlank":"enter"===t[0]&&(!r||a||l||i||(i=s),a=void 0);break;case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:a=void 0}if(!l&&"enter"===t[0]&&"listItemPrefix"===t[1].type||-1===l&&"exit"===t[0]&&("listUnordered"===t[1].type||"listOrdered"===t[1].type)){if(r){let a=s;for(o=void 0;a--;){const t=e[a];if("lineEnding"===t[1].type||"lineEndingBlank"===t[1].type){if("exit"===t[0])continue;o&&(e[o][1].type="lineEndingBlank",c=!0),t[1].type="lineEnding",o=a}else if("linePrefix"!==t[1].type&&"blockQuotePrefix"!==t[1].type&&"blockQuotePrefixWhitespace"!==t[1].type&&"blockQuoteMarker"!==t[1].type&&"listItemIndent"!==t[1].type)break}i&&(!o||i<o)&&(r._spread=!0),r.end=Object.assign({},o?e[o][1].start:t[1].end),e.splice(o||s,0,["exit",r,t[2]]),s++,n++}if("listItemPrefix"===t[1].type){const o={type:"listItem",_spread:!1,start:Object.assign({},t[1].start),end:void 0};r=o,e.splice(s,0,["enter",o,t[2]]),s++,n++,i=void 0,a=!0}}}return e[t][1]._spread=c,n}function o(e,t){return function(n){a.call(this,e(n),n),t&&t.call(this,n)}}function i(){this.stack.push({type:"fragment",children:[]})}function a(e,t,n){this.stack[this.stack.length-1].children.push(e),this.stack.push(e),this.tokenStack.push([t,n||void 0]),e.position={start:Yt(t.start),end:void 0}}function s(e){return function(t){e&&e.call(this,t),l.call(this,t)}}function l(e,t){const n=this.stack.pop(),r=this.tokenStack.pop();if(!r)throw new Error("Cannot close `"+e.type+"` ("+K({start:e.start,end:e.end})+"): itâ€™s not open");r[0].type!==e.type&&(t?t.call(this,e,r[0]):(r[1]||Vt).call(this,e,r[0])),n.position.end=Yt(e.end)}function c(){return(0,ye.d)(this.stack.pop())}function u(e){const t=this.stack[this.stack.length-1].children;let n=t[t.length-1];n&&"text"===n.type||(n={type:"text",value:""},n.position={start:Yt(e.start),end:void 0},t.push(n)),this.stack.push(n)}function h(e){const t=this.stack.pop();t.value+=this.sliceSerialize(e),t.position.end=Yt(e.end)}function d(){this.data.atHardBreak=!0}function p(e){this.data.characterReferenceType=e.type}function f(){return{type:"code",lang:null,meta:null,value:""}}function m(){return{type:"heading",depth:0,children:[]}}function g(){return{type:"break"}}function y(){return{type:"html",value:""}}function v(){return{type:"link",title:null,url:"",children:[]}}function b(e){return{type:"list",ordered:"listOrdered"===e.type,start:null,spread:e._spread,children:[]}}}(n)(function(e){for(;!ke(e););return e}(function(e){const t=e||{},n={constructs:(0,Se.y)([o,...t.extensions||[]]),content:r(Ae),defined:[],document:r(Oe),flow:r(De),lazy:{},string:r(Le),text:r(Re)};return n;function r(e){return function(t){return Wt(n,e,t)}}}(n).document().write(function(){let e,t=1,n="",r=!0;return function(o,i,a){const s=[];let l,c,u,h,d;for(o=n+("string"==typeof o?o.toString():new TextDecoder(i||void 0).decode(o)),u=0,n="",r&&(65279===o.charCodeAt(0)&&u++,r=void 0);u<o.length;){if(Ft.lastIndex=u,l=Ft.exec(o),h=l&&void 0!==l.index?l.index:o.length,d=o.charCodeAt(h),!l){n=o.slice(u);break}if(10===d&&u===h&&e)s.push(-3),e=void 0;else switch(e&&(s.push(-5),e=void 0),u<h&&(s.push(o.slice(u,h)),t+=h-u),d){case 0:s.push(65533),t++;break;case 9:for(c=4*Math.ceil(t/4),s.push(-2);t++<c;)s.push(-1);break;case 10:s.push(-4),t=1;break;default:e=!0,t=1}u=h+1}return a&&(e&&s.push(-5),n&&s.push(n),s.push(null)),s}}()(e,t,!0))))}function Yt(e){return{line:e.line,column:e.column,offset:e.offset}}function Ut(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?Ut(e,r):$t(e,r)}}function $t(e,t){let n;for(n in t)if(jt.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function Vt(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+K({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+K({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+K({start:t.start,end:t.end})+") is still open")}function qt(e){const t=this;t.parser=function(n){return Bt(n,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}const Gt="object"==typeof self?self:globalThis,Kt=e=>((e,t)=>{const n=(t,n)=>(e.set(n,t),t),r=o=>{if(e.has(o))return e.get(o);const[i,a]=t[o];switch(i){case 0:case-1:return n(a,o);case 1:{const e=n([],o);for(const t of a)e.push(r(t));return e}case 2:{const e=n({},o);for(const[t,n]of a)e[r(t)]=r(n);return e}case 3:return n(new Date(a),o);case 4:{const{source:e,flags:t}=a;return n(new RegExp(e,t),o)}case 5:{const e=n(new Map,o);for(const[t,n]of a)e.set(r(t),r(n));return e}case 6:{const e=n(new Set,o);for(const t of a)e.add(r(t));return e}case 7:{const{name:e,message:t}=a;return n(new Gt[e](t),o)}case 8:return n(BigInt(a),o);case"BigInt":return n(Object(BigInt(a)),o);case"ArrayBuffer":return n(new Uint8Array(a).buffer,a);case"DataView":{const{buffer:e}=new Uint8Array(a);return n(new DataView(e),a)}}return n(new Gt[i](a),o)};return r})(new Map,e)(0),Jt="",{toString:Qt}={},{keys:Xt}=Object,Zt=e=>{const t=typeof e;if("object"!==t||!e)return[0,t];const n=Qt.call(e).slice(8,-1);switch(n){case"Array":return[1,Jt];case"Object":return[2,Jt];case"Date":return[3,Jt];case"RegExp":return[4,Jt];case"Map":return[5,Jt];case"Set":return[6,Jt];case"DataView":return[1,n]}return n.includes("Array")?[1,n]:n.includes("Error")?[7,n]:[2,n]},en=([e,t])=>0===e&&("function"===t||"symbol"===t),tn=(e,{json:t,lossy:n}={})=>{const r=[];return((e,t,n,r)=>{const o=(e,t)=>{const o=r.push(e)-1;return n.set(t,o),o},i=r=>{if(n.has(r))return n.get(r);let[a,s]=Zt(r);switch(a){case 0:{let t=r;switch(s){case"bigint":a=8,t=r.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+s);t=null;break;case"undefined":return o([-1],r)}return o([a,t],r)}case 1:{if(s){let e=r;return"DataView"===s?e=new Uint8Array(r.buffer):"ArrayBuffer"===s&&(e=new Uint8Array(r)),o([s,[...e]],r)}const e=[],t=o([a,e],r);for(const t of r)e.push(i(t));return t}case 2:{if(s)switch(s){case"BigInt":return o([s,r.toString()],r);case"Boolean":case"Number":case"String":return o([s,r.valueOf()],r)}if(t&&"toJSON"in r)return i(r.toJSON());const n=[],l=o([a,n],r);for(const t of Xt(r))!e&&en(Zt(r[t]))||n.push([i(t),i(r[t])]);return l}case 3:return o([a,r.toISOString()],r);case 4:{const{source:e,flags:t}=r;return o([a,{source:e,flags:t}],r)}case 5:{const t=[],n=o([a,t],r);for(const[n,o]of r)(e||!en(Zt(n))&&!en(Zt(o)))&&t.push([i(n),i(o)]);return n}case 6:{const t=[],n=o([a,t],r);for(const n of r)!e&&en(Zt(n))||t.push(i(n));return n}}const{message:l}=r;return o([a,{name:s,message:l}],r)};return i})(!(t||n),!!t,new Map,r)(e),r},nn="function"==typeof structuredClone?(e,t)=>t&&("json"in t||"lossy"in t)?Kt(tn(e,t)):structuredClone(e):(e,t)=>Kt(tn(e,t));function rn(e){const t=[];let n=-1,r=0,o=0;for(;++n<e.length;){const i=e.charCodeAt(n);let a="";if(37===i&&(0,Ee.lV)(e.charCodeAt(n+1))&&(0,Ee.lV)(e.charCodeAt(n+2)))o=2;else if(i<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(i))||(a=String.fromCharCode(i));else if(i>55295&&i<57344){const t=e.charCodeAt(n+1);i<56320&&t>56319&&t<57344?(a=String.fromCharCode(i,t),o=1):a="ï¿½"}else a=String.fromCharCode(i);a&&(t.push(e.slice(r,n),encodeURIComponent(a)),r=n+o+1,a=""),o&&(n+=o,o=0)}return t.join("")+e.slice(r)}function on(e,t){const n=[{type:"text",value:"â†©"}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function an(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}var sn=n(970);function ln(e,t){const n=t.referenceType;let r="]";if("collapsed"===n?r+="[]":"full"===n&&(r+="["+(t.label||t.identifier)+"]"),"imageReference"===t.type)return[{type:"text",value:"!["+t.alt+r}];const o=e.all(t),i=o[0];i&&"text"===i.type?i.value="["+i.value:o.unshift({type:"text",value:"["});const a=o[o.length-1];return a&&"text"===a.type?a.value+=r:o.push({type:"text",value:r}),o}function cn(e){const t=e.spread;return null==t?e.children.length>1:t}function un(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),o=0;const i=[];for(;r;)i.push(hn(t.slice(o,r.index),o>0,!0),r[0]),o=r.index+r[0].length,r=n.exec(t);return i.push(hn(t.slice(o),o>0,!1)),i.join("")}function hn(e,t,n){let r=0,o=e.length;if(t){let t=e.codePointAt(r);for(;9===t||32===t;)r++,t=e.codePointAt(r)}if(n){let t=e.codePointAt(o-1);for(;9===t||32===t;)o--,t=e.codePointAt(o-1)}return o>r?e.slice(r,o):""}const dn={blockquote:function(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)},break:function(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:"\n"}]},code:function(e,t){const n=t.value?t.value+"\n":"",r={},o=t.lang?t.lang.split(/\s+/):[];o.length>0&&(r.className=["language-"+o[0]]);let i={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(i.data={meta:t.meta}),e.patch(t,i),i=e.applyData(t,i),i={type:"element",tagName:"pre",properties:{},children:[i]},e.patch(t,i),i},delete:function(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},emphasis:function(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},footnoteReference:function(e,t){const n="string"==typeof e.options.clobberPrefix?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),o=rn(r.toLowerCase()),i=e.footnoteOrder.indexOf(r);let a,s=e.footnoteCounts.get(r);void 0===s?(s=0,e.footnoteOrder.push(r),a=e.footnoteOrder.length):a=i+1,s+=1,e.footnoteCounts.set(r,s);const l={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+o,id:n+"fnref-"+o+(s>1?"-"+s:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(a)}]};e.patch(t,l);const c={type:"element",tagName:"sup",properties:{},children:[l]};return e.patch(t,c),e.applyData(t,c)},heading:function(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},html:function(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}},imageReference:function(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return ln(e,t);const o={src:rn(r.url||""),alt:t.alt};null!==r.title&&void 0!==r.title&&(o.title=r.title);const i={type:"element",tagName:"img",properties:o,children:[]};return e.patch(t,i),e.applyData(t,i)},image:function(e,t){const n={src:rn(t.url)};null!==t.alt&&void 0!==t.alt&&(n.alt=t.alt),null!==t.title&&void 0!==t.title&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)},inlineCode:function(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)},linkReference:function(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return ln(e,t);const o={href:rn(r.url||"")};null!==r.title&&void 0!==r.title&&(o.title=r.title);const i={type:"element",tagName:"a",properties:o,children:e.all(t)};return e.patch(t,i),e.applyData(t,i)},link:function(e,t){const n={href:rn(t.url)};null!==t.title&&void 0!==t.title&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)},listItem:function(e,t,n){const r=e.all(t),o=n?function(e){let t=!1;if("list"===e.type){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=cn(n[r])}return t}(n):cn(t),i={},a=[];if("boolean"==typeof t.checked){const e=r[0];let n;e&&"element"===e.type&&"p"===e.tagName?n=e:(n={type:"element",tagName:"p",properties:{},children:[]},r.unshift(n)),n.children.length>0&&n.children.unshift({type:"text",value:" "}),n.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),i.className=["task-list-item"]}let s=-1;for(;++s<r.length;){const e=r[s];(o||0!==s||"element"!==e.type||"p"!==e.tagName)&&a.push({type:"text",value:"\n"}),"element"!==e.type||"p"!==e.tagName||o?a.push(e):a.push(...e.children)}const l=r[r.length-1];l&&(o||"element"!==l.type||"p"!==l.tagName)&&a.push({type:"text",value:"\n"});const c={type:"element",tagName:"li",properties:i,children:a};return e.patch(t,c),e.applyData(t,c)},list:function(e,t){const n={},r=e.all(t);let o=-1;for("number"==typeof t.start&&1!==t.start&&(n.start=t.start);++o<r.length;){const e=r[o];if("element"===e.type&&"li"===e.tagName&&e.properties&&Array.isArray(e.properties.className)&&e.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const i={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,i),e.applyData(t,i)},paragraph:function(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},root:function(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)},strong:function(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},table:function(e,t){const n=e.all(t),r=n.shift(),o=[];if(r){const n={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],n),o.push(n)}if(n.length>0){const r={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},i=q(t.children[1]),a=V(t.children[t.children.length-1]);i&&a&&(r.position={start:i,end:a}),o.push(r)}const i={type:"element",tagName:"table",properties:{},children:e.wrap(o,!0)};return e.patch(t,i),e.applyData(t,i)},tableCell:function(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},tableRow:function(e,t,n){const r=n?n.children:void 0,o=0===(r?r.indexOf(t):1)?"th":"td",i=n&&"table"===n.type?n.align:void 0,a=i?i.length:t.children.length;let s=-1;const l=[];for(;++s<a;){const n=t.children[s],r={},a=i?i[s]:void 0;a&&(r.align=a);let c={type:"element",tagName:o,properties:r,children:[]};n&&(c.children=e.all(n),e.patch(n,c),c=e.applyData(n,c)),l.push(c)}const c={type:"element",tagName:"tr",properties:{},children:e.wrap(l,!0)};return e.patch(t,c),e.applyData(t,c)},text:function(e,t){const n={type:"text",value:un(String(t.value))};return e.patch(t,n),e.applyData(t,n)},thematicBreak:function(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)},toml:pn,yaml:pn,definition:pn,footnoteDefinition:pn};function pn(){}const fn={}.hasOwnProperty,mn={};function gn(e,t){e.position&&(t.position=function(e){const t=q(e),n=V(e);if(t&&n)return{start:t,end:n}}(e))}function yn(e,t){let n=t;if(e&&e.data){const t=e.data.hName,r=e.data.hChildren,o=e.data.hProperties;"string"==typeof t&&("element"===n.type?n.tagName=t:n={type:"element",tagName:t,properties:{},children:"children"in n?n.children:[n]}),"element"===n.type&&o&&Object.assign(n.properties,nn(o)),"children"in n&&n.children&&null!=r&&(n.children=r)}return n}function vn(e,t){const n=t.data||{},r=!("value"in t)||fn.call(n,"hProperties")||fn.call(n,"hChildren")?{type:"element",tagName:"div",properties:{},children:e.all(t)}:{type:"text",value:t.value};return e.patch(t,r),e.applyData(t,r)}function bn(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:"\n"});++r<e.length;)r&&n.push({type:"text",value:"\n"}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:"\n"}),n}function xn(e){let t=0,n=e.charCodeAt(t);for(;9===n||32===n;)t++,n=e.charCodeAt(t);return e.slice(t)}function kn(e,t){const n=function(e,t){const n=t||mn,r=new Map,o=new Map,i=new Map,a={...dn,...n.handlers},s={all:function(e){const t=[];if("children"in e){const n=e.children;let r=-1;for(;++r<n.length;){const o=s.one(n[r],e);if(o){if(r&&"break"===n[r-1].type&&(Array.isArray(o)||"text"!==o.type||(o.value=xn(o.value)),!Array.isArray(o)&&"element"===o.type)){const e=o.children[0];e&&"text"===e.type&&(e.value=xn(e.value))}Array.isArray(o)?t.push(...o):t.push(o)}}}return t},applyData:yn,definitionById:r,footnoteById:o,footnoteCounts:i,footnoteOrder:[],handlers:a,one:function(e,t){const n=e.type,r=s.handlers[n];if(fn.call(s.handlers,n)&&r)return r(s,e,t);if(s.options.passThrough&&s.options.passThrough.includes(n)){if("children"in e){const{children:t,...n}=e,r=nn(n);return r.children=s.all(e),r}return nn(e)}return(s.options.unknownHandler||vn)(s,e,t)},options:n,patch:gn,wrap:bn};return(0,sn.YR)(e,function(e){if("definition"===e.type||"footnoteDefinition"===e.type){const t="definition"===e.type?r:o,n=String(e.identifier).toUpperCase();t.has(n)||t.set(n,e)}}),s}(e,t),r=n.one(e,void 0),o=function(e){const t="string"==typeof e.options.clobberPrefix?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||on,r=e.options.footnoteBackLabel||an,o=e.options.footnoteLabel||"Footnotes",i=e.options.footnoteLabelTagName||"h2",a=e.options.footnoteLabelProperties||{className:["sr-only"]},s=[];let l=-1;for(;++l<e.footnoteOrder.length;){const o=e.footnoteById.get(e.footnoteOrder[l]);if(!o)continue;const i=e.all(o),a=String(o.identifier).toUpperCase(),c=rn(a.toLowerCase());let u=0;const h=[],d=e.footnoteCounts.get(a);for(;void 0!==d&&++u<=d;){h.length>0&&h.push({type:"text",value:" "});let e="string"==typeof n?n:n(l,u);"string"==typeof e&&(e={type:"text",value:e}),h.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+c+(u>1?"-"+u:""),dataFootnoteBackref:"",ariaLabel:"string"==typeof r?r:r(l,u),className:["data-footnote-backref"]},children:Array.isArray(e)?e:[e]})}const p=i[i.length-1];if(p&&"element"===p.type&&"p"===p.tagName){const e=p.children[p.children.length-1];e&&"text"===e.type?e.value+=" ":p.children.push({type:"text",value:" "}),p.children.push(...h)}else i.push(...h);const f={type:"element",tagName:"li",properties:{id:t+"fn-"+c},children:e.wrap(i,!0)};e.patch(o,f),s.push(f)}if(0!==s.length)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:i,properties:{...nn(a),id:"footnote-label"},children:[{type:"text",value:o}]},{type:"text",value:"\n"},{type:"element",tagName:"ol",properties:{},children:e.wrap(s,!0)},{type:"text",value:"\n"}]}}(n),a=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return o&&((0,i.ok)("children"in a),a.children.push({type:"text",value:"\n"},o)),a}function wn(e,t){return e&&"run"in e?async function(n,r){const o=kn(n,{file:r,...t});await e.run(o,r)}:function(n,r){return kn(n,{file:r,...e||t})}}function Sn(e){if(e)throw e}var In=n(849);function En(e){if("object"!=typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||Symbol.iterator in e)}const An=function(e,t){if(void 0!==t&&"string"!=typeof t)throw new TypeError('"ext" argument must be a string');Nn(e);let n,r=0,o=-1,i=e.length;if(void 0===t||0===t.length||t.length>e.length){for(;i--;)if(47===e.codePointAt(i)){if(n){r=i+1;break}}else o<0&&(n=!0,o=i+1);return o<0?"":e.slice(r,o)}if(t===e)return"";let a=-1,s=t.length-1;for(;i--;)if(47===e.codePointAt(i)){if(n){r=i+1;break}}else a<0&&(n=!0,a=i+1),s>-1&&(e.codePointAt(i)===t.codePointAt(s--)?s<0&&(o=i):(s=-1,o=a));return r===o?o=a:o<0&&(o=e.length),e.slice(r,o)},On=function(e){if(Nn(e),0===e.length)return".";let t,n=-1,r=e.length;for(;--r;)if(47===e.codePointAt(r)){if(t){n=r;break}}else t||(t=!0);return n<0?47===e.codePointAt(0)?"/":".":1===n&&47===e.codePointAt(0)?"//":e.slice(0,n)},Pn=function(e){Nn(e);let t,n=e.length,r=-1,o=0,i=-1,a=0;for(;n--;){const s=e.codePointAt(n);if(47!==s)r<0&&(t=!0,r=n+1),46===s?i<0?i=n:1!==a&&(a=1):i>-1&&(a=-1);else if(t){o=n+1;break}}return i<0||r<0||0===a||1===a&&i===r-1&&i===o+1?"":e.slice(i,r)},Tn=function(...e){let t,n=-1;for(;++n<e.length;)Nn(e[n]),e[n]&&(t=void 0===t?e[n]:t+"/"+e[n]);return void 0===t?".":function(e){Nn(e);const t=47===e.codePointAt(0);let n=function(e,t){let n,r,o="",i=0,a=-1,s=0,l=-1;for(;++l<=e.length;){if(l<e.length)n=e.codePointAt(l);else{if(47===n)break;n=47}if(47===n){if(a===l-1||1===s);else if(a!==l-1&&2===s){if(o.length<2||2!==i||46!==o.codePointAt(o.length-1)||46!==o.codePointAt(o.length-2))if(o.length>2){if(r=o.lastIndexOf("/"),r!==o.length-1){r<0?(o="",i=0):(o=o.slice(0,r),i=o.length-1-o.lastIndexOf("/")),a=l,s=0;continue}}else if(o.length>0){o="",i=0,a=l,s=0;continue}t&&(o=o.length>0?o+"/..":"..",i=2)}else o.length>0?o+="/"+e.slice(a+1,l):o=e.slice(a+1,l),i=l-a-1;a=l,s=0}else 46===n&&s>-1?s++:s=-1}return o}(e,!t);return 0!==n.length||t||(n="."),n.length>0&&47===e.codePointAt(e.length-1)&&(n+="/"),t?"/"+n:n}(t)},Cn="/";function Nn(e){if("string"!=typeof e)throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const Dn=function(){return"/"};function _n(e){return Boolean(null!==e&&"object"==typeof e&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&void 0===e.auth)}const Ln=["history","path","basename","stem","extname","dirname"];class Rn{constructor(e){let t;t=e?_n(e)?{path:e}:"string"==typeof e||function(e){return Boolean(e&&"object"==typeof e&&"byteLength"in e&&"byteOffset"in e)}(e)?{value:e}:e:{},this.cwd="cwd"in t?"":Dn(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let n,r=-1;for(;++r<Ln.length;){const e=Ln[r];e in t&&void 0!==t[e]&&null!==t[e]&&(this[e]="history"===e?[...t[e]]:t[e])}for(n in t)Ln.includes(n)||(this[n]=t[n])}get basename(){return"string"==typeof this.path?An(this.path):void 0}set basename(e){Fn(e,"basename"),Wn(e,"basename"),this.path=Tn(this.dirname||"",e)}get dirname(){return"string"==typeof this.path?On(this.path):void 0}set dirname(e){Hn(this.basename,"dirname"),this.path=Tn(e||"",this.basename)}get extname(){return"string"==typeof this.path?Pn(this.path):void 0}set extname(e){if(Wn(e,"extname"),Hn(this.dirname,"extname"),e){if(46!==e.codePointAt(0))throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Tn(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){_n(e)&&(e=function(e){if("string"==typeof e)e=new URL(e);else if(!_n(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if("file:"!==e.protocol){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return function(e){if(""!==e.hostname){const e=new TypeError('File URL host must be "localhost" or empty on darwin');throw e.code="ERR_INVALID_FILE_URL_HOST",e}const t=e.pathname;let n=-1;for(;++n<t.length;)if(37===t.codePointAt(n)&&50===t.codePointAt(n+1)){const e=t.codePointAt(n+2);if(70===e||102===e){const e=new TypeError("File URL path must not include encoded / characters");throw e.code="ERR_INVALID_FILE_URL_PATH",e}}return decodeURIComponent(t)}(e)}(e)),Fn(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return"string"==typeof this.path?An(this.path,this.extname):void 0}set stem(e){Fn(e,"stem"),Wn(e,"stem"),this.path=Tn(this.dirname||"",e+(this.extname||""))}fail(e,t,n){const r=this.message(e,t,n);throw r.fatal=!0,r}info(e,t,n){const r=this.message(e,t,n);return r.fatal=void 0,r}message(e,t,n){const r=new Z(e,t,n);return this.path&&(r.name=this.path+":"+r.name,r.file=this.path),r.fatal=!1,this.messages.push(r),r}toString(e){return void 0===this.value?"":"string"==typeof this.value?this.value:new TextDecoder(e||void 0).decode(this.value)}}function Wn(e,t){if(e&&e.includes(Cn))throw new Error("`"+t+"` cannot be a path: did not expect `"+Cn+"`")}function Fn(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function Hn(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}const Mn=function(e){const t=this.constructor.prototype,n=t[e],r=function(){return n.apply(r,arguments)};return Object.setPrototypeOf(r,t),r},zn={}.hasOwnProperty;class jn extends Mn{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=function(){const e=[],t={run:function(...t){let n=-1;const r=t.pop();if("function"!=typeof r)throw new TypeError("Expected function as last argument, not "+r);!function o(i,...a){const s=e[++n];let l=-1;if(i)r(i);else{for(;++l<t.length;)null!==a[l]&&void 0!==a[l]||(a[l]=t[l]);t=a,s?function(e,t){let n;return function(...t){const i=e.length>t.length;let a;i&&t.push(r);try{a=e.apply(this,t)}catch(e){if(i&&n)throw e;return r(e)}i||(a&&a.then&&"function"==typeof a.then?a.then(o,r):a instanceof Error?r(a):o(a))};function r(e,...r){n||(n=!0,t(e,...r))}function o(e){r(null,e)}}(s,o)(...a):r(null,...a)}}(null,...t)},use:function(n){if("function"!=typeof n)throw new TypeError("Expected `middelware` to be a function, not "+n);return e.push(n),t}};return t}()}copy(){const e=new jn;let t=-1;for(;++t<this.attachers.length;){const n=this.attachers[t];e.use(...n)}return e.data(In(!0,{},this.namespace)),e}data(e,t){return"string"==typeof e?2===arguments.length?($n("data",this.frozen),this.namespace[e]=t,this):zn.call(this.namespace,e)&&this.namespace[e]||void 0:e?($n("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[t,...n]=this.attachers[this.freezeIndex];if(!1===n[0])continue;!0===n[0]&&(n[0]=void 0);const r=t.call(e,...n);"function"==typeof r&&this.transformers.use(r)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const t=Gn(e),n=this.parser||this.Parser;return Yn("parse",n),n(String(t),t)}process(e,t){const n=this;return this.freeze(),Yn("process",this.parser||this.Parser),Un("process",this.compiler||this.Compiler),t?r(void 0,t):new Promise(r);function r(r,o){const a=Gn(e),s=n.parse(a);function l(e,n){e||!n?o(e):r?r(n):((0,i.ok)(t,"`done` is defined if `resolve` is not"),t(void 0,n))}n.run(s,a,function(e,t,r){if(e||!t||!r)return l(e);const o=t,i=n.stringify(o,r);var a;"string"==typeof(a=i)||function(e){return Boolean(e&&"object"==typeof e&&"byteLength"in e&&"byteOffset"in e)}(a)?r.value=i:r.result=i,l(e,r)})}}processSync(e){let t,n=!1;return this.freeze(),Yn("processSync",this.parser||this.Parser),Un("processSync",this.compiler||this.Compiler),this.process(e,function(e,r){n=!0,Sn(e),t=r}),qn("processSync","process",n),(0,i.ok)(t,"we either bailed on an error or have a tree"),t}run(e,t,n){Vn(e),this.freeze();const r=this.transformers;return n||"function"!=typeof t||(n=t,t=void 0),n?o(void 0,n):new Promise(o);function o(o,a){(0,i.ok)("function"!=typeof t,"`file` canâ€™t be a `done` anymore, we checked");const s=Gn(t);r.run(e,s,function(t,r,s){const l=r||e;t?a(t):o?o(l):((0,i.ok)(n,"`done` is defined if `resolve` is not"),n(void 0,l,s))})}}runSync(e,t){let n,r=!1;return this.run(e,t,function(e,t){Sn(e),n=t,r=!0}),qn("runSync","run",r),(0,i.ok)(n,"we either bailed on an error or have a tree"),n}stringify(e,t){this.freeze();const n=Gn(t),r=this.compiler||this.Compiler;return Un("stringify",r),Vn(e),r(e,n)}use(e,...t){const n=this.attachers,r=this.namespace;if($n("use",this.frozen),null==e);else if("function"==typeof e)s(e,t);else{if("object"!=typeof e)throw new TypeError("Expected usable value, not `"+e+"`");Array.isArray(e)?a(e):i(e)}return this;function o(e){if("function"==typeof e)s(e,[]);else{if("object"!=typeof e)throw new TypeError("Expected usable value, not `"+e+"`");if(Array.isArray(e)){const[t,...n]=e;s(t,n)}else i(e)}}function i(e){if(!("plugins"in e)&&!("settings"in e))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");a(e.plugins),e.settings&&(r.settings=In(!0,r.settings,e.settings))}function a(e){let t=-1;if(null==e);else{if(!Array.isArray(e))throw new TypeError("Expected a list of plugins, not `"+e+"`");for(;++t<e.length;)o(e[t])}}function s(e,t){let r=-1,o=-1;for(;++r<n.length;)if(n[r][0]===e){o=r;break}if(-1===o)n.push([e,...t]);else if(t.length>0){let[r,...i]=t;const a=n[o][1];En(a)&&En(r)&&(r=In(!0,a,r)),n[o]=[e,r,...i]}}}}const Bn=(new jn).freeze();function Yn(e,t){if("function"!=typeof t)throw new TypeError("Cannot `"+e+"` without `parser`")}function Un(e,t){if("function"!=typeof t)throw new TypeError("Cannot `"+e+"` without `compiler`")}function $n(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function Vn(e){if(!En(e)||"string"!=typeof e.type)throw new TypeError("Expected node, got `"+e+"`")}function qn(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function Gn(e){return function(e){return Boolean(e&&"object"==typeof e&&"message"in e&&"messages"in e)}(e)?e:new Rn(e)}const Kn="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",Jn=[],Qn={allowDangerousHtml:!0},Xn=/^(https?|ircs?|mailto|xmpp)$/i,Zn=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function er(e){const t=function(e){const t=e.rehypePlugins||Jn,n=e.remarkPlugins||Jn,r=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...Qn}:Qn;return Bn().use(qt).use(n).use(wn,r).use(t)}(e),n=function(e){const t=e.children||"",n=new Rn;return"string"==typeof t?n.value=t:(0,i.HB)("Unexpected value `"+t+"` for `children` prop, expected `string`"),n}(e);return function(e,t){const n=t.allowedElements,r=t.allowElement,o=t.components,a=t.disallowedElements,s=t.skipHtml,l=t.unwrapDisallowed,c=t.urlTransform||tr;for(const e of Zn)Object.hasOwn(t,e.from)&&(0,i.HB)("Unexpected `"+e.from+"` prop, "+(e.to?"use `"+e.to+"` instead":"remove it")+" (see <"+Kn+"#"+e.id+"> for more info)");return n&&a&&(0,i.HB)("Unexpected combined `allowedElements` and `disallowedElements`, expected one or the other"),(0,sn.YR)(e,function(e,t,o){if("raw"===e.type&&o&&"number"==typeof t)return s?o.children.splice(t,1):o.children[t]={type:"text",value:e.value},t;if("element"===e.type){let t;for(t in me)if(Object.hasOwn(me,t)&&Object.hasOwn(e.properties,t)){const n=e.properties[t],r=me[t];(null===r||r.includes(e.tagName))&&(e.properties[t]=c(String(n||""),t,e))}}if("element"===e.type){let i=n?!n.includes(e.tagName):!!a&&a.includes(e.tagName);if(!i&&r&&"number"==typeof t&&(i=!r(e,t,o)),i&&o&&"number"==typeof t)return l&&e.children?o.children.splice(t,1,...e.children):o.children.splice(t,1),t}}),function(e,t){if(!t||void 0===t.Fragment)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let r;if(t.development){if("function"!=typeof t.jsxDEV)throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=function(e,t){return function(n,r,o,i){const a=Array.isArray(o.children),s=q(n);return t(r,o,i,a,{columnNumber:s?s.column-1:void 0,fileName:e,lineNumber:s?s.line:void 0},void 0)}}(n,t.jsxDEV)}else{if("function"!=typeof t.jsx)throw new TypeError("Expected `jsx` in production options");if("function"!=typeof t.jsxs)throw new TypeError("Expected `jsxs` in production options");o=t.jsx,i=t.jsxs,r=function(e,t,n,r){const a=Array.isArray(n.children)?i:o;return r?a(t,n,r):a(t,n)}}var o,i;const a={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:!1!==t.passKeys,passNode:t.passNode||!1,schema:"svg"===t.space?H:F,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:!1!==t.tableCellAlignToStyle},s=ae(a,e,void 0);return s&&"string"!=typeof s?s:a.create(e,a.Fragment,{children:s||void 0},void 0)}(e,{Fragment:ge.Fragment,components:o,ignoreInvalidStyle:!0,jsx:ge.jsx,jsxs:ge.jsxs,passKeys:!0,passNode:!0})}(t.runSync(t.parse(n),n),e)}function tr(e){const t=e.indexOf(":"),n=e.indexOf("?"),r=e.indexOf("#"),o=e.indexOf("/");return-1===t||-1!==o&&t>o||-1!==n&&t>n||-1!==r&&t>r||Xn.test(e.slice(0,t))?e:""}},534:(e,t,n)=>{n.d(t,{d:()=>o});const r={};function o(e,t){const n=t||r;return i(e,"boolean"!=typeof n.includeImageAlt||n.includeImageAlt,"boolean"!=typeof n.includeHtml||n.includeHtml)}function i(e,t,n){if(function(e){return Boolean(e&&"object"==typeof e)}(e)){if("value"in e)return"html"!==e.type||n?e.value:"";if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return a(e.children,t,n)}return Array.isArray(e)?a(e,t,n):""}function a(e,t,n){const r=[];let o=-1;for(;++o<e.length;)r[o]=i(e[o],t,n);return r.join("")}},535:(e,t,n)=>{function r(e,t,n){const r=[];let o=-1;for(;++o<e.length;){const i=e[o].resolveAll;i&&!r.includes(i)&&(t=i(t,n),r.push(i))}return t}n.d(t,{W:()=>r})},540:(e,t,n)=>{e.exports=n(287)},574:(e,t,n)=>{n.d(t,{BM:()=>s,CW:()=>r,Ee:()=>h,HP:()=>u,JQ:()=>a,Ny:()=>f,On:()=>d,cx:()=>i,es:()=>p,lV:()=>o,ok:()=>l,ol:()=>c});const r=m(/[A-Za-z]/),o=m(/[\dA-Za-z]/),i=m(/[#-'*+\--9=?A-Z^-~]/);function a(e){return null!==e&&(e<32||127===e)}const s=m(/\d/),l=m(/[\dA-Fa-f]/),c=m(/[!-/:-@[-`{-~]/);function u(e){return null!==e&&e<-2}function h(e){return null!==e&&(e<0||32===e)}function d(e){return-2===e||-1===e||32===e}const p=m(/\p{P}|\p{S}/u),f=m(/\s/);function m(e){return function(t){return null!==t&&t>-1&&e.test(String.fromCharCode(t))}}},601:e=>{e.exports=function(e){return e[1]}},638:(e,t,n)=>{function r(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}n.d(t,{B:()=>r})},656:(e,t,n)=>{n.d(t,{dc:()=>a,VG:()=>l});var r=n(143);const o=[],i=!0,a=!1,s="skip";function l(e,t,n,l){let c;"function"==typeof t&&"function"!=typeof n?(l=n,n=t):c=t;const u=(0,r.C)(c),h=l?-1:1;!function e(r,c,d){const p=r&&"object"==typeof r?r:{};if("string"==typeof p.type){const e="string"==typeof p.tagName?p.tagName:"string"==typeof p.name?p.name:void 0;Object.defineProperty(f,"name",{value:"node ("+r.type+(e?"<"+e+">":"")+")"})}return f;function f(){let p,f,m,g=o;if((!t||u(r,c,d[d.length-1]||void 0))&&(g=function(e){return Array.isArray(e)?e:"number"==typeof e?[i,e]:null==e?o:[e]}(n(r,d)),g[0]===a))return g;if("children"in r&&r.children){const t=r;if(t.children&&g[0]!==s)for(f=(l?t.children.length:-1)+h,m=d.concat(t);f>-1&&f<t.children.length;){const n=t.children[f];if(p=e(n,f,m)(),p[0]===a)return p;f="number"==typeof p[1]?p[1]:f+h}}return g}}(e,void 0,[])()}},659:e=>{var t={};e.exports=function(e,n){var r=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},691:(e,t,n)=>{n.d(t,{S:()=>o});var r=n(574);function o(e){return null===e||(0,r.Ee)(e)||(0,r.Ny)(e)?1:(0,r.es)(e)?2:void 0}},777:(e,t,n)=>{function r(e,t,n,r){const o=e.length;let i,a=0;if(t=t<0?-t>o?0:o+t:t>o?o:t,n=n>0?n:0,r.length<1e4)i=Array.from(r),i.unshift(t,n),e.splice(...i);else for(n&&e.splice(t,n);a<r.length;)i=r.slice(a,a+1e4),i.unshift(t,0),e.splice(...i),a+=1e4,t+=1e4}function o(e,t){return e.length>0?(r(e,e.length,0,t),e):t}n.d(t,{V:()=>o,m:()=>r})},825:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var o=void 0!==n.layer;o&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,o&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var i=n.sourceMap;i&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),t.styleTagTransform(r,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},848:(e,t,n)=>{e.exports=n(20)},849:e=>{var t=Object.prototype.hasOwnProperty,n=Object.prototype.toString,r=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=function(e){return"function"==typeof Array.isArray?Array.isArray(e):"[object Array]"===n.call(e)},a=function(e){if(!e||"[object Object]"!==n.call(e))return!1;var r,o=t.call(e,"constructor"),i=e.constructor&&e.constructor.prototype&&t.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!o&&!i)return!1;for(r in e);return void 0===r||t.call(e,r)},s=function(e,t){r&&"__proto__"===t.name?r(e,t.name,{enumerable:!0,configurable:!0,value:t.newValue,writable:!0}):e[t.name]=t.newValue},l=function(e,n){if("__proto__"===n){if(!t.call(e,n))return;if(o)return o(e,n).value}return e[n]};e.exports=function e(){var t,n,r,o,c,u,h=arguments[0],d=1,p=arguments.length,f=!1;for("boolean"==typeof h&&(f=h,h=arguments[1]||{},d=2),(null==h||"object"!=typeof h&&"function"!=typeof h)&&(h={});d<p;++d)if(null!=(t=arguments[d]))for(n in t)r=l(h,n),h!==(o=l(t,n))&&(f&&o&&(a(o)||(c=i(o)))?(c?(c=!1,u=r&&i(r)?r:[]):u=r&&a(r)?r:{},s(h,{name:n,newValue:e(f,u,o)})):void 0!==o&&s(h,{name:n,newValue:o}));return h}},917:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.camelCase=void 0;var n=/^--[a-zA-Z0-9_-]+$/,r=/-([a-z])/g,o=/^[^-]+$/,i=/^-(webkit|moz|ms|o|khtml)-/,a=/^-(ms)-/,s=function(e,t){return t.toUpperCase()},l=function(e,t){return"".concat(t,"-")};t.camelCase=function(e,t){return void 0===t&&(t={}),function(e){return!e||o.test(e)||n.test(e)}(e)?e:(e=e.toLowerCase(),(e=t.reactCompat?e.replace(a,l):e.replace(i,l)).replace(r,s))}},969:(e,t,n)=>{function r(e,t){const n=String(e);if("string"!=typeof t)throw new TypeError("Expected character");let r=0,o=n.indexOf(t);for(;-1!==o;)r++,o=n.indexOf(t,o+t.length);return r}n.d(t,{A:()=>st});var o=n(471),i=n(574),a=n(656),s=n(143);function l(e){return"string"==typeof e?new RegExp(function(e){if("string"!=typeof e)throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}(e),"g"):e}function c(e){return"function"==typeof e?e:function(){return e}}const u="phrasing",h=["autolink","link","image","label"];function d(e){this.enter({type:"link",title:null,url:"",children:[]},e)}function p(e){this.config.enter.autolinkProtocol.call(this,e)}function f(e){this.config.exit.autolinkProtocol.call(this,e)}function m(e){this.config.exit.data.call(this,e);const t=this.stack[this.stack.length-1];(0,o.ok)("link"===t.type),t.url="http://"+this.sliceSerialize(e)}function g(e){this.config.exit.autolinkEmail.call(this,e)}function y(e){this.exit(e)}function v(e){!function(e,t,n){const r=n||{},o=(0,s.C)(r.ignore||[]),i=function(e){const t=[];if(!Array.isArray(e))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!e[0]||Array.isArray(e[0])?e:[e];let r=-1;for(;++r<n.length;){const e=n[r];t.push([l(e[0]),c(e[1])])}return t}(t);let u=-1;for(;++u<i.length;)(0,a.VG)(e,"text",h);function h(e,t){let n,r=-1;for(;++r<t.length;){const e=t[r],i=n?n.children:void 0;if(o(e,i?i.indexOf(e):void 0,n))return;n=e}if(n)return function(e,t){const n=t[t.length-1],r=i[u][0],o=i[u][1];let a=0;const s=n.children.indexOf(e);let l=!1,c=[];r.lastIndex=0;let h=r.exec(e.value);for(;h;){const n=h.index,i={index:h.index,input:h.input,stack:[...t,e]};let s=o(...h,i);if("string"==typeof s&&(s=s.length>0?{type:"text",value:s}:void 0),!1===s?r.lastIndex=n+1:(a!==n&&c.push({type:"text",value:e.value.slice(a,n)}),Array.isArray(s)?c.push(...s):s&&c.push(s),a=n+h[0].length,l=!0),!r.global)break;h=r.exec(e.value)}return l?(a<e.value.length&&c.push({type:"text",value:e.value.slice(a)}),n.children.splice(s,1,...c)):c=[e],s+c.length}(e,t)}}(e,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,b],[/(?<=^|\s|\p{P}|\p{S})([-.\w+]+)@([-\w]+(?:\.[-\w]+)+)/gu,x]],{ignore:["link","linkReference"]})}function b(e,t,n,o,i){let a="";if(!k(i))return!1;if(/^w/i.test(t)&&(n=t+n,t="",a="http://"),!function(e){const t=e.split(".");return!(t.length<2||t[t.length-1]&&(/_/.test(t[t.length-1])||!/[a-zA-Z\d]/.test(t[t.length-1]))||t[t.length-2]&&(/_/.test(t[t.length-2])||!/[a-zA-Z\d]/.test(t[t.length-2])))}(n))return!1;const s=function(e){const t=/[!"&'),.:;<>?\]}]+$/.exec(e);if(!t)return[e,void 0];e=e.slice(0,t.index);let n=t[0],o=n.indexOf(")");const i=r(e,"(");let a=r(e,")");for(;-1!==o&&i>a;)e+=n.slice(0,o+1),n=n.slice(o+1),o=n.indexOf(")"),a++;return[e,n]}(n+o);if(!s[0])return!1;const l={type:"link",title:null,url:a+t+s[0],children:[{type:"text",value:t+s[0]}]};return s[1]?[l,{type:"text",value:s[1]}]:l}function x(e,t,n,r){return!(!k(r,!0)||/[-\d_]$/.test(n))&&{type:"link",title:null,url:"mailto:"+t+"@"+n,children:[{type:"text",value:t+"@"+n}]}}function k(e,t){const n=e.input.charCodeAt(e.index-1);return(0===e.index||(0,i.Ny)(n)||(0,i.es)(n))&&(!t||47!==n)}var w=n(638);function S(){this.buffer()}function I(e){this.enter({type:"footnoteReference",identifier:"",label:""},e)}function E(){this.buffer()}function A(e){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},e)}function O(e){const t=this.resume(),n=this.stack[this.stack.length-1];(0,o.ok)("footnoteReference"===n.type),n.identifier=(0,w.B)(this.sliceSerialize(e)).toLowerCase(),n.label=t}function P(e){this.exit(e)}function T(e){const t=this.resume(),n=this.stack[this.stack.length-1];(0,o.ok)("footnoteDefinition"===n.type),n.identifier=(0,w.B)(this.sliceSerialize(e)).toLowerCase(),n.label=t}function C(e){this.exit(e)}function N(e,t,n,r){const o=n.createTracker(r);let i=o.move("[^");const a=n.enter("footnoteReference"),s=n.enter("reference");return i+=o.move(n.safe(n.associationId(e),{after:"]",before:i})),s(),a(),i+=o.move("]"),i}function D(e){let t=!1;return e&&e.firstLineBlank&&(t=!0),{handlers:{footnoteDefinition:function(e,n,r,o){const i=r.createTracker(o);let a=i.move("[^");const s=r.enter("footnoteDefinition"),l=r.enter("label");return a+=i.move(r.safe(r.associationId(e),{before:a,after:"]"})),l(),a+=i.move("]:"),e.children&&e.children.length>0&&(i.shift(4),a+=i.move((t?"\n":" ")+r.indentLines(r.containerFlow(e,i.current()),t?L:_))),s(),a},footnoteReference:N},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]}}function _(e,t,n){return 0===t?e:L(e,0,n)}function L(e,t,n){return(n?"":"    ")+e}N.peek=function(){return"["};const R=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];function W(e){this.enter({type:"delete",children:[]},e)}function F(e){this.exit(e)}function H(e,t,n,r){const o=n.createTracker(r),i=n.enter("strikethrough");let a=o.move("~~");return a+=n.containerPhrasing(e,{...o.current(),before:a,after:"~"}),a+=o.move("~~"),i(),a}function M(e){return e.length}function z(e){return null==e?"":String(e)}function j(e){const t="string"==typeof e?e.codePointAt(0):0;return 67===t||99===t?99:76===t||108===t?108:82===t||114===t?114:0}function B(e,t,n){return">"+(n?"":" ")+e}function Y(e,t){return U(e,t.inConstruct,!0)&&!U(e,t.notInConstruct,!1)}function U(e,t,n){if("string"==typeof t&&(t=[t]),!t||0===t.length)return n;let r=-1;for(;++r<t.length;)if(e.includes(t[r]))return!0;return!1}function $(e,t,n,r){let o=-1;for(;++o<n.unsafe.length;)if("\n"===n.unsafe[o].character&&Y(n.stack,n.unsafe[o]))return/[ \t]/.test(r.before)?"":" ";return"\\\n"}function V(e,t,n){return(n?"":"    ")+e}function q(e){const t=e.options.quote||'"';if('"'!==t&&"'"!==t)throw new Error("Cannot serialize title with `"+t+"` for `options.quote`, expected `\"`, or `'`");return t}function G(e){return"&#x"+e.toString(16).toUpperCase()+";"}H.peek=function(){return"~"};var K=n(691);function J(e,t,n){const r=(0,K.S)(e),o=(0,K.S)(t);return void 0===r?void 0===o?"_"===n?{inside:!0,outside:!0}:{inside:!1,outside:!1}:1===o?{inside:!0,outside:!0}:{inside:!1,outside:!0}:1===r?void 0===o?{inside:!1,outside:!1}:1===o?{inside:!0,outside:!0}:{inside:!1,outside:!1}:void 0===o?{inside:!1,outside:!1}:1===o?{inside:!0,outside:!1}:{inside:!1,outside:!1}}function Q(e,t,n,r){const o=function(e){const t=e.options.emphasis||"*";if("*"!==t&&"_"!==t)throw new Error("Cannot serialize emphasis with `"+t+"` for `options.emphasis`, expected `*`, or `_`");return t}(n),i=n.enter("emphasis"),a=n.createTracker(r),s=a.move(o);let l=a.move(n.containerPhrasing(e,{after:o,before:s,...a.current()}));const c=l.charCodeAt(0),u=J(r.before.charCodeAt(r.before.length-1),c,o);u.inside&&(l=G(c)+l.slice(1));const h=l.charCodeAt(l.length-1),d=J(r.after.charCodeAt(0),h,o);d.inside&&(l=l.slice(0,-1)+G(h));const p=a.move(o);return i(),n.attentionEncodeSurroundingInfo={after:d.outside,before:u.outside},s+l+p}Q.peek=function(e,t,n){return n.options.emphasis||"*"};var X=n(970),Z=n(534);function ee(e){return e.value||""}function te(e,t,n,r){const o=q(n),i='"'===o?"Quote":"Apostrophe",a=n.enter("image");let s=n.enter("label");const l=n.createTracker(r);let c=l.move("![");return c+=l.move(n.safe(e.alt,{before:c,after:"]",...l.current()})),c+=l.move("]("),s(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(s=n.enter("destinationLiteral"),c+=l.move("<"),c+=l.move(n.safe(e.url,{before:c,after:">",...l.current()})),c+=l.move(">")):(s=n.enter("destinationRaw"),c+=l.move(n.safe(e.url,{before:c,after:e.title?" ":")",...l.current()}))),s(),e.title&&(s=n.enter(`title${i}`),c+=l.move(" "+o),c+=l.move(n.safe(e.title,{before:c,after:o,...l.current()})),c+=l.move(o),s()),c+=l.move(")"),a(),c}function ne(e,t,n,r){const o=e.referenceType,i=n.enter("imageReference");let a=n.enter("label");const s=n.createTracker(r);let l=s.move("![");const c=n.safe(e.alt,{before:l,after:"]",...s.current()});l+=s.move(c+"]["),a();const u=n.stack;n.stack=[],a=n.enter("reference");const h=n.safe(n.associationId(e),{before:l,after:"]",...s.current()});return a(),n.stack=u,i(),"full"!==o&&c&&c===h?"shortcut"===o?l=l.slice(0,-1):l+=s.move("]"):l+=s.move(h+"]"),l}function re(e,t,n){let r=e.value||"",o="`",i=-1;for(;new RegExp("(^|[^`])"+o+"([^`]|$)").test(r);)o+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++i<n.unsafe.length;){const e=n.unsafe[i],t=n.compilePattern(e);let o;if(e.atBreak)for(;o=t.exec(r);){let e=o.index;10===r.charCodeAt(e)&&13===r.charCodeAt(e-1)&&e--,r=r.slice(0,e)+" "+r.slice(o.index+1)}}return o+r+o}function oe(e,t){const n=(0,Z.d)(e);return Boolean(!t.options.resourceLink&&e.url&&!e.title&&e.children&&1===e.children.length&&"text"===e.children[0].type&&(n===e.url||"mailto:"+n===e.url)&&/^[a-z][a-z+.-]+:/i.test(e.url)&&!/[\0- <>\u007F]/.test(e.url))}function ie(e,t,n,r){const o=q(n),i='"'===o?"Quote":"Apostrophe",a=n.createTracker(r);let s,l;if(oe(e,n)){const t=n.stack;n.stack=[],s=n.enter("autolink");let r=a.move("<");return r+=a.move(n.containerPhrasing(e,{before:r,after:">",...a.current()})),r+=a.move(">"),s(),n.stack=t,r}s=n.enter("link"),l=n.enter("label");let c=a.move("[");return c+=a.move(n.containerPhrasing(e,{before:c,after:"](",...a.current()})),c+=a.move("]("),l(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(l=n.enter("destinationLiteral"),c+=a.move("<"),c+=a.move(n.safe(e.url,{before:c,after:">",...a.current()})),c+=a.move(">")):(l=n.enter("destinationRaw"),c+=a.move(n.safe(e.url,{before:c,after:e.title?" ":")",...a.current()}))),l(),e.title&&(l=n.enter(`title${i}`),c+=a.move(" "+o),c+=a.move(n.safe(e.title,{before:c,after:o,...a.current()})),c+=a.move(o),l()),c+=a.move(")"),s(),c}function ae(e,t,n,r){const o=e.referenceType,i=n.enter("linkReference");let a=n.enter("label");const s=n.createTracker(r);let l=s.move("[");const c=n.containerPhrasing(e,{before:l,after:"]",...s.current()});l+=s.move(c+"]["),a();const u=n.stack;n.stack=[],a=n.enter("reference");const h=n.safe(n.associationId(e),{before:l,after:"]",...s.current()});return a(),n.stack=u,i(),"full"!==o&&c&&c===h?"shortcut"===o?l=l.slice(0,-1):l+=s.move("]"):l+=s.move(h+"]"),l}function se(e){const t=e.options.bullet||"*";if("*"!==t&&"+"!==t&&"-"!==t)throw new Error("Cannot serialize items with `"+t+"` for `options.bullet`, expected `*`, `+`, or `-`");return t}function le(e){const t=e.options.rule||"*";if("*"!==t&&"-"!==t&&"_"!==t)throw new Error("Cannot serialize rules with `"+t+"` for `options.rule`, expected `*`, `-`, or `_`");return t}ee.peek=function(){return"<"},te.peek=function(){return"!"},ne.peek=function(){return"!"},re.peek=function(){return"`"},ie.peek=function(e,t,n){return oe(e,n)?"<":"["},ae.peek=function(){return"["};const ce=(0,s.C)(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function ue(e,t,n,r){const o=function(e){const t=e.options.strong||"*";if("*"!==t&&"_"!==t)throw new Error("Cannot serialize strong with `"+t+"` for `options.strong`, expected `*`, or `_`");return t}(n),i=n.enter("strong"),a=n.createTracker(r),s=a.move(o+o);let l=a.move(n.containerPhrasing(e,{after:o,before:s,...a.current()}));const c=l.charCodeAt(0),u=J(r.before.charCodeAt(r.before.length-1),c,o);u.inside&&(l=G(c)+l.slice(1));const h=l.charCodeAt(l.length-1),d=J(r.after.charCodeAt(0),h,o);d.inside&&(l=l.slice(0,-1)+G(h));const p=a.move(o+o);return i(),n.attentionEncodeSurroundingInfo={after:d.outside,before:u.outside},s+l+p}ue.peek=function(e,t,n){return n.options.strong||"*"};const he={blockquote:function(e,t,n,r){const o=n.enter("blockquote"),i=n.createTracker(r);i.move("> "),i.shift(2);const a=n.indentLines(n.containerFlow(e,i.current()),B);return o(),a},break:$,code:function(e,t,n,r){const o=function(e){const t=e.options.fence||"`";if("`"!==t&&"~"!==t)throw new Error("Cannot serialize code with `"+t+"` for `options.fence`, expected `` ` `` or `~`");return t}(n),i=e.value||"",a="`"===o?"GraveAccent":"Tilde";if(function(e,t){return Boolean(!1===t.options.fences&&e.value&&!e.lang&&/[^ \r\n]/.test(e.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(e.value))}(e,n)){const e=n.enter("codeIndented"),t=n.indentLines(i,V);return e(),t}const s=n.createTracker(r),l=o.repeat(Math.max(function(e,t){const n=String(e);let r=n.indexOf(t),o=r,i=0,a=0;if("string"!=typeof t)throw new TypeError("Expected substring");for(;-1!==r;)r===o?++i>a&&(a=i):i=1,o=r+t.length,r=n.indexOf(t,o);return a}(i,o)+1,3)),c=n.enter("codeFenced");let u=s.move(l);if(e.lang){const t=n.enter(`codeFencedLang${a}`);u+=s.move(n.safe(e.lang,{before:u,after:" ",encode:["`"],...s.current()})),t()}if(e.lang&&e.meta){const t=n.enter(`codeFencedMeta${a}`);u+=s.move(" "),u+=s.move(n.safe(e.meta,{before:u,after:"\n",encode:["`"],...s.current()})),t()}return u+=s.move("\n"),i&&(u+=s.move(i+"\n")),u+=s.move(l),c(),u},definition:function(e,t,n,r){const o=q(n),i='"'===o?"Quote":"Apostrophe",a=n.enter("definition");let s=n.enter("label");const l=n.createTracker(r);let c=l.move("[");return c+=l.move(n.safe(n.associationId(e),{before:c,after:"]",...l.current()})),c+=l.move("]: "),s(),!e.url||/[\0- \u007F]/.test(e.url)?(s=n.enter("destinationLiteral"),c+=l.move("<"),c+=l.move(n.safe(e.url,{before:c,after:">",...l.current()})),c+=l.move(">")):(s=n.enter("destinationRaw"),c+=l.move(n.safe(e.url,{before:c,after:e.title?" ":"\n",...l.current()}))),s(),e.title&&(s=n.enter(`title${i}`),c+=l.move(" "+o),c+=l.move(n.safe(e.title,{before:c,after:o,...l.current()})),c+=l.move(o),s()),a(),c},emphasis:Q,hardBreak:$,heading:function(e,t,n,r){const o=Math.max(Math.min(6,e.depth||1),1),i=n.createTracker(r);if(function(e,t){let n=!1;return(0,X.YR)(e,function(e){if("value"in e&&/\r?\n|\r/.test(e.value)||"break"===e.type)return n=!0,a.dc}),Boolean((!e.depth||e.depth<3)&&(0,Z.d)(e)&&(t.options.setext||n))}(e,n)){const t=n.enter("headingSetext"),r=n.enter("phrasing"),a=n.containerPhrasing(e,{...i.current(),before:"\n",after:"\n"});return r(),t(),a+"\n"+(1===o?"=":"-").repeat(a.length-(Math.max(a.lastIndexOf("\r"),a.lastIndexOf("\n"))+1))}const s="#".repeat(o),l=n.enter("headingAtx"),c=n.enter("phrasing");i.move(s+" ");let u=n.containerPhrasing(e,{before:"# ",after:"\n",...i.current()});return/^[\t ]/.test(u)&&(u=G(u.charCodeAt(0))+u.slice(1)),u=u?s+" "+u:s,n.options.closeAtx&&(u+=" "+s),c(),l(),u},html:ee,image:te,imageReference:ne,inlineCode:re,link:ie,linkReference:ae,list:function(e,t,n,r){const o=n.enter("list"),i=n.bulletCurrent;let a=e.ordered?function(e){const t=e.options.bulletOrdered||".";if("."!==t&&")"!==t)throw new Error("Cannot serialize items with `"+t+"` for `options.bulletOrdered`, expected `.` or `)`");return t}(n):se(n);const s=e.ordered?"."===a?")":".":function(e){const t=se(e),n=e.options.bulletOther;if(!n)return"*"===t?"-":"*";if("*"!==n&&"+"!==n&&"-"!==n)throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===t)throw new Error("Expected `bullet` (`"+t+"`) and `bulletOther` (`"+n+"`) to be different");return n}(n);let l=!(!t||!n.bulletLastUsed)&&a===n.bulletLastUsed;if(!e.ordered){const t=e.children?e.children[0]:void 0;if("*"!==a&&"-"!==a||!t||t.children&&t.children[0]||"list"!==n.stack[n.stack.length-1]||"listItem"!==n.stack[n.stack.length-2]||"list"!==n.stack[n.stack.length-3]||"listItem"!==n.stack[n.stack.length-4]||0!==n.indexStack[n.indexStack.length-1]||0!==n.indexStack[n.indexStack.length-2]||0!==n.indexStack[n.indexStack.length-3]||(l=!0),le(n)===a&&t){let t=-1;for(;++t<e.children.length;){const n=e.children[t];if(n&&"listItem"===n.type&&n.children&&n.children[0]&&"thematicBreak"===n.children[0].type){l=!0;break}}}}l&&(a=s),n.bulletCurrent=a;const c=n.containerFlow(e,r);return n.bulletLastUsed=a,n.bulletCurrent=i,o(),c},listItem:function(e,t,n,r){const o=function(e){const t=e.options.listItemIndent||"one";if("tab"!==t&&"one"!==t&&"mixed"!==t)throw new Error("Cannot serialize items with `"+t+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return t}(n);let i=n.bulletCurrent||se(n);t&&"list"===t.type&&t.ordered&&(i=("number"==typeof t.start&&t.start>-1?t.start:1)+(!1===n.options.incrementListMarker?0:t.children.indexOf(e))+i);let a=i.length+1;("tab"===o||"mixed"===o&&(t&&"list"===t.type&&t.spread||e.spread))&&(a=4*Math.ceil(a/4));const s=n.createTracker(r);s.move(i+" ".repeat(a-i.length)),s.shift(a);const l=n.enter("listItem"),c=n.indentLines(n.containerFlow(e,s.current()),function(e,t,n){return t?(n?"":" ".repeat(a))+e:(n?i:i+" ".repeat(a-i.length))+e});return l(),c},paragraph:function(e,t,n,r){const o=n.enter("paragraph"),i=n.enter("phrasing"),a=n.containerPhrasing(e,r);return i(),o(),a},root:function(e,t,n,r){return(e.children.some(function(e){return ce(e)})?n.containerPhrasing:n.containerFlow).call(n,e,r)},strong:ue,text:function(e,t,n,r){return n.safe(e.value,r)},thematicBreak:function(e,t,n){const r=(le(n)+(n.options.ruleSpaces?" ":"")).repeat(function(e){const t=e.options.ruleRepetition||3;if(t<3)throw new Error("Cannot serialize rules with repetition `"+t+"` for `options.ruleRepetition`, expected `3` or more");return t}(n));return n.options.ruleSpaces?r.slice(0,-1):r}};function de(e){const t=e._align;(0,o.ok)(t,"expected `_align` on table"),this.enter({type:"table",align:t.map(function(e){return"none"===e?null:e}),children:[]},e),this.data.inTable=!0}function pe(e){this.exit(e),this.data.inTable=void 0}function fe(e){this.enter({type:"tableRow",children:[]},e)}function me(e){this.exit(e)}function ge(e){this.enter({type:"tableCell",children:[]},e)}function ye(e){let t=this.resume();this.data.inTable&&(t=t.replace(/\\([\\|])/g,ve));const n=this.stack[this.stack.length-1];(0,o.ok)("inlineCode"===n.type),n.value=t,this.exit(e)}function ve(e,t){return"|"===t?t:e}function be(e){const t=e||{},n=t.tableCellPadding,r=t.tablePipeAlign,o=t.stringLength,i=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:"\n",inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[\t :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:function(e,t,n){let r=he.inlineCode(e,t,n);return n.stack.includes("tableCell")&&(r=r.replace(/\|/g,"\\$&")),r},table:function(e,t,n,r){return s(function(e,t,n){const r=e.children;let o=-1;const i=[],a=t.enter("table");for(;++o<r.length;)i[o]=l(r[o],t,n);return a(),i}(e,n,r),e.align)},tableCell:a,tableRow:function(e,t,n,r){const o=s([l(e,n,r)]);return o.slice(0,o.indexOf("\n"))}}};function a(e,t,n,r){const o=n.enter("tableCell"),a=n.enter("phrasing"),s=n.containerPhrasing(e,{...r,before:i,after:i});return a(),o(),s}function s(e,t){return function(e,t){const n=t||{},r=(n.align||[]).concat(),o=n.stringLength||M,i=[],a=[],s=[],l=[];let c=0,u=-1;for(;++u<e.length;){const t=[],r=[];let i=-1;for(e[u].length>c&&(c=e[u].length);++i<e[u].length;){const a=z(e[u][i]);if(!1!==n.alignDelimiters){const e=o(a);r[i]=e,(void 0===l[i]||e>l[i])&&(l[i]=e)}t.push(a)}a[u]=t,s[u]=r}let h=-1;if("object"==typeof r&&"length"in r)for(;++h<c;)i[h]=j(r[h]);else{const e=j(r);for(;++h<c;)i[h]=e}h=-1;const d=[],p=[];for(;++h<c;){const e=i[h];let t="",r="";99===e?(t=":",r=":"):108===e?t=":":114===e&&(r=":");let o=!1===n.alignDelimiters?1:Math.max(1,l[h]-t.length-r.length);const a=t+"-".repeat(o)+r;!1!==n.alignDelimiters&&(o=t.length+o+r.length,o>l[h]&&(l[h]=o),p[h]=o),d[h]=a}a.splice(1,0,d),s.splice(1,0,p),u=-1;const f=[];for(;++u<a.length;){const e=a[u],t=s[u];h=-1;const r=[];for(;++h<c;){const o=e[h]||"";let a="",s="";if(!1!==n.alignDelimiters){const e=l[h]-(t[h]||0),n=i[h];114===n?a=" ".repeat(e):99===n?e%2?(a=" ".repeat(e/2+.5),s=" ".repeat(e/2-.5)):(a=" ".repeat(e/2),s=a):s=" ".repeat(e)}!1===n.delimiterStart||h||r.push("|"),!1===n.padding||!1===n.alignDelimiters&&""===o||!1===n.delimiterStart&&!h||r.push(" "),!1!==n.alignDelimiters&&r.push(a),r.push(o),!1!==n.alignDelimiters&&r.push(s),!1!==n.padding&&r.push(" "),!1===n.delimiterEnd&&h===c-1||r.push("|")}f.push(!1===n.delimiterEnd?r.join("").replace(/ +$/,""):r.join(""))}return f.join("\n")}(e,{align:t,alignDelimiters:r,padding:n,stringLength:o})}function l(e,t,n){const r=e.children;let o=-1;const i=[],s=t.enter("tableRow");for(;++o<r.length;)i[o]=a(r[o],0,t,n);return s(),i}}function xe(e){const t=this.stack[this.stack.length-2];(0,o.ok)("listItem"===t.type),t.checked="taskListCheckValueChecked"===e.type}function ke(e){const t=this.stack[this.stack.length-2];if(t&&"listItem"===t.type&&"boolean"==typeof t.checked){const e=this.stack[this.stack.length-1];(0,o.ok)("paragraph"===e.type);const n=e.children[0];if(n&&"text"===n.type){const r=t.children;let o,i=-1;for(;++i<r.length;){const e=r[i];if("paragraph"===e.type){o=e;break}}o===e&&(n.value=n.value.slice(1),0===n.value.length?e.children.shift():e.position&&n.position&&"number"==typeof n.position.start.offset&&(n.position.start.column++,n.position.start.offset++,e.position.start=Object.assign({},n.position.start)))}}this.exit(e)}function we(e,t,n,r){const o=e.children[0],i="boolean"==typeof e.checked&&o&&"paragraph"===o.type,a="["+(e.checked?"x":" ")+"] ",s=n.createTracker(r);i&&s.move(a);let l=he.listItem(e,t,n,{...r,...s.current()});return i&&(l=l.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,function(e){return e+a})),l}var Se=n(389);const Ie={tokenize:function(e,t,n){let r=0;return function t(i){return(87===i||119===i)&&r<3?(r++,e.consume(i),t):46===i&&3===r?(e.consume(i),o):n(i)};function o(e){return null===e?n(e):t(e)}},partial:!0},Ee={tokenize:function(e,t,n){let r,o,a;return s;function s(t){return 46===t||95===t?e.check(Oe,c,l)(t):null===t||(0,i.Ee)(t)||(0,i.Ny)(t)||45!==t&&(0,i.es)(t)?c(t):(a=!0,e.consume(t),s)}function l(t){return 95===t?r=!0:(o=r,r=void 0),e.consume(t),s}function c(e){return o||r||!a?n(e):t(e)}},partial:!0},Ae={tokenize:function(e,t){let n=0,r=0;return o;function o(s){return 40===s?(n++,e.consume(s),o):41===s&&r<n?a(s):33===s||34===s||38===s||39===s||41===s||42===s||44===s||46===s||58===s||59===s||60===s||63===s||93===s||95===s||126===s?e.check(Oe,t,a)(s):null===s||(0,i.Ee)(s)||(0,i.Ny)(s)?t(s):(e.consume(s),o)}function a(t){return 41===t&&r++,e.consume(t),o}},partial:!0},Oe={tokenize:function(e,t,n){return r;function r(s){return 33===s||34===s||39===s||41===s||42===s||44===s||46===s||58===s||59===s||63===s||95===s||126===s?(e.consume(s),r):38===s?(e.consume(s),a):93===s?(e.consume(s),o):60===s||null===s||(0,i.Ee)(s)||(0,i.Ny)(s)?t(s):n(s)}function o(e){return null===e||40===e||91===e||(0,i.Ee)(e)||(0,i.Ny)(e)?t(e):r(e)}function a(e){return(0,i.CW)(e)?s(e):n(e)}function s(t){return 59===t?(e.consume(t),r):(0,i.CW)(t)?(e.consume(t),s):n(t)}},partial:!0},Pe={tokenize:function(e,t,n){return function(t){return e.consume(t),r};function r(e){return(0,i.lV)(e)?n(e):t(e)}},partial:!0},Te={name:"wwwAutolink",tokenize:function(e,t,n){const r=this;return function(t){return 87!==t&&119!==t||!Le.call(r,r.previous)||He(r.events)?n(t):(e.enter("literalAutolink"),e.enter("literalAutolinkWww"),e.check(Ie,e.attempt(Ee,e.attempt(Ae,o),n),n)(t))};function o(n){return e.exit("literalAutolinkWww"),e.exit("literalAutolink"),t(n)}},previous:Le},Ce={name:"protocolAutolink",tokenize:function(e,t,n){const r=this;let o="",a=!1;return function(t){return 72!==t&&104!==t||!Re.call(r,r.previous)||He(r.events)?n(t):(e.enter("literalAutolink"),e.enter("literalAutolinkHttp"),o+=String.fromCodePoint(t),e.consume(t),s)};function s(t){if((0,i.CW)(t)&&o.length<5)return o+=String.fromCodePoint(t),e.consume(t),s;if(58===t){const n=o.toLowerCase();if("http"===n||"https"===n)return e.consume(t),l}return n(t)}function l(t){return 47===t?(e.consume(t),a?c:(a=!0,l)):n(t)}function c(t){return null===t||(0,i.JQ)(t)||(0,i.Ee)(t)||(0,i.Ny)(t)||(0,i.es)(t)?n(t):e.attempt(Ee,e.attempt(Ae,u),n)(t)}function u(n){return e.exit("literalAutolinkHttp"),e.exit("literalAutolink"),t(n)}},previous:Re},Ne={name:"emailAutolink",tokenize:function(e,t,n){const r=this;let o,a;return function(t){return Fe(t)&&We.call(r,r.previous)&&!He(r.events)?(e.enter("literalAutolink"),e.enter("literalAutolinkEmail"),s(t)):n(t)};function s(t){return Fe(t)?(e.consume(t),s):64===t?(e.consume(t),l):n(t)}function l(t){return 46===t?e.check(Pe,u,c)(t):45===t||95===t||(0,i.lV)(t)?(a=!0,e.consume(t),l):u(t)}function c(t){return e.consume(t),o=!0,l}function u(s){return a&&o&&(0,i.CW)(r.previous)?(e.exit("literalAutolinkEmail"),e.exit("literalAutolink"),t(s)):n(s)}},previous:We},De={};let _e=48;for(;_e<123;)De[_e]=Ne,_e++,58===_e?_e=65:91===_e&&(_e=97);function Le(e){return null===e||40===e||42===e||95===e||91===e||93===e||126===e||(0,i.Ee)(e)}function Re(e){return!(0,i.CW)(e)}function We(e){return!(47===e||Fe(e))}function Fe(e){return 43===e||45===e||46===e||95===e||(0,i.lV)(e)}function He(e){let t=e.length,n=!1;for(;t--;){const r=e[t][1];if(("labelLink"===r.type||"labelImage"===r.type)&&!r._balanced){n=!0;break}if(r._gfmAutolinkLiteralWalkedInto){n=!1;break}}return e.length>0&&!n&&(e[e.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}De[43]=Ne,De[45]=Ne,De[46]=Ne,De[95]=Ne,De[72]=[Ne,Ce],De[104]=[Ne,Ce],De[87]=[Ne,Te],De[119]=[Ne,Te];var Me=n(283),ze=n(433);const je={tokenize:function(e,t,n){const r=this;return(0,ze.N)(e,function(e){const o=r.events[r.events.length-1];return o&&"gfmFootnoteDefinitionIndent"===o[1].type&&4===o[2].sliceSerialize(o[1],!0).length?t(e):n(e)},"gfmFootnoteDefinitionIndent",5)},partial:!0};function Be(e,t,n){const r=this;let o=r.events.length;const i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let a;for(;o--;){const e=r.events[o][1];if("labelImage"===e.type){a=e;break}if("gfmFootnoteCall"===e.type||"labelLink"===e.type||"label"===e.type||"image"===e.type||"link"===e.type)break}return function(o){if(!a||!a._balanced)return n(o);const s=(0,w.B)(r.sliceSerialize({start:a.end,end:r.now()}));return 94===s.codePointAt(0)&&i.includes(s.slice(1))?(e.enter("gfmFootnoteCallLabelMarker"),e.consume(o),e.exit("gfmFootnoteCallLabelMarker"),t(o)):n(o)}}function Ye(e,t){let n,r=e.length;for(;r--;)if("labelImage"===e[r][1].type&&"enter"===e[r][0]){n=e[r][1];break}e[r+1][1].type="data",e[r+3][1].type="gfmFootnoteCallLabelMarker";const o={type:"gfmFootnoteCall",start:Object.assign({},e[r+3][1].start),end:Object.assign({},e[e.length-1][1].end)},i={type:"gfmFootnoteCallMarker",start:Object.assign({},e[r+3][1].end),end:Object.assign({},e[r+3][1].end)};i.end.column++,i.end.offset++,i.end._bufferIndex++;const a={type:"gfmFootnoteCallString",start:Object.assign({},i.end),end:Object.assign({},e[e.length-1][1].start)},s={type:"chunkString",contentType:"string",start:Object.assign({},a.start),end:Object.assign({},a.end)},l=[e[r+1],e[r+2],["enter",o,t],e[r+3],e[r+4],["enter",i,t],["exit",i,t],["enter",a,t],["enter",s,t],["exit",s,t],["exit",a,t],e[e.length-2],e[e.length-1],["exit",o,t]];return e.splice(r,e.length-r+1,...l),e}function Ue(e,t,n){const r=this,o=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let a,s=0;return function(t){return e.enter("gfmFootnoteCall"),e.enter("gfmFootnoteCallLabelMarker"),e.consume(t),e.exit("gfmFootnoteCallLabelMarker"),l};function l(t){return 94!==t?n(t):(e.enter("gfmFootnoteCallMarker"),e.consume(t),e.exit("gfmFootnoteCallMarker"),e.enter("gfmFootnoteCallString"),e.enter("chunkString").contentType="string",c)}function c(l){if(s>999||93===l&&!a||null===l||91===l||(0,i.Ee)(l))return n(l);if(93===l){e.exit("chunkString");const i=e.exit("gfmFootnoteCallString");return o.includes((0,w.B)(r.sliceSerialize(i)))?(e.enter("gfmFootnoteCallLabelMarker"),e.consume(l),e.exit("gfmFootnoteCallLabelMarker"),e.exit("gfmFootnoteCall"),t):n(l)}return(0,i.Ee)(l)||(a=!0),s++,e.consume(l),92===l?u:c}function u(t){return 91===t||92===t||93===t?(e.consume(t),s++,c):c(t)}}function $e(e,t,n){const r=this,o=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let a,s,l=0;return function(t){return e.enter("gfmFootnoteDefinition")._container=!0,e.enter("gfmFootnoteDefinitionLabel"),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(t),e.exit("gfmFootnoteDefinitionLabelMarker"),c};function c(t){return 94===t?(e.enter("gfmFootnoteDefinitionMarker"),e.consume(t),e.exit("gfmFootnoteDefinitionMarker"),e.enter("gfmFootnoteDefinitionLabelString"),e.enter("chunkString").contentType="string",u):n(t)}function u(t){if(l>999||93===t&&!s||null===t||91===t||(0,i.Ee)(t))return n(t);if(93===t){e.exit("chunkString");const n=e.exit("gfmFootnoteDefinitionLabelString");return a=(0,w.B)(r.sliceSerialize(n)),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(t),e.exit("gfmFootnoteDefinitionLabelMarker"),e.exit("gfmFootnoteDefinitionLabel"),d}return(0,i.Ee)(t)||(s=!0),l++,e.consume(t),92===t?h:u}function h(t){return 91===t||92===t||93===t?(e.consume(t),l++,u):u(t)}function d(t){return 58===t?(e.enter("definitionMarker"),e.consume(t),e.exit("definitionMarker"),o.includes(a)||o.push(a),(0,ze.N)(e,p,"gfmFootnoteDefinitionWhitespace")):n(t)}function p(e){return t(e)}}function Ve(e,t,n){return e.check(Me.B,t,e.attempt(je,t,n))}function qe(e){e.exit("gfmFootnoteDefinition")}var Ge=n(777),Ke=n(535);function Je(e){let t=(e||{}).singleTilde;const n={name:"strikethrough",tokenize:function(e,n,r){const o=this.previous,i=this.events;let a=0;return function(t){return 126===o&&"characterEscape"!==i[i.length-1][1].type?r(t):(e.enter("strikethroughSequenceTemporary"),s(t))};function s(i){const l=(0,K.S)(o);if(126===i)return a>1?r(i):(e.consume(i),a++,s);if(a<2&&!t)return r(i);const c=e.exit("strikethroughSequenceTemporary"),u=(0,K.S)(i);return c._open=!u||2===u&&Boolean(l),c._close=!l||2===l&&Boolean(u),n(i)}},resolveAll:function(e,t){let n=-1;for(;++n<e.length;)if("enter"===e[n][0]&&"strikethroughSequenceTemporary"===e[n][1].type&&e[n][1]._close){let r=n;for(;r--;)if("exit"===e[r][0]&&"strikethroughSequenceTemporary"===e[r][1].type&&e[r][1]._open&&e[n][1].end.offset-e[n][1].start.offset===e[r][1].end.offset-e[r][1].start.offset){e[n][1].type="strikethroughSequence",e[r][1].type="strikethroughSequence";const o={type:"strikethrough",start:Object.assign({},e[r][1].start),end:Object.assign({},e[n][1].end)},i={type:"strikethroughText",start:Object.assign({},e[r][1].end),end:Object.assign({},e[n][1].start)},a=[["enter",o,t],["enter",e[r][1],t],["exit",e[r][1],t],["enter",i,t]],s=t.parser.constructs.insideSpan.null;s&&(0,Ge.m)(a,a.length,0,(0,Ke.W)(s,e.slice(r+1,n),t)),(0,Ge.m)(a,a.length,0,[["exit",i,t],["enter",e[n][1],t],["exit",e[n][1],t],["exit",o,t]]),(0,Ge.m)(e,r-1,n-r+3,a),n=r+a.length-2;break}}for(n=-1;++n<e.length;)"strikethroughSequenceTemporary"===e[n][1].type&&(e[n][1].type="data");return e}};return null==t&&(t=!0),{text:{126:n},insideSpan:{null:[n]},attentionMarkers:{null:[126]}}}class Qe{constructor(){this.map=[]}add(e,t,n){!function(e,t,n,r){let o=0;if(0!==n||0!==r.length){for(;o<e.map.length;){if(e.map[o][0]===t)return e.map[o][1]+=n,void e.map[o][2].push(...r);o+=1}e.map.push([t,n,r])}}(this,e,t,n)}consume(e){if(this.map.sort(function(e,t){return e[0]-t[0]}),0===this.map.length)return;let t=this.map.length;const n=[];for(;t>0;)t-=1,n.push(e.slice(this.map[t][0]+this.map[t][1]),this.map[t][2]),e.length=this.map[t][0];n.push(e.slice()),e.length=0;let r=n.pop();for(;r;){for(const t of r)e.push(t);r=n.pop()}this.map.length=0}}function Xe(e,t){let n=!1;const r=[];for(;t<e.length;){const o=e[t];if(n){if("enter"===o[0])"tableContent"===o[1].type&&r.push("tableDelimiterMarker"===e[t+1][1].type?"left":"none");else if("tableContent"===o[1].type){if("tableDelimiterMarker"===e[t-1][1].type){const e=r.length-1;r[e]="left"===r[e]?"center":"right"}}else if("tableDelimiterRow"===o[1].type)break}else"enter"===o[0]&&"tableDelimiterRow"===o[1].type&&(n=!0);t+=1}return r}function Ze(e,t,n){const r=this;let o,a=0,s=0;return function(e){let t=r.events.length-1;for(;t>-1;){const e=r.events[t][1].type;if("lineEnding"!==e&&"linePrefix"!==e)break;t--}const o=t>-1?r.events[t][1].type:null,i="tableHead"===o||"tableRow"===o?k:l;return i===k&&r.parser.lazy[r.now().line]?n(e):i(e)};function l(t){return e.enter("tableHead"),e.enter("tableRow"),function(e){return 124===e||(o=!0,s+=1),c(e)}(t)}function c(t){return null===t?n(t):(0,i.HP)(t)?s>1?(s=0,r.interrupt=!0,e.exit("tableRow"),e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),d):n(t):(0,i.On)(t)?(0,ze.N)(e,c,"whitespace")(t):(s+=1,o&&(o=!1,a+=1),124===t?(e.enter("tableCellDivider"),e.consume(t),e.exit("tableCellDivider"),o=!0,c):(e.enter("data"),u(t)))}function u(t){return null===t||124===t||(0,i.Ee)(t)?(e.exit("data"),c(t)):(e.consume(t),92===t?h:u)}function h(t){return 92===t||124===t?(e.consume(t),u):u(t)}function d(t){return r.interrupt=!1,r.parser.lazy[r.now().line]?n(t):(e.enter("tableDelimiterRow"),o=!1,(0,i.On)(t)?(0,ze.N)(e,p,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(t):p(t))}function p(t){return 45===t||58===t?m(t):124===t?(o=!0,e.enter("tableCellDivider"),e.consume(t),e.exit("tableCellDivider"),f):x(t)}function f(t){return(0,i.On)(t)?(0,ze.N)(e,m,"whitespace")(t):m(t)}function m(t){return 58===t?(s+=1,o=!0,e.enter("tableDelimiterMarker"),e.consume(t),e.exit("tableDelimiterMarker"),g):45===t?(s+=1,g(t)):null===t||(0,i.HP)(t)?b(t):x(t)}function g(t){return 45===t?(e.enter("tableDelimiterFiller"),y(t)):x(t)}function y(t){return 45===t?(e.consume(t),y):58===t?(o=!0,e.exit("tableDelimiterFiller"),e.enter("tableDelimiterMarker"),e.consume(t),e.exit("tableDelimiterMarker"),v):(e.exit("tableDelimiterFiller"),v(t))}function v(t){return(0,i.On)(t)?(0,ze.N)(e,b,"whitespace")(t):b(t)}function b(n){return 124===n?p(n):(null===n||(0,i.HP)(n))&&o&&a===s?(e.exit("tableDelimiterRow"),e.exit("tableHead"),t(n)):x(n)}function x(e){return n(e)}function k(t){return e.enter("tableRow"),w(t)}function w(n){return 124===n?(e.enter("tableCellDivider"),e.consume(n),e.exit("tableCellDivider"),w):null===n||(0,i.HP)(n)?(e.exit("tableRow"),t(n)):(0,i.On)(n)?(0,ze.N)(e,w,"whitespace")(n):(e.enter("data"),S(n))}function S(t){return null===t||124===t||(0,i.Ee)(t)?(e.exit("data"),w(t)):(e.consume(t),92===t?I:S)}function I(t){return 92===t||124===t?(e.consume(t),S):S(t)}}function et(e,t){let n,r,o,i=-1,a=!0,s=0,l=[0,0,0,0],c=[0,0,0,0],u=!1,h=0;const d=new Qe;for(;++i<e.length;){const p=e[i],f=p[1];"enter"===p[0]?"tableHead"===f.type?(u=!1,0!==h&&(nt(d,t,h,n,r),r=void 0,h=0),n={type:"table",start:Object.assign({},f.start),end:Object.assign({},f.end)},d.add(i,0,[["enter",n,t]])):"tableRow"===f.type||"tableDelimiterRow"===f.type?(a=!0,o=void 0,l=[0,0,0,0],c=[0,i+1,0,0],u&&(u=!1,r={type:"tableBody",start:Object.assign({},f.start),end:Object.assign({},f.end)},d.add(i,0,[["enter",r,t]])),s="tableDelimiterRow"===f.type?2:r?3:1):!s||"data"!==f.type&&"tableDelimiterMarker"!==f.type&&"tableDelimiterFiller"!==f.type?"tableCellDivider"===f.type&&(a?a=!1:(0!==l[1]&&(c[0]=c[1],o=tt(d,t,l,s,void 0,o)),l=c,c=[l[1],i,0,0])):(a=!1,0===c[2]&&(0!==l[1]&&(c[0]=c[1],o=tt(d,t,l,s,void 0,o),l=[0,0,0,0]),c[2]=i)):"tableHead"===f.type?(u=!0,h=i):"tableRow"===f.type||"tableDelimiterRow"===f.type?(h=i,0!==l[1]?(c[0]=c[1],o=tt(d,t,l,s,i,o)):0!==c[1]&&(o=tt(d,t,c,s,i,o)),s=0):!s||"data"!==f.type&&"tableDelimiterMarker"!==f.type&&"tableDelimiterFiller"!==f.type||(c[3]=i)}for(0!==h&&nt(d,t,h,n,r),d.consume(t.events),i=-1;++i<t.events.length;){const e=t.events[i];"enter"===e[0]&&"table"===e[1].type&&(e[1]._align=Xe(t.events,i))}return e}function tt(e,t,n,r,o,i){const a=1===r?"tableHeader":2===r?"tableDelimiter":"tableData";0!==n[0]&&(i.end=Object.assign({},rt(t.events,n[0])),e.add(n[0],0,[["exit",i,t]]));const s=rt(t.events,n[1]);if(i={type:a,start:Object.assign({},s),end:Object.assign({},s)},e.add(n[1],0,[["enter",i,t]]),0!==n[2]){const o=rt(t.events,n[2]),i=rt(t.events,n[3]),a={type:"tableContent",start:Object.assign({},o),end:Object.assign({},i)};if(e.add(n[2],0,[["enter",a,t]]),2!==r){const r=t.events[n[2]],o=t.events[n[3]];if(r[1].end=Object.assign({},o[1].end),r[1].type="chunkText",r[1].contentType="text",n[3]>n[2]+1){const t=n[2]+1,r=n[3]-n[2]-1;e.add(t,r,[])}}e.add(n[3]+1,0,[["exit",a,t]])}return void 0!==o&&(i.end=Object.assign({},rt(t.events,o)),e.add(o,0,[["exit",i,t]]),i=void 0),i}function nt(e,t,n,r,o){const i=[],a=rt(t.events,n);o&&(o.end=Object.assign({},a),i.push(["exit",o,t])),r.end=Object.assign({},a),i.push(["exit",r,t]),e.add(n+1,0,i)}function rt(e,t){const n=e[t],r="enter"===n[0]?"start":"end";return n[1][r]}const ot={name:"tasklistCheck",tokenize:function(e,t,n){const r=this;return function(t){return null===r.previous&&r._gfmTasklistFirstContentOfListItem?(e.enter("taskListCheck"),e.enter("taskListCheckMarker"),e.consume(t),e.exit("taskListCheckMarker"),o):n(t)};function o(t){return(0,i.Ee)(t)?(e.enter("taskListCheckValueUnchecked"),e.consume(t),e.exit("taskListCheckValueUnchecked"),a):88===t||120===t?(e.enter("taskListCheckValueChecked"),e.consume(t),e.exit("taskListCheckValueChecked"),a):n(t)}function a(t){return 93===t?(e.enter("taskListCheckMarker"),e.consume(t),e.exit("taskListCheckMarker"),e.exit("taskListCheck"),s):n(t)}function s(r){return(0,i.HP)(r)?t(r):(0,i.On)(r)?e.check({tokenize:it},t,n)(r):n(r)}}};function it(e,t,n){return(0,ze.N)(e,function(e){return null===e?n(e):t(e)},"whitespace")}const at={};function st(e){const t=e||at,n=this.data(),r=n.micromarkExtensions||(n.micromarkExtensions=[]),o=n.fromMarkdownExtensions||(n.fromMarkdownExtensions=[]),i=n.toMarkdownExtensions||(n.toMarkdownExtensions=[]);r.push(function(e){return(0,Se.y)([{text:De},{document:{91:{name:"gfmFootnoteDefinition",tokenize:$e,continuation:{tokenize:Ve},exit:qe}},text:{91:{name:"gfmFootnoteCall",tokenize:Ue},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:Be,resolveTo:Ye}}},Je(e),{flow:{null:{name:"table",tokenize:Ze,resolveAll:et}}},{text:{91:ot}}])}(t)),o.push([{transforms:[v],enter:{literalAutolink:d,literalAutolinkEmail:p,literalAutolinkHttp:p,literalAutolinkWww:p},exit:{literalAutolink:y,literalAutolinkEmail:g,literalAutolinkHttp:f,literalAutolinkWww:m}},{enter:{gfmFootnoteCallString:S,gfmFootnoteCall:I,gfmFootnoteDefinitionLabelString:E,gfmFootnoteDefinition:A},exit:{gfmFootnoteCallString:O,gfmFootnoteCall:P,gfmFootnoteDefinitionLabelString:T,gfmFootnoteDefinition:C}},{canContainEols:["delete"],enter:{strikethrough:W},exit:{strikethrough:F}},{enter:{table:de,tableData:ge,tableHeader:ge,tableRow:fe},exit:{codeText:ye,table:pe,tableData:me,tableHeader:me,tableRow:me}},{exit:{taskListCheckValueChecked:xe,taskListCheckValueUnchecked:xe,paragraph:ke}}]),i.push(function(e){return{extensions:[{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:u,notInConstruct:h},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:u,notInConstruct:h},{character:":",before:"[ps]",after:"\\/",inConstruct:u,notInConstruct:h}]},D(e),{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:R}],handlers:{delete:H}},be(e),{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:we}}]}}(t))}},970:(e,t,n)=>{n.d(t,{YR:()=>o});var r=n(656);function o(e,t,n,o){let i,a,s;"function"==typeof t&&"function"!=typeof n?(a=void 0,s=t,i=n):(a=t,s=n,i=o),(0,r.VG)(e,a,function(e,t){const n=t[t.length-1],r=n?n.children.indexOf(e):void 0;return s(e,r,n)},i)}}},g={};function y(e){var t=g[e];if(void 0!==t)return t.exports;var n=g[e]={id:e,exports:{}};return m[e].call(n.exports,n,n.exports,y),n.exports}y.m=m,y.c=g,y.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return y.d(t,{a:t}),t},y.d=(e,t)=>{for(var n in t)y.o(t,n)&&!y.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},y.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),y.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{y.S={};var e={},t={};y.I=(n,r)=>{r||(r=[]);var o=t[n];if(o||(o=t[n]={}),!(r.indexOf(o)>=0)){if(r.push(o),e[n])return e[n];y.o(y.S,n)||(y.S[n]={});var i=y.S[n],a="BrainDriveWhyDetector",s=[];return"default"===n&&((e,t)=>{var n=i[e]=i[e]||{},r=n[t];(!r||!r.loaded&&(0!=!r.eager||a>r.from))&&(n[t]={get:()=>()=>y(540),from:a,eager:!0})})("react","18.3.1"),e[n]=s.length?Promise.all(s).then(()=>e[n]=1):1}}})(),e=e=>{var t=e=>e.split(".").map(e=>+e==e?+e:e),n=/^([^-+]+)?(?:-([^+]+))?(?:\+(.+))?$/.exec(e),r=n[1]?t(n[1]):[];return n[2]&&(r.length++,r.push.apply(r,t(n[2]))),n[3]&&(r.push([]),r.push.apply(r,t(n[3]))),r},t=(t,n)=>{t=e(t),n=e(n);for(var r=0;;){if(r>=t.length)return r<n.length&&"u"!=(typeof n[r])[0];var o=t[r],i=(typeof o)[0];if(r>=n.length)return"u"==i;var a=n[r],s=(typeof a)[0];if(i!=s)return"o"==i&&"n"==s||"s"==s||"u"==i;if("o"!=i&&"u"!=i&&o!=a)return o<a;r++}},n=e=>{var t=e[0],r="";if(1===e.length)return"*";if(t+.5){r+=0==t?">=":-1==t?"<":1==t?"^":2==t?"~":t>0?"=":"!=";for(var o=1,i=1;i<e.length;i++)o--,r+="u"==(typeof(s=e[i]))[0]?"-":(o>0?".":"")+(o=2,s);return r}var a=[];for(i=1;i<e.length;i++){var s=e[i];a.push(0===s?"not("+l()+")":1===s?"("+l()+" || "+l()+")":2===s?a.pop()+" "+a.pop():n(s))}return l();function l(){return a.pop().replace(/^\((.+)\)$/,"$1")}},r=(t,n)=>{if(0 in t){n=e(n);var o=t[0],i=o<0;i&&(o=-o-1);for(var a=0,s=1,l=!0;;s++,a++){var c,u,h=s<t.length?(typeof t[s])[0]:"";if(a>=n.length||"o"==(u=(typeof(c=n[a]))[0]))return!l||("u"==h?s>o&&!i:""==h!=i);if("u"==u){if(!l||"u"!=h)return!1}else if(l)if(h==u)if(s<=o){if(c!=t[s])return!1}else{if(i?c>t[s]:c<t[s])return!1;c!=t[s]&&(l=!1)}else if("s"!=h&&"n"!=h){if(i||s<=o)return!1;l=!1,s--}else{if(s<=o||u<h!=i)return!1;l=!1}else"s"!=h&&"n"!=h&&(l=!1,s--)}}var d=[],p=d.pop.bind(d);for(a=1;a<t.length;a++){var f=t[a];d.push(1==f?p()|p():2==f?p()&p():f?r(f,n):!p())}return!!p()},o=(e,t)=>e&&y.o(e,t),i=e=>(e.loaded=1,e.get()),a=e=>Object.keys(e).reduce((t,n)=>(e[n].eager&&(t[n]=e[n]),t),{}),s=(e,n,r)=>{var o=r?a(e[n]):e[n];return Object.keys(o).reduce((e,n)=>!e||!o[e].loaded&&t(e,n)?n:e,0)},l=(e,t,r,o)=>"Unsatisfied version "+r+" from "+(r&&e[t][r].from)+" of shared singleton module "+t+" (required "+n(o)+")",c=e=>{throw new Error(e)},u=e=>{"undefined"!=typeof console&&console.warn&&console.warn(e)},h=(e,t,n)=>n?n():((e,t)=>c("Shared module "+t+" doesn't exist in shared scope "+e))(e,t),d=(e=>function(t,n,r,o,i){var a=y.I(t);return a&&a.then&&!r?a.then(e.bind(e,t,y.S[t],n,!1,o,i)):e(t,y.S[t],n,r,o,i)})((e,t,n,a,c,d)=>{if(!o(t,n))return h(e,n,d);var p=s(t,n,a);return r(c,p)||u(l(t,n,p,c)),i(t[n][p])}),p={},f={769:()=>d("default","react",!0,[1,18,2,0],()=>()=>y(540))},[769].forEach(e=>{y.m[e]=t=>{p[e]=0,delete y.c[e];var n=f[e]();if("function"!=typeof n)throw new Error("Shared module is not available for eager consumption: "+e);t.exports=n()}}),y.nc=void 0;var v=y(248);BrainDriveWhyDetector=v})();